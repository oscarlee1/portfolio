/*! For license information please see main.0f3f5cec.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},368:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(368),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,T=60114,S=60109,C=60110,N=60112,A=60113,D=60120,O=60115,R=60116,P=60121,L=60128,M=60129,F=60130,V=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;x=U("react.element"),_=U("react.portal"),I=U("react.fragment"),E=U("react.strict_mode"),T=U("react.profiler"),S=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),A=U("react.suspense"),D=U("react.suspense_list"),O=U("react.memo"),R=U("react.lazy"),P=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),V=U("react.legacy_hidden")}var j,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return H(e.type);case P:return H(e._render);case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function De(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Re(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Re,Fe=!1,Ve=!1;function Ue(){null===Ce&&null===Ne||(Le(),Oe())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(me){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,Ge=null,We=!1,He=null,Qe={onError:function(e){Ke=!0,Ge=e}};function $e(e,t,n,r,i,a,o,u,s){Ke=!1,Ge=null,ze.apply(Qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Je(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),At=St("animationstart"),Dt=St("transitionend"),Ot=new Map,Rt=new Map,Pt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Vt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?jt(10,t):e;case 10:return 0===(e=Bt(192&~t))?jt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,$t=!0;function Jt(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Pe(i,e,t,n,r)}finally{(Fe=a)||Ue()}}function Yt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=mt(ut,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Ye(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=sn(mn),gn=sn(i({},mn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),_n=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),Dn=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Pn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Vn=null;f&&"documentMode"in document&&(Vn=document.documentMode);var Un=f&&"TextEvent"in window&&!Vn,jn=f&&(!Fn||Vn&&8<Vn&&11>=Vn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){De(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Jn=null;function Yn(e){Nr(e,0)}function Xn(e){if(Y(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Jn=$n=null)}function ar(e){if("value"===e.propertyName&&Xn(Jn)){var t=[];if(Qn(t,Jn,e,Te(e)),e=Yn,Fe)e(t);else{Fe=!0;try{Re(e,t)}finally{Fe=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Jn)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Pt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Rt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if($e.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=Ge;Ke=!1,Ge=null,We||(We=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=He,We=!1,He=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Dr]||(e[Dr]=!0,u.forEach((function(t){Sr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Pr(a,e,i,t),o.add(u))}function Pr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ve)return e(t,n);Ve=!0;try{Me(e,t,n)}finally{Ve=!1,Ue()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Ot.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=On;break;case Ct:case Nt:case At:s=wn;break;case Dt:s=Rn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Dn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Dn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Vr(d))p++;for(d=0,v=h;v;v=Vr(v))d++;for(;0<p-d;)l=Vr(l),p--;for(;0<d-p;)h=Vr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Vr(l),h=Vr(h)}l=null}else l=null;null!==s&&Ur(o,u,s,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Zn;else if(Hn(u))if(er)m=cr;else{m=ur;var y=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=sr);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ie(u,"number",u.value)),y=r?ii(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(kr=y,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(y=Fr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Yr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Yr,Zr="__reactProps$"+Yr,ei="__reactContainer$"+Yr,ti="__reactEvents$"+Yr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Xr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Vi=void 0!==Ni?Ni:function(){},Ui=null,ji=null,Bi=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Ki(){switch(Di()){case Oi:return 99;case Ri:return 98;case Pi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Oi;case 98:return Ri;case 97:return Pi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Gi(e),Ei(e,t)}function Hi(e,t,n){return e=Gi(e),Ti(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Si(e)}$i()}function $i(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Oi,Qi),n}finally{Bi=!1}}}var Ji=b.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Js(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Ys(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ys(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Js(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return m(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Da=ci(Ca);function Oa(e){if(e===Ca)throw Error(o(174));return e}function Ra(e,t){switch(fi(Da,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Pa(){li(Na),li(Aa),li(Da)}function La(e){Oa(Da.current);var t=Oa(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Fa=ci(0);function Va(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,ja=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Ua=e);qa(Ua,n)}Ua=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Ua=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Wa(e){if(e!==Ua)return!1;if(!Ba)return Ga(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=ja;t;)qa(e,t),t=Qr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Ua?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){ja=Ua=null,Ba=!1}var Qa=[];function $a(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ja=b.ReactCurrentDispatcher,Ya=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Ro:Po,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Oo,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ru;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ja.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Do.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function mo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Do.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ya.transition;Ya.transition=1;try{e(!1),t()}finally{Ya.transition=n}}))}function Do(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Oo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Do.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Vo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Vo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(yi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ma(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Yi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=mi(t,s=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Vo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Ra(e,t.containerInfo)}var Qo,$o,Jo,Yo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Yo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Vo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Va(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Va(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Pa(),li(pi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Oa(Da.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Na.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":J(r),re(r,u,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Ar(Tr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Da.current),Oa(Na.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Vu&&(Vu=3):(0!==Vu&&3!==Vu||(Vu=4),null===Ru||0===(134217727&Bu)&&0===(134217727&qu)||gs(Ru,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Pa(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Vu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Va(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Va(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pa(),li(pi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Pa(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ju||(Ju=!0,Yu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function mu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function yu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?ye(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=b.ReactCurrentDispatcher,Du=b.ReactCurrentOwner,Ou=0,Ru=null,Pu=null,Lu=0,Mu=0,Fu=ci(0),Vu=0,Uu=null,ju=0,Bu=0,qu=0,zu=0,Ku=null,Gu=0,Wu=1/0;function Hu(){Wu=zi()+500}var Qu,$u=null,Ju=!1,Yu=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ou)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=ju),0!==Ji.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ou)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ru&&(qu|=t,4===Vu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ms(e,n),0===Ou&&(Hu(),Qi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ms(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ms(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Vt(e,e===Ru?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ks.bind(null,e),null===Ui?(Ui=[n],ji=Ti(Oi,$i)):Ui.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ys.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ys(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Vt(e,e===Ru?Lu:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=Ts();for(Ru===e&&Lu===r||(Hu(),Is(e,r));;)try{Ns();break}catch(s){Es(e,s)}if(na(),Au.current=a,Ou=i,null!==Pu?r=0:(Ru=null,Lu=0,r=Vu),0!==(ju&qu))Is(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Ut(e))&&(r=Ss(e,n))),1===r)throw t=Uu,Is(e,0),gs(e,n),ms(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Vt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Gr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ms(e,zi()),e.callbackNode===t?ys.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Ls(),e===Ru&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(ju&qu)&&(n=Ss(e,t=Vt(e,t)))}else n=Ss(e,t=Vt(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Ut(e))&&(n=Ss(e,t))),1===n)throw n=Uu,Is(e,0),gs(e,t),ms(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ms(e,zi()),null}function ws(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Qi())}}function bs(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,ju|=t}function _s(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Pa(),li(pi),li(di),$a();break;case 5:Ma(r);break;case 4:Pa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Ru=e,Pu=Ws(e.current,null),Lu=Mu=ju=t,Vu=0,Uu=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Pu;try{if(na(),Ja.current=Oo,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Du.current=null,null===n||null===n.return){Vu=1,Uu=t,Pu=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Bs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Vu&&(Vu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Ds(n)}catch(_){t=_,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function Ts(){var e=Au.current;return Au.current=Oo,null===e?Oo:e}function Ss(e,t){var n=Ou;Ou|=16;var r=Ts();for(Ru===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Ou=n,Au.current=r,null!==Pu)throw Error(o(261));return Ru=null,Lu=0,Vu}function Cs(){for(;null!==Pu;)As(Pu)}function Ns(){for(;null!==Pu&&!Ci();)As(Pu)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Ds(e):Pu=t,Du.current=null}function Ds(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Pu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Pu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Vu&&(Vu=5)}function Os(e){var t=Ki();return Wi(99,Rs.bind(null,e,t)),null}function Rs(e,t){do{Ls()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ru&&(Pu=Ru=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Du.current=null,Br=$t,yr(u=mr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=u,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===u)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},$t=!1,ls=null,fs=!1,$u=r;do{try{Ps()}catch(T){if(null===$u)throw Error(o(330));js($u,T),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&ge($u.stateNode,""),128&k){var w=$u.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu($u),$u.flags&=-3;break;case 6:xu($u),$u.flags&=-3,Tu($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,Tu($u.alternate,$u);break;case 4:Tu($u.alternate,$u);break;case 8:Eu(u,s=$u);var x=s.alternate;wu(s),null!==x&&wu(x)}$u=$u.nextEffect}}catch(T){if(null===$u)throw Error(o(330));js($u,T),$u=$u.nextEffect}}while(null!==$u);if(b=qr,w=mr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&yr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!Br,qr=Br=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var _=$u.flags;if(36&_&&yu(k,$u.alternate,$u),128&_){w=void 0;var I=$u.ref;if(null!==I){var E=$u.stateNode;$u.tag,w=E,"function"===typeof I?I(w):I.current=w}}$u=$u.nextEffect}}catch(T){if(null===$u)throw Error(o(330));js($u,T),$u=$u.nextEffect}}while(null!==$u);$u=null,Vi(),Ou=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((_=$u).sibling=null,_.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(ms(e,zi()),Ju)throw Ju=!1,e=Yu,Yu=null,e;return 0!==(8&Ou)||Qi(),null}function Ps(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?et($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&et($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&mu(e,$u),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),$u=$u.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Vs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Vs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Qi(),!0}function Us(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ms(e,t))}function js(e,t){if(3===e.tag)Us(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Us(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ms(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Lu&n)===n&&(4===Vu||3===Vu&&(62914560&Lu)===Lu&&500>zi()-Gu?Is(e,0):zu|=n),ms(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=ju),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ms(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=Ks(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case D:return(e=Ks(19,n,t,i)).elementType=D,e.lanes=a,e;case F:return $s(n,i,a,t);case V:return(e=Ks(24,n,t,i)).elementType=V,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case N:u=11;break e;case O:u=14;break e;case R:u=16,r=null;break e;case P:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function Js(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Ys(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:yi(t.type)&&bi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ma(t,r,u,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Vo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Ua=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Vo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Vo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Vo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Vo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Vo(e,t,r,n),t.child;case 14:return a=Yi(i=t.type,t.pendingProps),jo(e,t,i,a=Yi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));Y(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=ws,Pe=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Hu(),Qi())}},Le=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ms(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,De,Oe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ou=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(368);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(368),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function D(){var e=A.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,b.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,A=3,D=!1,O=!1,R=!1;function P(e){for(var t=_(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,x(T,t)}t=_(S)}}function L(e){if(R=!1,P(e),!O)if(null!==_(T))O=!0,n(M);else{var t=_(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,R&&(R=!1,i()),D=!0;var a=A;try{for(P(n),N=_(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(T)&&I(T),P(n)}else I(T);N=_(T)}if(null!==N)var s=!0;else{var c=_(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,D=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(S,e),null===_(T)&&e===_(S)&&(R?i():R=!0,r(L,o-u))):(e.sortIndex=s,x(T,e),O||D||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},162:function(e,t,n){"use strict";e.exports=n.p+"static/media/resume.d6c518396ab77d04b6f4.pdf"},839:function(e,t,n){"use strict";e.exports=n.p+"static/media/four.3b855ffdb712faab3e3a.jpeg"},415:function(e,t,n){"use strict";e.exports=n.p+"static/media/one.f752ea8a4de6344e65fe.jpeg"},214:function(e,t,n){"use strict";e.exports=n.p+"static/media/three.e7be4e6bea96001ad521.jpeg"},815:function(e,t,n){"use strict";e.exports=n.p+"static/media/two.99931066686b48ea0e66.jpeg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".9b9c0edf.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="portfolio:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/portfolio/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[o[c]]=0},r=self.webpackChunkportfolio=self.webpackChunkportfolio||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return be},SDK_VERSION:function(){return Mt},_DEFAULT_ENTRY_NAME:function(){return _t},_addComponent:function(){return St},_addOrOverwriteComponent:function(){return Ct},_apps:function(){return Et},_clearComponents:function(){return Ot},_components:function(){return Tt},_getProvider:function(){return At},_registerComponent:function(){return Nt},_removeServiceInstance:function(){return Dt},deleteApp:function(){return jt},getApp:function(){return Vt},getApps:function(){return Ut},initializeApp:function(){return Ft},onLog:function(){return zt},registerVersion:function(){return qt},setLogLevel:function(){return Kt}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var l,f=l||(l={});f.Pop="POP",f.Push="PUSH",f.Replace="REPLACE";var h=function(e){return e};function d(e){e.preventDefault(),e.returnValue=""}function p(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function v(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname;t=void 0===t?"/":t;var n=e.search;return n=void 0===n?"":n,e=void 0===(e=e.hash)?"":e,n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function y(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function g(e,t){if(!e)throw new Error(t)}var k=(0,t.createContext)(null);var w=(0,t.createContext)(null);var b=(0,t.createContext)({outlet:null,matches:[]});function x(e){return function(e){var n=(0,t.useContext)(b).outlet;if(n)return(0,t.createElement)(C.Provider,{value:e},n);return n}(e.context)}function _(e){g(!1)}function I(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?l.Pop:u,c=e.navigator,f=e.static,h=void 0!==f&&f;T()&&g(!1);var d=U(r),p=(0,t.useMemo)((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof o&&(o=y(o));var v=o,m=v.pathname,b=void 0===m?"/":m,x=v.search,_=void 0===x?"":x,I=v.hash,E=void 0===I?"":I,S=v.state,C=void 0===S?null:S,N=v.key,A=void 0===N?"default":N,D=(0,t.useMemo)((function(){var e=F(b,d);return null==e?null:{pathname:e,search:_,hash:E,state:C,key:A}}),[d,b,_,E,C,A]);return null==D?null:(0,t.createElement)(k.Provider,{value:p},(0,t.createElement)(w.Provider,{children:a,value:{location:D,navigationType:s}}))}function E(e){var n=e.children,r=e.location;return function(e,n){T()||g(!1);var r=(0,t.useContext)(b).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=S();if(n){var c,l="string"===typeof n?y(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||g(!1),u=l}else u=s;var f=u.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=F(("string"===typeof t?y(t):t).pathname||"/",n);if(null==r)return null;var i=A(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=P(i[o],r);return a}(e,{pathname:h});0;return L(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:V([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:V([o,e.pathnameBase])})})),r)}(N(n),r)}function T(){return null!=(0,t.useContext)(w)}function S(){return T()||g(!1),(0,t.useContext)(w).location}var C=(0,t.createContext)(null);function N(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==_&&g(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=N(e.props.children)),n.push(r)}else n.push.apply(n,N(e.props.children))})),n}function A(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||g(!1),a.relativePath=a.relativePath.slice(r.length));var o=V([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&g(!1),A(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:R(o,e.index),routesMeta:u})})),t}var D=/^:\w+$/,O=function(e){return"*"===e};function R(e,t){var n=e.split("/"),r=n.length;return n.some(O)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!O(e)})).reduce((function(e,t){return e+(D.test(t)?3:""===t?1:10)}),r)}function P(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=M({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:V([i,l.pathname]),pathnameBase:V([i,l.pathnameBase]),route:f}),"/"!==l.pathnameBase&&(i=V([i,l.pathnameBase]))}return a}function L(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(b.Provider,{children:void 0!==i.route.element?i.route.element:(0,t.createElement)(x,null),value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function F(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var V=function(e){return e.join("/").replace(/\/\/+/g,"/")},U=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")};function j(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){function t(){var e=o.location,t=u.state||{};return[t.idx,h({pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"})]}function n(e){return"string"===typeof e?e:m(e)}function r(e,t){return void 0===t&&(t=null),h(c({pathname:k.pathname,hash:"",search:""},"string"===typeof e?y(e):e,{state:t,key:v()}))}function i(e){f=e,e=t(),g=e[0],k=e[1],w.call({action:f,location:k})}function a(e){u.go(e)}void 0===e&&(e={});var o=void 0===(e=e.window)?document.defaultView:e,u=o.history,s=null;o.addEventListener("popstate",(function(){if(s)b.call(s),s=null;else{var e=l.Pop,n=t(),r=n[0];if(n=n[1],b.length){if(null!=r){var o=g-r;o&&(s={action:e,location:n,retry:function(){a(-1*o)}},a(o))}}else i(e)}}));var f=l.Pop,g=(e=t())[0],k=e[1],w=p(),b=p();return null==g&&(g=0,u.replaceState(c({},u.state,{idx:g}),"")),{get action(){return f},get location(){return k},createHref:n,push:function e(t,a){var s=l.Push,c=r(t,a);if(!b.length||(b.call({action:s,location:c,retry:function(){e(t,a)}}),0)){var f=[{usr:c.state,key:c.key,idx:g+1},n(c)];c=f[0],f=f[1];try{u.pushState(c,"",f)}catch(tp){o.location.assign(f)}i(s)}},replace:function e(t,a){var o=l.Replace,s=r(t,a);b.length&&(b.call({action:o,location:s,retry:function(){e(t,a)}}),1)||(s=[{usr:s.state,key:s.key,idx:g},n(s)],u.replaceState(s[0],"",s[1]),i(o))},go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(e){return w.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&o.addEventListener("beforeunload",d),function(){t(),b.length||o.removeEventListener("beforeunload",d)}}}}({window:i}));var o=a.current,u=s((0,t.useState)({action:o.action,location:o.location}),2),f=u[0],g=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(g)}),[o]),(0,t.createElement)(I,{basename:n,children:r,location:f.location,navigationType:f.action,navigator:o})}var B=n(415),q=n(815),z=n(214),K=n(839),G=n(162);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function J(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}function Z(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&X(e,t)}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){if(t&&("object"===ne(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function ie(e){var t=te();return function(){var n,r=ee(e);if(t){var i=ee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return re(this,n)}}function ae(e,t,n){return ae=te()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&X(i,n.prototype),i},ae.apply(null,arguments)}function oe(e){var t="function"===typeof Map?new Map:void 0;return oe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ae(e,arguments,ee(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),X(n,e)},oe(e)}var ue=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ue(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ce=function(e){return function(e){var t=ue(e);return se.encodeByteArray(t,!0)}(e).replace(/\./g,"")},le=function(e){try{return se.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function fe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=fe(e[n],t[n]));return e}var he=function(){function e(){var t=this;H(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return $(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function de(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(a)),""].join(".")}function pe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ve(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function me(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function ye(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ge(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ke(){var e=pe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function we(){return"object"===typeof indexedDB}var be=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Y(a),xe.prototype.create),a}return $(n)}(oe(Error)),xe=function(){function e(t,n,r){H(this,e),this.service=t,this.serviceName=n,this.errors=r}return $(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?_e(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new be(n,a,t);return o}}]),e}();function _e(e,t){return e.replace(Ie,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ie=/\{\$([^}]+)}/g;function Ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Te(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Se(u)&&Se(s)){if(!Te(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Se(e){return null!==e&&"object"===typeof e}function Ce(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ne(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ae(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function De(e,t){var n=new Oe(e,t);return n.subscribe.bind(n)}var Oe=function(){function e(t,n){var r=this;H(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return $(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=J(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Re),void 0===r.error&&(r.error=Re),void 0===r.complete&&(r.complete=Re);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Re(){}function Pe(e){return e&&e._delegate?e._delegate:e}function Le(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Me(e){return function(e){if(Array.isArray(e))return a(e)}(e)||Le(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Fe(a,r,i,o,u,"next",e)}function u(e){Fe(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Ue=n(757),je=n.n(Ue),Be=function(){function e(t,n,r){H(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return $(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),qe="[DEFAULT]",ze=function(){function e(t,n){H(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return $(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new he;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:qe})}catch(c){}var t,n=J(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ve(Ue.mark((function e(){var t;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Me(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Me(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=J(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===qe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return this.component?this.component.multipleInstances?e:qe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ke,Ge,We=function(){function e(t){H(this,e),this.name=t,this.providers=new Map}return $(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ze(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),He=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ge||(Ge={}));var Qe={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},$e=Ge.INFO,Je=(W(Ke={},Ge.DEBUG,"log"),W(Ke,Ge.VERBOSE,"log"),W(Ke,Ge.INFO,"info"),W(Ke,Ge.WARN,"warn"),W(Ke,Ge.ERROR,"error"),Ke),Ye=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Je[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Xe=function(){function e(t){H(this,e),this.name=t,this._logLevel=$e,this._logHandler=Ye,this._userLogHandler=null,He.push(this)}return $(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ge))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Qe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ge.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ge.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.INFO].concat(t)),this._logHandler.apply(this,[this,Ge.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.WARN].concat(t)),this._logHandler.apply(this,[this,Ge.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.ERROR].concat(t)),this._logHandler.apply(this,[this,Ge.ERROR].concat(t))}}]),e}();function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt,nt;var rt=new WeakMap,it=new WeakMap,at=new WeakMap,ot=new WeakMap,ut=new WeakMap;var st={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return it.get(e);if("objectStoreNames"===t)return e.objectStoreNames||at.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ft(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ct(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(nt||(nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ht(this),n),ft(rt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ft(e.apply(ht(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ht(this),t].concat(r));return at.set(a,t.sort?t.sort():[t]),ft(a)}}function lt(e){return"function"===typeof e?ct(e):(e instanceof IDBTransaction&&function(e){if(!it.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));it.set(e,t)}}(e),t=e,(tt||(tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,st):e);var t}function ft(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ft(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&rt.set(t,e)})).catch((function(){})),ut.set(t,e),t}(e);if(ot.has(e))return ot.get(e);var t=lt(e);return t!==e&&(ot.set(e,t),ut.set(t,e)),t}var ht=function(e){return ut.get(e)};var dt,pt,vt=["get","getKey","getAll","getAllKeys","count"],mt=["put","add","delete","clear"],yt=new Map;function gt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(yt.get(t))return yt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=mt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||vt.includes(n))){var a=function(){var e=Ve(Ue.mark((function e(t){var a,o,u,s,c,l,f=arguments;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return yt.set(t,a),a}}}st=function(e){return et(et({},e),{},{get:function(t,n,r){return gt(t,n)||e.get(t,n,r)},has:function(t,n){return!!gt(t,n)||e.has(t,n)}})}(st);var kt=function(){function e(t){H(this,e),this.container=t}return $(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var wt="@firebase/app",bt="0.7.30",xt=new Xe("@firebase/app"),_t="[DEFAULT]",It=(W(dt={},wt,"fire-core"),W(dt,"@firebase/app-compat","fire-core-compat"),W(dt,"@firebase/analytics","fire-analytics"),W(dt,"@firebase/analytics-compat","fire-analytics-compat"),W(dt,"@firebase/app-check","fire-app-check"),W(dt,"@firebase/app-check-compat","fire-app-check-compat"),W(dt,"@firebase/auth","fire-auth"),W(dt,"@firebase/auth-compat","fire-auth-compat"),W(dt,"@firebase/database","fire-rtdb"),W(dt,"@firebase/database-compat","fire-rtdb-compat"),W(dt,"@firebase/functions","fire-fn"),W(dt,"@firebase/functions-compat","fire-fn-compat"),W(dt,"@firebase/installations","fire-iid"),W(dt,"@firebase/installations-compat","fire-iid-compat"),W(dt,"@firebase/messaging","fire-fcm"),W(dt,"@firebase/messaging-compat","fire-fcm-compat"),W(dt,"@firebase/performance","fire-perf"),W(dt,"@firebase/performance-compat","fire-perf-compat"),W(dt,"@firebase/remote-config","fire-rc"),W(dt,"@firebase/remote-config-compat","fire-rc-compat"),W(dt,"@firebase/storage","fire-gcs"),W(dt,"@firebase/storage-compat","fire-gcs-compat"),W(dt,"@firebase/firestore","fire-fst"),W(dt,"@firebase/firestore-compat","fire-fst-compat"),W(dt,"fire-js","fire-js"),W(dt,"firebase","fire-js-all"),dt),Et=new Map,Tt=new Map;function St(e,t){try{e.container.addComponent(t)}catch(n){xt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ct(e,t){e.container.addOrOverwriteComponent(t)}function Nt(e){var t=e.name;if(Tt.has(t))return xt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tt.set(t,e);var n,r=J(Et.values());try{for(r.s();!(n=r.n()).done;){St(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function At(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_t;At(e,t).clearInstance(n)}function Ot(){Tt.clear()}var Rt=(W(pt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),W(pt,"bad-app-name","Illegal App name: '{$appName}"),W(pt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),W(pt,"app-deleted","Firebase App named '{$appName}' already deleted"),W(pt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),W(pt,"invalid-log-argument","First argument to `onLog` must be null or a function."),W(pt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),W(pt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),W(pt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),W(pt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),pt),Pt=new xe("app","Firebase",Rt),Lt=function(){function e(t,n,r){var i=this;H(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Be("app",(function(){return i}),"PUBLIC"))}return $(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}]),e}(),Mt="9.9.2";function Ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:_t,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Pt.create("bad-app-name",{appName:String(i)});var a=Et.get(i);if(a){if(Te(e,a.options)&&Te(r,a.config))return a;throw Pt.create("duplicate-app",{appName:i})}var o,u=new We(i),s=J(Tt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Lt(e,r,u);return Et.set(i,l),l}function Vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=Et.get(e);if(!t)throw Pt.create("no-app",{appName:e});return t}function Ut(){return Array.from(Et.values())}function jt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Ve(Ue.mark((function e(t){var n;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Et.has(n)){e.next=6;break}return Et.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e,t,n){var r,i=null!==(r=It[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void xt.warn(u.join(" "))}Nt(new Be("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function zt(e,t){if(null!==e&&"function"!==typeof e)throw Pt.create("invalid-log-argument");!function(e,t){var n,r=J(He);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Qe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ge[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Kt(e){var t;t=e,He.forEach((function(e){e.setLogLevel(t)}))}var Gt="firebase-heartbeat-store",Wt=null;function Ht(){return Wt||(Wt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ft(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ft(u.result),e.oldVersion,e.newVersion,ft(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Gt)}}).catch((function(e){throw Pt.create("idb-open",{originalErrorMessage:e.message})}))),Wt}function Qt(e){return $t.apply(this,arguments)}function $t(){return $t=Ve(Ue.mark((function e(t){var n,r,i;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ht();case 3:return r=e.sent,e.abrupt("return",r.transaction(Gt).objectStore(Gt).get(Xt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof be?xt.warn(e.t0.message):(i=Pt.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),xt.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),$t.apply(this,arguments)}function Jt(e,t){return Yt.apply(this,arguments)}function Yt(){return Yt=Ve(Ue.mark((function e(t,n){var r,i,a,o,u;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ht();case 3:return i=e.sent,a=i.transaction(Gt,"readwrite"),o=a.objectStore(Gt),e.next=8,o.put(n,Xt(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof be?xt.warn(e.t0.message):(u=Pt.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),xt.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Yt.apply(this,arguments)}function Xt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Zt=function(){function e(t){var n=this;H(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new an(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return $(e,[{key:"triggerHeartbeat",value:function(){var e=Ve(Ue.mark((function e(){var t,n,r;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=en(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ve(Ue.mark((function e(){var t,n,r,i,a;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=en(),n=tn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ce(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function en(){return(new Date).toISOString().substring(0,10)}function tn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=J(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),on(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),on(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var nn,rn,an=function(){function e(t){H(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return $(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ve(Ue.mark((function e(){return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(we()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ve(Ue.mark((function e(){var t;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Qt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ve(Ue.mark((function e(t){var n,r;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Jt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ve(Ue.mark((function e(t){var n,r;return Ue.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Jt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Me(r.heartbeats),Me(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function on(e){return ce(JSON.stringify({version:2,heartbeats:e})).length}nn="",Nt(new Be("platform-logger",(function(e){return new kt(e)}),"PRIVATE")),Nt(new Be("heartbeat",(function(e){return new Zt(e)}),"PRIVATE")),qt(wt,bt,nn),qt(wt,bt,"esm2017"),qt("fire-js","");var un=function(){function e(t,n){var r=this;H(this,e),this._delegate=t,this.firebase=n,St(t,new Be("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return $(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),jt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){St(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ct(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),sn=(W(rn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),W(rn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),rn),cn=new xe("app-compat","Firebase",sn);var ln=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ft(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ee(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:qt,setLogLevel:Kt,onLog:zt,apps:null,SDK_VERSION:Mt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Nt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw cn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&fe(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ee(n,e=e||_t))throw cn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(un);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){fe(n,e)},createSubscribe:De,ErrorFactory:xe,deepExtend:fe}),n}(),fn=new Xe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){fn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var hn=self.firebase.SDK_VERSION;hn&&hn.indexOf("LITE")>=0&&fn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var dn=ln;!function(e){qt("@firebase/app-compat","0.1.31",e)}();function pn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}function vn(){return vn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=pn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},vn.apply(this,arguments)}dn.registerVersion("firebase","9.9.2","app-compat");function mn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var yn;Object.create;var gn="facebook.com",kn="github.com",wn="google.com",bn="password",xn="twitter.com",_n="EMAIL_SIGNIN",In="PASSWORD_RESET",En="RECOVER_EMAIL",Tn="REVERT_SECOND_FACTOR_ADDITION",Sn="VERIFY_AND_CHANGE_EMAIL",Cn="VERIFY_EMAIL";function Nn(){return W({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var An=function(){var e;return W(e={},"admin-restricted-operation","This operation is restricted to administrators only."),W(e,"argument-error",""),W(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),W(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),W(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),W(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),W(e,"cordova-not-ready","Cordova framework is not ready."),W(e,"cors-unsupported","This browser is not supported."),W(e,"credential-already-in-use","This credential is already associated with a different user account."),W(e,"custom-token-mismatch","The custom token corresponds to a different audience."),W(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),W(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),W(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),W(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),W(e,"email-already-in-use","The email address is already in use by another account."),W(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),W(e,"expired-action-code","The action code has expired."),W(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),W(e,"internal-error","An internal AuthError has occurred."),W(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),W(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),W(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),W(e,"invalid-auth-event","An internal AuthError has occurred."),W(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),W(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),W(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),W(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),W(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),W(e,"invalid-email","The email address is badly formatted."),W(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),W(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),W(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),W(e,"invalid-credential","The supplied auth credential is malformed or has expired."),W(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),W(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),W(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),W(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),W(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),W(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),W(e,"wrong-password","The password is invalid or the user does not have a password."),W(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),W(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),W(e,"invalid-provider-id","The specified provider ID is invalid."),W(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),W(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),W(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),W(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),W(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),W(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),W(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),W(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),W(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),W(e,"missing-continue-uri","A continue URL must be provided in the request."),W(e,"missing-iframe-start","An internal AuthError has occurred."),W(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),W(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),W(e,"missing-multi-factor-info","No second factor identifier is provided."),W(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),W(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),W(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),W(e,"app-deleted","This instance of FirebaseApp has been deleted."),W(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),W(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),W(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),W(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),W(e,"no-auth-event","An internal AuthError has occurred."),W(e,"no-such-provider","User was not linked to an account with the given provider."),W(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),W(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),W(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),W(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),W(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),W(e,"provider-already-linked","User can only be linked to one identity for the given provider."),W(e,"quota-exceeded","The project's quota for this operation has been exceeded."),W(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),W(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),W(e,"rejected-credential","The request contains malformed or mismatching credentials."),W(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),W(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),W(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),W(e,"timeout","The operation has timed out."),W(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),W(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),W(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),W(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),W(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),W(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),W(e,"unverified-email","The operation requires a verified email."),W(e,"user-cancelled","The user did not grant your application the permissions it requested."),W(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),W(e,"user-disabled","The user account has been disabled by an administrator."),W(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),W(e,"user-signed-out",""),W(e,"weak-password","The password must be 6 characters long or more."),W(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),W(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Dn=Nn,On=new xe("auth","Firebase",Nn()),Rn=new Xe("@firebase/auth");function Pn(e){if(Rn.logLevel<=Ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rn.error.apply(Rn,["Auth (".concat(Mt,"): ").concat(e)].concat(n))}}function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Un.apply(void 0,[e].concat(n))}function Mn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Un.apply(void 0,[e].concat(n))}function Fn(e,t,n){var r=Object.assign(Object.assign({},Dn()),W({},t,n));return new xe("auth","Firebase",r).create(t,{appName:e.name})}function Vn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ln(e,"argument-error"),Fn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Un(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Me(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Me(o)))}return On.create.apply(On,[e].concat(n))}function jn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Un.apply(void 0,[t].concat(r))}}function Bn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Pn(t),new Error(t)}function qn(e,t){e||Bn(t)}var zn=new Map;function Kn(e){qn(e instanceof Function,"Expected a class definition");var t=zn.get(e);return t?(qn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,zn.set(e,t),t)}function Gn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Wn(){return"http:"===Hn()||"https:"===Hn()}function Hn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Qn=function(){function e(t,n){H(this,e),this.shortDelay=t,this.longDelay=n,qn(n>t,"Short delay should be less than long delay!"),this.isMobile=ve()||ge()}return $(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Wn()||ye()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function $n(e,t){qn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Jn=function(){function e(){H(this,e)}return $(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Yn=(W(yn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),W(yn,"MISSING_CUSTOM_TOKEN","internal-error"),W(yn,"INVALID_IDENTIFIER","invalid-email"),W(yn,"MISSING_CONTINUE_URI","internal-error"),W(yn,"INVALID_PASSWORD","wrong-password"),W(yn,"MISSING_PASSWORD","internal-error"),W(yn,"EMAIL_EXISTS","email-already-in-use"),W(yn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),W(yn,"INVALID_IDP_RESPONSE","invalid-credential"),W(yn,"INVALID_PENDING_TOKEN","invalid-credential"),W(yn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),W(yn,"MISSING_REQ_TYPE","internal-error"),W(yn,"EMAIL_NOT_FOUND","user-not-found"),W(yn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),W(yn,"EXPIRED_OOB_CODE","expired-action-code"),W(yn,"INVALID_OOB_CODE","invalid-action-code"),W(yn,"MISSING_OOB_CODE","internal-error"),W(yn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),W(yn,"INVALID_ID_TOKEN","invalid-user-token"),W(yn,"TOKEN_EXPIRED","user-token-expired"),W(yn,"USER_NOT_FOUND","user-token-expired"),W(yn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),W(yn,"INVALID_CODE","invalid-verification-code"),W(yn,"INVALID_SESSION_INFO","invalid-verification-id"),W(yn,"INVALID_TEMPORARY_PROOF","invalid-credential"),W(yn,"MISSING_SESSION_INFO","missing-verification-id"),W(yn,"SESSION_EXPIRED","code-expired"),W(yn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),W(yn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),W(yn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),W(yn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),W(yn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),W(yn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),W(yn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),W(yn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),W(yn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),W(yn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),W(yn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),yn),Xn=new Qn(3e4,6e4);function Zn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function er(e,t,n,r){return tr.apply(this,arguments)}function tr(){return tr=Ve(je().mark((function e(t,n,r,i){var a,o=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",nr(t,a,Ve(je().mark((function e(){var a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ce(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Jn.fetch()(or(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),tr.apply(this,arguments)}function nr(e,t,n){return rr.apply(this,arguments)}function rr(){return(rr=Ve(je().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Yn),n),e.prev=2,a=new ur(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw sr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw sr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw sr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw sr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Fn(t,p,d);case 34:Ln(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof be)){e.next=41;break}throw e.t0;case 41:Ln(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function ir(e,t,n,r){return ar.apply(this,arguments)}function ar(){return ar=Ve(je().mark((function e(t,n,r,i){var a,o,u=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,er(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ln(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ar.apply(this,arguments)}function or(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?$n(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ur=function(){function e(t){var n=this;H(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Mn(n.auth,"network-request-failed"))}),Xn.get())}))}return $(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function sr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Mn(e,t,r);return i.customData._tokenResponse=n,i}function cr(e,t){return lr.apply(this,arguments)}function lr(){return(lr=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fr(e,t){return hr.apply(this,arguments)}function hr(){return(hr=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(e,t){return pr.apply(this,arguments)}function pr(){return(pr=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function mr(){return mr=Ve(je().mark((function e(t){var n,r,i,a,o,u,s=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Pe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,jn((a=gr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:vr(yr(a.auth_time)),issuedAtTime:vr(yr(a.iat)),expirationTime:vr(yr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),mr.apply(this,arguments)}function yr(e){return 1e3*Number(e)}function gr(e){var t,n=s(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Pn("JWT malformed, contained fewer than 3 sections"),null;try{var o=le(i);return o?JSON.parse(o):(Pn("Failed to decode base64 JWT payload"),null)}catch(u){return Pn("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function kr(e,t){return wr.apply(this,arguments)}function wr(){return wr=Ve(je().mark((function e(t,n){var r=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof be&&br(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),wr.apply(this,arguments)}function br(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var xr=function(){function e(t){H(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return $(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),_r=function(){function e(t,n){H(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return $(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=vr(this.lastLoginAt),this.creationTime=vr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ir(e){return Er.apply(this,arguments)}function Er(){return Er=Ve(je().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,kr(t,dr(r,{idToken:i}));case 6:jn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Cr(o.providerUserInfo):[],s=Sr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new _r(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Tr(){return(Tr=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pe(t),e.next=3,Ir(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Me(n),Me(t))}function Cr(e){return e.map((function(e){var t=e.providerId,n=mn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Nr(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t,{},Ve(je().mark((function e(){var r,i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ce({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=or(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Jn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dr=function(){function e(){H(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return $(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){jn(e.idToken,"internal-error"),jn("undefined"!==typeof e.idToken,"internal-error"),jn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=gr(e);return jn(t,"internal-error"),jn("undefined"!==typeof t.exp,"internal-error"),jn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ve(je().mark((function e(t){var n,r=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],jn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ve(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Bn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(jn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(jn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(jn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Or(e,t){jn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Rr=function(){function e(t){H(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=mn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Me(a.providerData):[],this.metadata=new _r(a.createdAt||void 0,a.lastLoginAt||void 0)}return $(e,[{key:"getIdToken",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(jn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return mr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Tr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(jn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){jn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ve(je().mark((function e(t){var n,r,i=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ir(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,kr(this,cr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;jn(k&&_,t,"internal-error");var I=Dr.fromJSON(this.name,_);jn("string"===typeof k,t,"internal-error"),Or(f,t.name),Or(h,t.name),jn("boolean"===typeof w,t,"internal-error"),jn("boolean"===typeof b,t,"internal-error"),Or(d,t.name),Or(p,t.name),Or(v,t.name),Or(m,t.name),Or(y,t.name),Or(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Ve(je().mark((function t(n,r){var i,a,o,u=arguments;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Dr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ir(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Pr=function(){function e(){H(this,e),this.type="NONE",this.storage={}}return $(e,[{key:"_isAvailable",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Pr.type="NONE";var Lr=Pr;function Mr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Fr=function(){function e(t,n,r){H(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Mr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Mr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return $(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Rr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ve(je().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Kn(Lr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Kn(Lr),u=Mr(i,n.config.apiKey,n.name),s=null,c=J(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Rr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Vr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ur(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Kr(t))return"Blackberry";if(Gr(t))return"Webos";if(jr(t))return"Safari";if((t.includes("chrome/")||Br(t))&&!t.includes("edge/"))return"Chrome";if(zr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/firefox\//i.test(e)}function jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/crios\//i.test(e)}function qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/iemobile/i.test(e)}function zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/android/i.test(e)}function Kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/blackberry/i.test(e)}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/webos/i.test(e)}function Wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Hr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return Wr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Qr(){return ke()&&10===document.documentMode}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return Wr(e)||zr(e)||Gr(e)||Kr(e)||/windows phone/i.test(e)||qr(e)}function Jr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Vr(pe());break;case"Worker":t="".concat(Vr(pe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Mt,"/").concat(r)}var Yr=function(){function e(t){H(this,e),this.auth=t,this.queue=[]}return $(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ve(je().mark((function e(t){var n,r,i,a,o,u,s,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=J(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=J(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xr=function(){function e(t,n,r){H(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ei(this),this.idTokenSubscription=new ei(this),this.beforeStateQueue=new Yr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=On,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return $(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Kn(t)),this._initializationPromise=this.queue(Ve(je().mark((function r(){var i,a;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Fr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ve(je().mark((function e(t){var n,r,i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return jn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ir(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Pe(t):null)&&jn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ve(je().mark((function e(t){var n,r=this,i=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&jn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ve(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Kn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new xe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return jn(n=t&&Kn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Fr.create(this,[Kn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ve(je().mark((function e(t){var n=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return jn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return jn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ve(je().mark((function e(){var t,n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=W({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Zr(e){return Pe(e)}var ei=function(){function e(t){var n=this;H(this,e),this.auth=t,this.observer=null,this.addObserver=De((function(e){return n.observer=e}))}return $(e,[{key:"next",get:function(){return jn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ti(e,t,n){var r=Zr(e);jn(r._canInitEmulator,r,"emulator-config-failed"),jn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ni(t),o=function(e){var t=ni(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ri(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:ri(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ni(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ri(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ii=function(){function e(t,n){H(this,e),this.providerId=t,this.signInMethod=n}return $(e,[{key:"toJSON",value:function(){return Bn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Bn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Bn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Bn("not implemented")}}]),e}();function ai(e,t){return oi.apply(this,arguments)}function oi(){return(oi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:resetPassword",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ui(e,t){return si.apply(this,arguments)}function si(){return(si=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return(li=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fi(e,t){return hi.apply(this,arguments)}function hi(){return(hi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir(t,"POST","/v1/accounts:signInWithPassword",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function di(e,t){return pi.apply(this,arguments)}function pi(){return(pi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:sendOobCode",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yi(e,t){return gi.apply(this,arguments)}function gi(){return(gi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ki(e,t){return wi.apply(this,arguments)}function wi(){return(wi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bi(e,t){return xi.apply(this,arguments)}function xi(){return(xi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _i(e,t){return Ii.apply(this,arguments)}function Ii(){return(Ii=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return(Ti=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Si=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return H(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return $(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",fi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",_i(t,{email:this._email,oobCode:this._password}));case 5:Ln(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ui(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ei(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ln(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ii);function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return(Ni=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir(t,"POST","/v1/accounts:signInWithIdp",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ai=function(e){Z(n,e);var t=ie(n);function n(){var e;return H(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return $(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ci(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ci(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ci(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ce(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ln("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=mn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ii);function Di(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:sendVerificationCode",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(){return(Ri=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir(t,"POST","/v1/accounts:signInWithPhoneNumber",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(){return(Pi=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir(t,"POST","/v1/accounts:signInWithPhoneNumber",Zn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw sr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Li=W({},"USER_NOT_FOUND","user-not-found");function Mi(){return(Mi=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ir(t,"POST","/v1/accounts:signInWithPhoneNumber",Zn(t,r),Li));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fi=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this,"phone","phone")).params=e,r}return $(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ri.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Pi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Mi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ii);var Vi=function(){function e(t){var n,r,i,a,o,u;H(this,e);var s=Ne(Ae(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);jn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return $(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ne(Ae(e)).link,n=t?Ne(Ae(t)).deep_link_id:null,r=Ne(Ae(e)).deep_link_id;return(r?Ne(Ae(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Ui=function(){function e(){H(this,e),this.providerId=e.PROVIDER_ID}return $(e,null,[{key:"credential",value:function(e,t){return Si._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Vi.parseLink(t);return jn(n,"argument-error"),Si._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ui.PROVIDER_ID="password",Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ji=function(){function e(t){H(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return $(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Bi=function(e){Z(n,e);var t=ie(n);function n(){var e;return H(this,n),(e=t.apply(this,arguments)).scopes=[],e}return $(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Me(this.scopes)}}]),n}(ji),qi=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return jn(e.idToken||e.accessToken,"argument-error"),Ai._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return jn("providerId"in t&&"signInMethod"in t,"argument-error"),Ai._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Bi),zi=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.call(this,"facebook.com")}return $(n,null,[{key:"credential",value:function(e){return Ai._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Bi);zi.FACEBOOK_SIGN_IN_METHOD="facebook.com",zi.PROVIDER_ID="facebook.com";var Ki=function(e){Z(n,e);var t=ie(n);function n(){var e;return H(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return $(n,null,[{key:"credential",value:function(e,t){return Ai._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Bi);Ki.GOOGLE_SIGN_IN_METHOD="google.com",Ki.PROVIDER_ID="google.com";var Gi=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.call(this,"github.com")}return $(n,null,[{key:"credential",value:function(e){return Ai._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Bi);Gi.GITHUB_SIGN_IN_METHOD="github.com",Gi.PROVIDER_ID="github.com";var Wi=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return $(n,[{key:"_getIdTokenResponse",value:function(e){return Ci(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ci(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ci(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ii),Hi=function(e){Z(n,e);var t=ie(n);function n(e){return H(this,n),jn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return $(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Wi.fromJSON(e);return jn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Wi._create(r,n)}catch(i){return null}}}]),n}(ji),Qi=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.call(this,"twitter.com")}return $(n,null,[{key:"credential",value:function(e,t){return Ai._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Bi);function $i(e,t){return Ji.apply(this,arguments)}function Ji(){return(Ji=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir(t,"POST","/v1/accounts:signUp",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Qi.TWITTER_SIGN_IN_METHOD="twitter.com",Qi.PROVIDER_ID="twitter.com";var Yi=function(){function e(t){H(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return $(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ve(je().mark((function t(n,r,i){var a,o,u,s,c=arguments;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Rr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Xi(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ve(je().mark((function t(n,r,i){var a;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Xi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Xi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Zi(){return Zi=Ve(je().mark((function e(t){var n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Yi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,$i(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Yi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}var ea=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a){var o,u;return H(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return $(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(be);function ta(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ea._fromErrorAndOperation(e,n,t,r);throw n}))}function na(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=Ve(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pe(t),e.next=3,ua(!0,r,n);case 3:return e.t0=fr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=na(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=Ve(je().mark((function e(t,n){var r,i,a=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=kr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Yi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function ua(e,t,n){return sa.apply(this,arguments)}function sa(){return(sa=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(n);case 2:i=na(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",jn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return la=Ve(je().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,kr(t,ta(a,o,n,t),r);case 6:return jn((u=e.sent).idToken,a,"internal-error"),jn(s=gr(u.idToken),a,"internal-error"),c=s.sub,jn(t.uid===c,a,"user-mismatch"),e.abrupt("return",Yi._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Ln(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),la.apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=Ve(je().mark((function e(t,n){var r,i,a,o,u=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ta(t,i,n);case 4:return a=e.sent,e.next=7,Yi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(e,t){return pa.apply(this,arguments)}function pa(){return(pa=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(Zr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(e,t){return ma.apply(this,arguments)}function ma(){return(ma=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pe(t),e.next=3,ua(!1,r,n.providerId);case 3:return e.abrupt("return",aa(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ya(e,t){return ga.apply(this,arguments)}function ga(){return(ga=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(Pe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(e,t){return wa.apply(this,arguments)}function wa(){return(wa=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir(t,"POST","/v1/accounts:signInWithCustomToken",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(){return(ba=Ve(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zr(t),e.next=3,ka(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Yi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xa=function(){function e(t,n){H(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return $(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?_a._fromServerResponse(e,t):Ln(e,"internal-error")}}]),e}(),_a=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return $(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(xa);function Ia(e,t,n){var r;jn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),jn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(jn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(jn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ea(){return(Ea=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pe(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ia(i,a,r),e.next=5,yi(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(){return(Ta=Ve(je().mark((function e(t,n,r){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ai(Pe(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(){return(Sa=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ci(Pe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t){return Na.apply(this,arguments)}function Na(){return(Na=Ve(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pe(t),e.next=3,ai(r,{oobCode:n});case 3:i=e.sent,jn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return jn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:jn(i.mfaInfo,r,"internal-error");case 13:jn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=xa._fromServerResponse(Zr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(){return(Aa=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca(Pe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t,n){return Oa.apply(this,arguments)}function Oa(){return(Oa=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zr(t),e.next=3,$i(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Yi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(){return(Ra=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pe(t),a={requestType:"EMAIL_SIGNIN",email:n},jn(r.handleCodeInApp,i,"argument-error"),r&&Ia(i,a,r),e.next=6,ki(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(){return(Pa=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pe(t),jn((a=Ui.credentialWithLink(n,r||Gn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",da(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e,t){return Ma.apply(this,arguments)}function Ma(){return(Ma=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:createAuthUri",Zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(){return(Fa=Ve(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wn()?Gn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,La(Pe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(){return(Va=Ve(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ia(r.auth,a,n),e.next=8,vi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ua(){return(Ua=Ve(je().mark((function e(t,n,r){var i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ia(i.auth,o,r),e.next=8,bi(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ja(e,t){return Ba.apply(this,arguments)}function Ba(){return(Ba=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qa(){return(qa=Ve(je().mark((function e(t,n){var r,i,a,o,u,s,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Pe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,kr(a,ja(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(e,t,n){return Ka.apply(this,arguments)}function Ka(){return(Ka=Ve(je().mark((function e(t,n,r){var i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,kr(t,ui(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ga=$((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};H(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Wa=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a){var o;return H(this,n),(o=t.call(this,e,r,i)).username=a,o}return $(n)}(Ga),Ha=function(e){Z(n,e);var t=ie(n);function n(e,r){return H(this,n),t.call(this,e,"facebook.com",r)}return $(n)}(Ga),Qa=function(e){Z(n,e);var t=ie(n);function n(e,r){return H(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return $(n)}(Wa),$a=function(e){Z(n,e);var t=ie(n);function n(e,r){return H(this,n),t.call(this,e,"google.com",r)}return $(n)}(Ga),Ja=function(e){Z(n,e);var t=ie(n);function n(e,r,i){return H(this,n),t.call(this,e,"twitter.com",r,i)}return $(n)}(Wa);function Ya(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=gr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ga(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ha(a,i);case"github.com":return new Qa(a,i);case"google.com":return new $a(a,i);case"twitter.com":return new Ja(a,i,e.screenName||null);case"custom":case"anonymous":return new Ga(a,null);default:return new Ga(a,r,i)}}(n)}var Xa=function(){function e(t,n){H(this,e),this.type=t,this.credential=n}return $(e,[{key:"toJSON",value:function(){return{multiFactorSession:W({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Za=function(){function e(t,n,r){H(this,e),this.session=t,this.hints=n,this.signInResolver=r}return $(e,[{key:"resolveSignIn",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Zr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return xa._fromServerResponse(r,e)}));jn(i.mfaPendingCredential,r,"internal-error");var o=Xa._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ve(je().mark((function e(t){var a,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Yi._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return jn(n.user,r,"internal-error"),e.abrupt("return",Yi._forOperation(n.user,n.operationType,u));case 17:Ln(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function eo(e,t){return er(e,"POST","/v2/accounts/mfaEnrollment:start",Zn(e,t))}var to=function(){function e(t){var n=this;H(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return xa._fromServerResponse(t.auth,e)})))}))}return $(e,[{key:"getSession",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Xa,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ve(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,kr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ve(je().mark((function e(t){var n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,kr(this.user,er(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Zn(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),no=new WeakMap;var ro="__sak",io=function(){function e(t,n){H(this,e),this.storageRetriever=t,this.type=n}return $(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ro,"1"),this.storage.removeItem(ro),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ao=function(e){Z(n,e);var t=ie(n);function n(){var e;return H(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=pe();return jr(e)||Wr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=$r(),e._shouldAllowMigration=!0,e}return $(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Qr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ve(je().mark((function e(t,r){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(ee(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ve(je().mark((function e(t){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(ee(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(ee(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(io);ao.type="LOCAL";var oo=ao,uo=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return $(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(io);uo.type="SESSION";var so=uo;function co(e){return Promise.all(e.map(function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var lo=function(){function e(t){H(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return $(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ve(je().mark((function e(t){var n,r,i,a,o,u,s,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,co(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function fo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}lo.receivers=[];var ho=function(){function e(t){H(this,e),this.target=t,this.handlers=new Set}return $(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ve(je().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=fo("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function po(){return window}function vo(){return"undefined"!==typeof po().WorkerGlobalScope&&"function"===typeof po().importScripts}function mo(){return yo.apply(this,arguments)}function yo(){return(yo=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function go(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ko="firebaseLocalStorageDb",wo="firebaseLocalStorage",bo="fbase_key",xo=function(){function e(t){H(this,e),this.request=t}return $(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function _o(e,t){return e.transaction([wo],t?"readwrite":"readonly").objectStore(wo)}function Io(){var e=indexedDB.deleteDatabase(ko);return new xo(e).toPromise()}function Eo(){var e=indexedDB.open(ko,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(wo,{keyPath:bo})}catch(r){n(r)}})),e.addEventListener("success",Ve(je().mark((function n(){var r;return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(wo)){n.next=12;break}return r.close(),n.next=5,Io();case 5:return n.t0=t,n.next=8,Eo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function To(e,t,n){return So.apply(this,arguments)}function So(){return So=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_o(t,!0).put((W(i={},bo,n),W(i,"value",r),i)),e.abrupt("return",new xo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),So.apply(this,arguments)}function Co(e,t){return No.apply(this,arguments)}function No(){return No=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t,!1).get(n),e.next=3,new xo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ao(e,t){var n=_o(e,!0).delete(t);return new xo(n).toPromise()}var Do=function(){function e(){H(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return $(e,[{key:"_openDb",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Eo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ve(je().mark((function e(){var t=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=lo._getInstance(vo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ve(je().mark((function e(n,r){var i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ve(je().mark((function e(){var t,n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ho(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&go()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Eo();case 5:return t=e.sent,e.next=8,To(t,ro,"1");case 8:return e.next=10,Ao(t,ro);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ve(je().mark((function e(t,n){var r=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return To(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Co(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ve(je().mark((function e(t){var n=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ao(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ve(je().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=_o(e,!1).getAll();return new xo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=J(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Do.type="LOCAL";var Oo=Do;function Ro(e,t){return er(e,"POST","/v2/accounts/mfaSignIn:start",Zn(e,t))}function Po(e){return Lo.apply(this,arguments)}function Lo(){return(Lo=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Mn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Fo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Vo=1e12,Uo=function(){function e(t){H(this,e),this.auth=t,this.counter=Vo,this._widgets=new Map}return $(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new jo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Vo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Vo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Vo,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),jo=function(){function e(t,n,r){var i=this;H(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;jn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return $(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Bo=Fo("rcb"),qo=new Qn(3e4,6e4),zo="https://www.google.com/recaptcha/api.js?",Ko=function(){function e(){var t;H(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=po().grecaptcha)||void 0===t?void 0:t.render)}return $(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return jn(Go(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(po().grecaptcha):new Promise((function(r,i){var a=po().setTimeout((function(){i(Mn(e,"network-request-failed"))}),qo.get());po()[Bo]=function(){po().clearTimeout(a),delete po()[Bo];var o=po().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Mn(e,"internal-error"))},Mo("".concat(zo,"?").concat(Ce({onload:Bo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Mn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=po().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Go(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Wo=function(){function e(){H(this,e)}return $(e,[{key:"load",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ho="recaptcha",Qo={theme:"light",type:"image"},$o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Qo),r=arguments.length>2?arguments[2]:void 0;H(this,e),this.parameters=n,this.type=Ho,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zr(r),this.isInvisible="invisible"===this.parameters.size,jn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;jn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wo:new Ko,this.validateStartingState()}return $(e,[{key:"verify",value:function(){var e=Ve(je().mark((function e(){var t,n,r,i=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){jn(!this.parameters.sitekey,this.auth,"argument-error"),jn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),jn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=po()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){jn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ve(je().mark((function e(){var t,n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn(Wn()&&!vo(),this.auth,"internal-error"),e.next=3,Jo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Po(this.auth);case 8:jn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return jn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Jo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Yo=function(){function e(t,n){H(this,e),this.verificationId=t,this.onConfirmation=n}return $(e,[{key:"confirm",value:function(e){var t=Fi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Xo(){return(Xo=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zr(t),e.next=3,nu(i,n,Pe(r));case 3:return a=e.sent,e.abrupt("return",new Yo(a,(function(e){return da(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t,n){return eu.apply(this,arguments)}function eu(){return(eu=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pe(t),e.next=3,ua(!1,i,"phone");case 3:return e.next=5,nu(i.auth,n,Pe(r));case 5:return a=e.sent,e.abrupt("return",new Yo(a,(function(e){return va(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tu(){return(tu=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pe(t),e.next=3,nu(i.auth,n,Pe(r));case 3:return a=e.sent,e.abrupt("return",new Yo(a,(function(e){return ya(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(e,t,n){return ru.apply(this,arguments)}function ru(){return ru=Ve(je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,jn("string"===typeof a,t,"argument-error"),jn(r.type===Ho,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return jn("enroll"===u.type,t,"internal-error"),e.next=13,eo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return jn("signin"===u.type,t,"internal-error"),jn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ro(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Di(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ru.apply(this,arguments)}function iu(){return(iu=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa(Pe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var au=function(){function e(t){H(this,e),this.providerId=e.PROVIDER_ID,this.auth=Zr(t)}return $(e,[{key:"verifyPhoneNumber",value:function(e,t){return nu(this.auth,e,Pe(t))}}],[{key:"credential",value:function(e,t){return Fi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Fi._fromTokenResponse(n,r):null}}]),e}();function ou(e,t){return t?Kn(t):(jn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}au.PROVIDER_ID="phone",au.PHONE_SIGN_IN_METHOD="phone";var uu=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this,"custom","custom")).params=e,r}return $(n,[{key:"_getIdTokenResponse",value:function(e){return Ci(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ci(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ci(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ii);function su(e){return fa(e.auth,new uu(e),e.bypassAuthState)}function cu(e){var t=e.auth,n=e.user;return jn(n,t,"internal-error"),ca(n,new uu(e),e.bypassAuthState)}function lu(e){return fu.apply(this,arguments)}function fu(){return(fu=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,jn(r=t.user,n,"internal-error"),e.abrupt("return",aa(r,new uu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];H(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return $(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ve(je().mark((function t(n,r){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ve(je().mark((function e(t){var n,r,i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return su;case"linkViaPopup":case"linkViaRedirect":return lu;case"reauthViaPopup":case"reauthViaRedirect":return cu;default:Ln(this.auth,"internal-error")}}},{key:"resolve",value:function(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),du=new Qn(2e3,1e4);function pu(e,t,n){return vu.apply(this,arguments)}function vu(){return(vu=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zr(t),Vn(t,n,ji),a=ou(i,r),o=new ku(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mu(){return(mu=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vn((i=Pe(t)).auth,n,ji),a=ou(i.auth,r),o=new ku(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yu(e,t,n){return gu.apply(this,arguments)}function gu(){return(gu=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vn((i=Pe(t)).auth,n,ji),a=ou(i.auth,r),o=new ku(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ku=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a,o){var u;return H(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Y(u),u}return $(n,[{key:"executeNotNull",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return jn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ve(je().mark((function e(){var t,n=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn(1===this.filter.length,"Popup operations only handle one event"),t=fo(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Mn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Mn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Mn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,du.get())}()}}]),n}(hu);ku.currentPopupAction=null;var wu=new Map,bu=function(e){Z(n,e);var t=ie(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return H(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return $(n,[{key:"execute",value:function(){var e=Ve(je().mark((function e(){var t,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=wu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,xu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,vn(ee(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:wu.set(this.auth._key(),t);case 21:return this.bypassAuthState||wu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ve(je().mark((function e(t){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",vn(ee(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",vn(ee(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(hu);function xu(e,t){return _u.apply(this,arguments)}function _u(){return(_u=Ve(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cu(n),i=Su(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(e,t){return Eu.apply(this,arguments)}function Eu(){return(Eu=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Su(t)._set(Cu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(e,t){wu.set(e._key(),t)}function Su(e){return Kn(e._redirectPersistence)}function Cu(e){return Mr("pendingRedirect",e.config.apiKey,e.name)}function Nu(e,t,n){return function(e,t,n){return Au.apply(this,arguments)}(e,t,n)}function Au(){return(Au=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zr(t),Vn(t,n,ji),a=ou(i,r),e.next=5,Iu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Du(e,t,n){return function(e,t,n){return Ou.apply(this,arguments)}(e,t,n)}function Ou(){return(Ou=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vn((i=Pe(t)).auth,n,ji),a=ou(i.auth,r),e.next=5,Iu(a,i.auth);case 5:return e.next=7,Uu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(e,t,n){return function(e,t,n){return Pu.apply(this,arguments)}(e,t,n)}function Pu(){return(Pu=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vn((i=Pe(t)).auth,n,ji),a=ou(i.auth,r),e.next=5,ua(!1,i,n.providerId);case 5:return e.next=7,Iu(a,i.auth);case 7:return e.next=9,Uu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t){return Mu.apply(this,arguments)}function Mu(){return(Mu=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zr(t)._initializationPromise;case 2:return e.abrupt("return",Fu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fu(e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=Ve(je().mark((function e(t,n){var r,i,a,o,u,s=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Zr(t),a=ou(i,n),o=new bu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function Uu(e){return ju.apply(this,arguments)}function ju(){return(ju=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fo("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bu=function(){function e(t){H(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return $(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!zu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Mn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(qu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function qu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function zu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ku(e){return Gu.apply(this,arguments)}function Gu(){return Gu=Ve(je().mark((function e(t){var n,r=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",er(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}var Wu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hu=/^https?/;function Qu(){return(Qu=Ve(je().mark((function e(t){var n,r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ku(t);case 4:n=e.sent,r=n.authorizedDomains,i=J(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!$u(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ln(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function $u(e){var t=Gn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Hu.test(r))return!1;if(Wu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ju=new Qn(3e4,6e4);function Yu(){var e=po().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Me(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Xu=null;function Zu(e){return Xu=Xu||function(e){return new Promise((function(t,n){var r,i,a;function o(){Yu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Yu(),n(Mn(e,"network-request-failed"))},timeout:Ju.get()})}if(null===(i=null===(r=po().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=po().gapi)||void 0===a?void 0:a.load)){var u=Fo("iframefcb");return po()[u]=function(){gapi.load?o():n(Mn(e,"network-request-failed"))},Mo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Xu=null,e}))}(e),Xu}var es=new Qn(5e3,15e3),ts={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ns=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rs(e){var t=e.config;jn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?$n(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Mt},i=ns.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ce(r).slice(1))}function is(e){return as.apply(this,arguments)}function as(){return as=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zu(t);case 2:return n=e.sent,jn(r=po().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:rs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ts,dontclear:!0},(function(e){return new Promise(function(){var n=Ve(je().mark((function n(r,i){var a,o,u;return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){po().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Mn(t,"network-request-failed"),o=po().setTimeout((function(){i(a)}),es.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}var os={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},us="_blank",ss="http://localhost",cs=function(){function e(t){H(this,e),this.window=t,this.associatedEvent=null}return $(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ls(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},os),{width:r.toString(),height:i.toString(),top:a,left:o}),l=pe().toLowerCase();n&&(u=Br(l)?us:n),Ur(l)&&(t=t||ss,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Hr(l)&&"_self"!==u)return fs(t||"",u),new cs(null);var h=window.open(t||"",u,f);jn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new cs(h)}function fs(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var hs="__/auth/handler",ds="emulator/auth/handler";function ps(e,t,n,r,i,a){jn(e.config.authDomain,e,"auth-domain-config-required"),jn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Mt,eventId:i};if(t instanceof ji){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Bi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(hs);return $n(t,ds)}(e),"?").concat(Ce(p).slice(1))}var vs="webStorageSupport",ms=function(){function e(){H(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=so,this._completeRedirectFn=Fu,this._overrideRedirectResult=Tu}return $(e,[{key:"_openPopup",value:function(){var e=Ve(je().mark((function e(t,n,r,i){var a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=ps(t,n,r,Gn(),i),e.abrupt("return",ls(t,o,fo()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ve(je().mark((function e(t,n,r,i){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=ps(t,n,r,Gn(),i),po().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(qn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,is(t);case 2:return n=e.sent,r=new Bu(t),n.register("authEvent",(function(e){return jn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(vs,{type:vs},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ln(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Qu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return $r()||jr()||Wr()}}]),e}(),ys=ms,gs=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this,"phone")).credential=e,r}return $(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return er(e,"POST","/v2/accounts/mfaEnrollment:finalize",Zn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return er(e,"POST","/v2/accounts/mfaSignIn:finalize",Zn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){H(this,e),this.factorId=t}return $(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Bn("unexpected MultiFactorSessionType")}}}]),e}()),ks=function(){function e(){H(this,e)}return $(e,null,[{key:"assertion",value:function(e){return gs._fromCredential(e)}}]),e}();ks.FACTOR_ID="phone";var ws,bs="@firebase/auth",xs="0.20.5",_s=function(){function e(t){H(this,e),this.auth=t,this.internalListeners=new Map}return $(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){jn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Is(){return window}ws="Browser",Nt(new Be("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){jn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),jn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:ws,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jr(ws)},i=new Xr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Nt(new Be("auth-internal",(function(e){return function(e){return new _s(e)}(Zr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),qt(bs,xs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ws)),qt(bs,xs,"esm2017");function Es(e,t,n){return Ts.apply(this,arguments)}function Ts(){return Ts=Ve(je().mark((function e(t,n,r){var i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Is(),o=a.BuildInfo,qn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Os(n.sessionId);case 4:return u=e.sent,s={},Wr()?s.ibi=o.packageName:zr()?s.apn=o.packageName:Ln(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",ps(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Ts.apply(this,arguments)}function Ss(){return(Ss=Ve(je().mark((function e(t){var n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Is(),r=n.BuildInfo,i={},Wr()?i.iosBundleId=r.packageName:zr()?i.androidPackageName=r.packageName:Ln(t,"operation-not-supported-in-this-environment"),e.next=5,Ku(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cs(e){var t=Is().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Ns(e,t,n){return As.apply(this,arguments)}function As(){return As=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Is(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Mn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),zr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),As.apply(this,arguments)}function Ds(e){var t,n,r,i,a,o,u,s,c,l,f=Is();jn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),jn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),jn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),jn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),jn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Os(e){return Rs.apply(this,arguments)}function Rs(){return(Rs=Ve(je().mark((function e(t){var n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ps(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ps(e){if(qn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ls=function(e){Z(n,e);var t=ie(n);function n(){var e;return H(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return $(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),vn(ee(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Bu);function Ms(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Bs(),postBody:null,tenantId:e.tenantId,error:Mn(e,"no-auth-event")}}function Fs(e,t){return qs()._set(zs(e),t)}function Vs(e){return Us.apply(this,arguments)}function Us(){return(Us=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qs()._get(zs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,qs()._remove(zs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(e,t){var n,r,i=function(e){var t=Ks(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ks(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ks(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ks(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Mn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Bs(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function qs(){return Kn(oo)}function zs(e){return Mr("authEvent",e.config.apiKey,e.name)}function Ks(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||Le(t)||o(t)||u();r[0];return Ne(r.slice(1).join("?"))}var Gs=function(){function e(){H(this,e),this._redirectPersistence=so,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fu,this._overrideRedirectResult=Tu}return $(e,[{key:"_initialize",value:function(){var e=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ls(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ln(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ve(je().mark((function e(t,n,r,i){var a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ds(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),wu.clear(),e.next=10,this._originValidation(t);case 10:return o=Ms(t,r,i),e.next=13,Fs(t,o);case 13:return e.next=15,Es(t,o,n);case 15:return u=e.sent,e.next=18,Cs(u);case 18:return s=e.sent,e.abrupt("return",Ns(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ss.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Is(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ve(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vs(e);case 2:t.onEvent(Hs());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ve(je().mark((function n(r){var i,a;return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Vs(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=js(i,r.url)),t.onEvent(a||Hs());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Is().handleOpenURL=function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Ws=Gs;function Hs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Mn("no-auth-event")}}function Qs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function $s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return!("file:"!==Qs()&&"ionic:"!==Qs()&&"capacitor:"!==Qs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Js(){return ke()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return/Edge\/\d+/.test(e)}function Xs(){try{var e=self.localStorage,t=fo();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return Js()||Ys(e)}()||we()}catch(n){return Zs()&&we()}return!1}function Zs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ec(){return("http:"===Qs()||"https:"===Qs()||ye()||$s())&&!(ge()||me())&&Xs()&&!Zs()}function tc(){return $s()&&"undefined"!==typeof document}function nc(){return rc.apply(this,arguments)}function rc(){return(rc=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ic={LOCAL:"local",NONE:"none",SESSION:"session"},ac=jn,oc="persistence";function uc(e,t){ac(Object.values(ic).includes(t),e,"invalid-persistence-type"),ge()?ac(t!==ic.SESSION,e,"unsupported-persistence-type"):me()?ac(t===ic.NONE,e,"unsupported-persistence-type"):Zs()?ac(t===ic.NONE||t===ic.LOCAL&&we(),e,"unsupported-persistence-type"):ac(t===ic.NONE||Xs(),e,"unsupported-persistence-type")}function sc(e){return cc.apply(this,arguments)}function cc(){return(cc=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=lc(),r=Mr(oc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var fc=jn,hc=function(){function e(){H(this,e),this.browserResolver=Kn(ys),this.cordovaResolver=Kn(Ws),this.underlyingResolver=null,this._redirectPersistence=so,this._completeRedirectFn=Fu,this._overrideRedirectResult=Tu}return $(e,[{key:"_initialize",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ve(je().mark((function e(t,n,r,i){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ve(je().mark((function e(t,n,r,i){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return tc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return fc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,nc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function dc(e){return e.unwrap()}function pc(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new kc(e,function(e,t){var n,r=Pe(e),i=t;return jn(t.customData.operationType,r,"argument-error"),jn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Za._fromError(r,i)}(e,t));else if(i){var a=vc(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function vc(e){var t=(e instanceof be?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof be)&&"temporaryProof"in t&&"phoneNumber"in t)return au.credentialFromResult(e);var n,r=t.providerId;if(!r||r===bn)return null;switch(r){case wn:n=Ki;break;case gn:n=zi;break;case kn:n=Gi;break;case xn:n=Qi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Wi._create(r,u):Ai._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new qi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof be?n.credentialFromError(e):n.credentialFromResult(e)}function mc(e,t){return t.catch((function(t){throw t instanceof be&&pc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,vc(t)),additionalUserInfo:Ya(e),user:wc.getOrCreate(r)}}))}function yc(e,t){return gc.apply(this,arguments)}function gc(){return(gc=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return mc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kc=function(){function e(t,n){H(this,e),this.resolver=n,this.auth=t.wrapped()}return $(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return mc(dc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),wc=function(){function e(t){H(this,e),this._delegate=t,this.multiFactor=function(e){var t=Pe(e);return no.has(t)||no.set(t,to._fromUser(t)),no.get(t)}(t)}return $(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc(this.auth,va(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yc(this.auth,Zo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc(this.auth,yu(this._delegate,t,hc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(Zr(this.auth));case 2:return e.abrupt("return",Ru(this._delegate,t,hc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc(this.auth,ya(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return yc(this.auth,function(e,t,n){return tu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return mc(this.auth,function(e,t,n){return mu.apply(this,arguments)}(this._delegate,e,hc))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(Zr(this.auth));case 2:return e.abrupt("return",Du(this._delegate,t,hc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Va.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return za(Pe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return za(Pe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return iu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return qa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ua.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();wc.USER_MAP=new WeakMap;var bc=jn,xc=function(){function e(t,n){if(H(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;bc(r,"invalid-api-key",{appName:t.name}),bc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?hc:void 0;this._delegate=n.initialize({options:{persistence:Ic(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(An),this.linkUnderlyingAuth()}return $(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?wc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ti(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Sa.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ca(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ta.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc(this._delegate,Da(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Fa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Vi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bc(ec(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Lu(this._delegate,hc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",mc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Zr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=_c(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=_c(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ra.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ea.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uc(this._delegate,t),e.t0=t,e.next=e.t0===ic.SESSION?4:e.t0===ic.LOCAL?6:e.t0===ic.NONE?11:13;break;case 4:return n=so,e.abrupt("break",14);case 6:return e.next=8,Kn(Oo)._isAvailable();case 8:return r=e.sent,n=r?Oo:oo,e.abrupt("break",14);case 11:return n=Lr,e.abrupt("break",14);case 13:return e.abrupt("return",Ln("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return mc(this._delegate,function(e){return Zi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return mc(this._delegate,da(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return mc(this._delegate,function(e,t){return ba.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return mc(this._delegate,function(e,t,n){return da(Pe(e),Ui.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return mc(this._delegate,function(e,t,n){return Pa.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return yc(this._delegate,function(e,t,n){return Xo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bc(ec(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",mc(this._delegate,pu(this._delegate,t,hc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bc(ec(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,sc(this._delegate);case 3:return e.abrupt("return",Nu(this._delegate,t,hc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Aa.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function _c(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&wc.getOrCreate(e))},error:t,complete:n}}function Ic(e,t){var n=function(e,t){var n=lc();if(!n)return[];var r=Mr(oc,e,t);switch(n.getItem(r)){case ic.NONE:return[Lr];case ic.LOCAL:return[Oo,so];case ic.SESSION:return[so];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Oo)||n.push(Oo),"undefined"!==typeof window)for(var r=0,i=[oo,so];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Lr)||n.push(Lr),n}xc.Persistence=ic;var Ec=function(){function e(){H(this,e),this.providerId="phone",this._delegate=new au(dc(dn.auth()))}return $(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return au.credential(e,t)}}]),e}();Ec.PHONE_SIGN_IN_METHOD=au.PHONE_SIGN_IN_METHOD,Ec.PROVIDER_ID=au.PROVIDER_ID;var Tc,Sc=jn,Cc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dn.app();H(this,e),Sc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new $o(t,n,i.auth()),this.type=this._delegate.type}return $(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Tc=dn).INTERNAL.registerComponent(new Be("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new xc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_n,PASSWORD_RESET:In,RECOVER_EMAIL:En,REVERT_SECOND_FACTOR_ADDITION:Tn,VERIFY_AND_CHANGE_EMAIL:Sn,VERIFY_EMAIL:Cn}},EmailAuthProvider:Ui,FacebookAuthProvider:zi,GithubAuthProvider:Gi,GoogleAuthProvider:Ki,OAuthProvider:qi,SAMLAuthProvider:Hi,PhoneAuthProvider:Ec,PhoneMultiFactorGenerator:ks,RecaptchaVerifier:Cc,TwitterAuthProvider:Qi,Auth:xc,AuthCredential:ii,Error:be}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Tc.registerVersion("@firebase/auth-compat","0.2.18");var Nc,Ac="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Dc={},Oc=Oc||{},Rc=Ac||self;function Pc(){}function Lc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Mc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Fc="closure_uid_"+(1e9*Math.random()>>>0),Vc=0;function Uc(e,t,n){return e.call.apply(e.bind,arguments)}function jc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bc(e,t,n){return(Bc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Uc:jc).apply(null,arguments)}function qc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Kc(){this.s=this.s,this.o=this.o}var Gc={};Kc.prototype.s=!1,Kc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Fc)&&e[Fc]||(e[Fc]=++Vc)}(this);delete Gc[e]}},Kc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Hc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Qc(e){return Array.prototype.concat.apply([],arguments)}function $c(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Jc(e){return/^[\s\xa0]*$/.test(e)}var Yc,Xc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Zc(e,t){return-1!=e.indexOf(t)}function el(e,t){return e<t?-1:e>t?1:0}e:{var tl=Rc.navigator;if(tl){var nl=tl.userAgent;if(nl){Yc=nl;break e}}Yc=""}function rl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function il(e){var t={};for(var n in e)t[n]=e[n];return t}var al="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ol(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<al.length;a++)n=al[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ul(e){return ul[" "](e),e}ul[" "]=Pc;var sl,cl=Zc(Yc,"Opera"),ll=Zc(Yc,"Trident")||Zc(Yc,"MSIE"),fl=Zc(Yc,"Edge"),hl=fl||ll,dl=Zc(Yc,"Gecko")&&!(Zc(Yc.toLowerCase(),"webkit")&&!Zc(Yc,"Edge"))&&!(Zc(Yc,"Trident")||Zc(Yc,"MSIE"))&&!Zc(Yc,"Edge"),pl=Zc(Yc.toLowerCase(),"webkit")&&!Zc(Yc,"Edge");function vl(){var e=Rc.document;return e?e.documentMode:void 0}e:{var ml="",yl=function(){var e=Yc;return dl?/rv:([^\);]+)(\)|;)/.exec(e):fl?/Edge\/([\d\.]+)/.exec(e):ll?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):pl?/WebKit\/(\S+)/.exec(e):cl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(yl&&(ml=yl?yl[1]:""),ll){var gl=vl();if(null!=gl&&gl>parseFloat(ml)){sl=String(gl);break e}}sl=ml}var kl,wl={};function bl(){return function(e){var t=wl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Xc(String(sl)).split("."),n=Xc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=el(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||el(0==a[2].length,0==o[2].length)||el(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Rc.document&&ll){var xl=vl();kl=xl||(parseInt(sl,10)||void 0)}else kl=void 0;var _l=kl,Il=function(){if(!Rc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Rc.addEventListener("test",Pc,t),Rc.removeEventListener("test",Pc,t)}catch(n){}return e}();function El(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Tl(e,t){if(El.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(dl){e:{try{ul(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Sl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Tl.Z.h.call(this)}}El.prototype.h=function(){this.defaultPrevented=!0},zc(Tl,El);var Sl={2:"touch",3:"pen",4:"mouse"};Tl.prototype.h=function(){Tl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Cl="closure_listenable_"+(1e6*Math.random()|0),Nl=0;function Al(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Nl,this.ca=this.fa=!1}function Dl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ol(e){this.src=e,this.g={},this.h=0}function Rl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Wc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Dl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Pl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Ol.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Pl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Al(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Ll="closure_lm_"+(1e6*Math.random()|0),Ml={};function Fl(e,t,n,r,i){if(r&&r.once)return Ul(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Fl(e,t[a],n,r,i);return null}return n=Wl(n),e&&e[Cl]?e.N(t,n,Mc(r)?!!r.capture:!!r,i):Vl(e,t,n,!1,r,i)}function Vl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Mc(i)?!!i.capture:!!i,u=Kl(e);if(u||(e[Ll]=u=new Ol(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=zl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Il||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ql(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ul(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ul(e,t[a],n,r,i);return null}return n=Wl(n),e&&e[Cl]?e.O(t,n,Mc(r)?!!r.capture:!!r,i):Vl(e,t,n,!0,r,i)}function jl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)jl(e,t[a],n,r,i);else r=Mc(r)?!!r.capture:!!r,n=Wl(n),e&&e[Cl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Pl(a=e.g[t],n,r,i))&&(Dl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Kl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Pl(t,n,r,i)),(n=-1<e?t[e]:null)&&Bl(n))}function Bl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Cl])Rl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ql(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Kl(t))?(Rl(n,e),0==n.h&&(n.src=null,t[Ll]=null)):Dl(e)}}}function ql(e){return e in Ml?Ml[e]:Ml[e]="on"+e}function zl(e,t){if(e.ca)e=!0;else{t=new Tl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Bl(e),e=n.call(r,t)}return e}function Kl(e){return(e=e[Ll])instanceof Ol?e:null}var Gl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(e){return"function"===typeof e?e:(e[Gl]||(e[Gl]=function(t){return e.handleEvent(t)}),e[Gl])}function Hl(){Kc.call(this),this.i=new Ol(this),this.P=this,this.I=null}function Ql(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new El(t,e);else if(t instanceof El)t.target=t.target||e;else{var i=t;ol(t=new El(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=$l(o,r,!0,t)&&i}if(i=$l(o=t.g=e,r,!0,t)&&i,i=$l(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=$l(o=t.g=n[a],r,!1,t)&&i}function $l(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Rl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}zc(Hl,Kc),Hl.prototype[Cl]=!0,Hl.prototype.removeEventListener=function(e,t,n,r){jl(this,e,t,n,r)},Hl.prototype.M=function(){if(Hl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dl(n[r]);delete t.g[e],t.h--}}this.I=null},Hl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Hl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Jl=Rc.JSON.stringify;function Yl(){var e=of,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Xl,Zl=function(){function e(){H(this,e),this.h=this.g=null}return $(e,[{key:"add",value:function(e,t){var n=ef.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ef=new(function(){function e(t,n){H(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return $(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new tf}),(function(e){return e.reset()})),tf=function(){function e(){H(this,e),this.next=this.g=this.h=null}return $(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function nf(e){Rc.setTimeout((function(){throw e}),0)}function rf(e,t){Xl||function(){var e=Rc.Promise.resolve(void 0);Xl=function(){e.then(uf)}}(),af||(Xl(),af=!0),of.add(e,t)}var af=!1,of=new Zl;function uf(){for(var e;e=Yl();){try{e.h.call(e.g)}catch(n){nf(n)}var t=ef;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}af=!1}function sf(e,t){Hl.call(this),this.h=e||1,this.g=t||Rc,this.j=Bc(this.kb,this),this.l=Date.now()}function cf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function lf(e,t,n){if("function"===typeof e)n&&(e=Bc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Rc.setTimeout(e,t||0)}function ff(e){e.g=lf((function(){e.g=null,e.i&&(e.i=!1,ff(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}zc(sf,Hl),(Nc=sf.prototype).da=!1,Nc.S=null,Nc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ql(this,"tick"),this.da&&(cf(this),this.start()))}},Nc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Nc.M=function(){sf.Z.M.call(this),cf(this),delete this.g};var hf=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return $(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ff(this)}},{key:"M",value:function(){vn(ee(n.prototype),"M",this).call(this),this.g&&(Rc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Kc);function df(e){Kc.call(this),this.h=e,this.g={}}zc(df,Kc);var pf=[];function vf(e,t,n,r){Array.isArray(n)||(n&&(pf[0]=n.toString()),n=pf);for(var i=0;i<n.length;i++){var a=Fl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function mf(e){rl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Bl(e)}),e),e.g={}}function yf(){this.g=!0}function gf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Jl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}df.prototype.M=function(){df.Z.M.call(this),mf(this)},df.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yf.prototype.Aa=function(){this.g=!1},yf.prototype.info=function(){};var kf={},wf=null;function bf(){return wf=wf||new Hl}function xf(e){El.call(this,kf.Ma,e)}function _f(e){var t=bf();Ql(t,new xf(t,e))}function If(e,t){El.call(this,kf.STAT_EVENT,e),this.stat=t}function Ef(e){var t=bf();Ql(t,new If(t,e))}function Tf(e,t){El.call(this,kf.Na,e),this.size=t}function Sf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Rc.setTimeout((function(){e()}),t)}kf.Ma="serverreachability",zc(xf,El),kf.STAT_EVENT="statevent",zc(If,El),kf.Na="timingevent",zc(Tf,El);var Cf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Nf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Af(){}function Df(e){return e.h||(e.h=e.i())}function Of(){}Af.prototype.h=null;var Rf,Pf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Lf(){El.call(this,"d")}function Mf(){El.call(this,"c")}function Ff(){}function Vf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new df(this),this.P=jf,e=hl?125:void 0,this.W=new sf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Uf}function Uf(){this.i=null,this.g="",this.h=!1}zc(Lf,El),zc(Mf,El),zc(Ff,Af),Ff.prototype.g=function(){return new XMLHttpRequest},Ff.prototype.i=function(){return{}},Rf=new Ff;var jf=45e3,Bf={},qf={};function zf(e,t,n){e.K=1,e.v=hh(oh(t)),e.s=n,e.U=!0,Kf(e,null)}function Kf(e,t){e.F=Date.now(),Qf(e),e.A=oh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Eh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Uf,e.g=Sd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new hf(Bc(e.Ia,e,e.g),e.O)),vf(e.V,e.g,"readystatechange",e.gb),t=e.H?il(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_f(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Gf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Wf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Hf(e,n))==qf){4==t&&(e.o=4,Ef(14),i=!1),gf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Bf){e.o=4,Ef(15),gf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}gf(e.j,e.m,r,null),Zf(e,r)}Gf(e)&&r!=qf&&r!=Bf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ef(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),kd(t),t.L=!0,Ef(11))):(gf(e.j,e.m,n,"[Invalid Chunked Response]"),Xf(e),Yf(e))}function Hf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qf:(n=Number(t.substring(n,r)),isNaN(n)?Bf:(r+=1)+n>t.length?qf:(t=t.substr(r,n),e.C=r+n,t))}function Qf(e){e.Y=Date.now()+e.P,$f(e,e.P)}function $f(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Sf(Bc(e.eb,e),t)}function Jf(e){e.B&&(Rc.clearTimeout(e.B),e.B=null)}function Yf(e){0==e.l.G||e.I||xd(e.l,e)}function Xf(e){Jf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,cf(e.W),mf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Zf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Rh(n.i,e)))if(n.I=e.N,!e.J&&Rh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bd(n),ld(n)}gd(n),Ef(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Sf(Bc(n.ab,n),6e3));if(1>=Oh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Id(n,11)}else if((e.J||n.g==e)&&bd(n),!Jc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Zc(l,"spdy")||Zc(l,"quic")||Zc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Ph(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,fh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Td(r,r.H?r.la:null,r.W),d.J){Lh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Jf(p),Qf(p)),r.g=d}else yd(r);0<n.l.length&&dd(n)}else"stop"!=a[0]&&"close"!=a[0]||Id(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Id(n,7):cd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}_f(4)}catch(a){}}function eh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Lc(e)||"string"===typeof e)Hc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Lc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Lc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function th(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof th)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function nh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];rh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)rh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function rh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Nc=Vf.prototype).setTimeout=function(e){this.P=e},Nc.gb=function(e){e=e.target;var t=this.L;t&&3==id(e)?t.l():this.Ia(e)},Nc.Ia=function(e){try{if(e==this.g)e:{var t=id(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||hl||this.g&&(this.h.h||this.g.ga()||ad(this.g)))){this.I||4!=t||7==n||_f(8==n||0>=r?3:2),Jf(this);var i=this.g.ba();this.N=i;t:if(Gf(this)){var a=ad(this.g);e="";var o=a.length,u=4==id(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xf(this),Yf(this);var s="";break t}this.h.i=new Rc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ef(12),Xf(this),Yf(this);break e}gf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zf(this,i)}this.U?(Wf(this,t,s),hl&&this.i&&3==t&&(vf(this.V,this.W,"tick",this.fb),this.W.start())):(gf(this.j,this.m,s,null),Zf(this,s)),4==t&&Xf(this),this.i&&!this.I&&(4==t?xd(this.l,this):(this.i=!1,Qf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Ef(12)):(this.o=0,Ef(13)),Xf(this),Yf(this)}}}catch(t){}},Nc.fb=function(){if(this.g){var e=id(this.g),t=this.g.ga();this.C<t.length&&(Jf(this),Wf(this,e,t),this.i&&4!=e&&Qf(this))}},Nc.cancel=function(){this.I=!0,Xf(this)},Nc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(_f(3),Ef(17)),Xf(this),this.o=2,Yf(this)):$f(this,this.Y-e)},(Nc=th.prototype).R=function(){nh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Nc.T=function(){return nh(this),this.g.concat()},Nc.get=function(e,t){return rh(this.h,e)?this.h[e]:t},Nc.set=function(e,t){rh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Nc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ih=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ah(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ah){this.g=void 0!==t?t:e.g,uh(this,e.j),this.s=e.s,sh(this,e.i),ch(this,e.m),this.l=e.l,t=e.h;var n=new bh;n.i=t.i,t.g&&(n.g=new th(t.g),n.h=t.h),lh(this,n),this.o=e.o}else e&&(n=String(e).match(ih))?(this.g=!!t,uh(this,n[1]||"",!0),this.s=dh(n[2]||""),sh(this,n[3]||"",!0),ch(this,n[4]),this.l=dh(n[5]||"",!0),lh(this,n[6]||"",!0),this.o=dh(n[7]||"")):(this.g=!!t,this.h=new bh(null,this.g))}function oh(e){return new ah(e)}function uh(e,t,n){e.j=n?dh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function sh(e,t,n){e.i=n?dh(t,!0):t}function ch(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function lh(e,t,n){t instanceof bh?(e.h=t,function(e,t){t&&!e.j&&(xh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_h(this,t),Eh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ph(t,kh)),e.h=new bh(t,e.g))}function fh(e,t,n){e.h.set(t,n)}function hh(e){return fh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ph(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,vh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ah.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ph(t,mh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ph(t,mh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ph(n,"/"==n.charAt(0)?gh:yh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ph(n,wh)),e.join("")};var mh=/[#\/\?@]/g,yh=/[#\?:]/g,gh=/[#\?]/g,kh=/[#\?@]/g,wh=/#/g;function bh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xh(e){e.g||(e.g=new th,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _h(e,t){xh(e),t=Th(e,t),rh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,rh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&nh(e)))}function Ih(e,t){return xh(e),t=Th(e,t),rh(e.g.h,t)}function Eh(e,t,n){_h(e,t),0<n.length&&(e.i=null,e.g.set(Th(e,t),$c(n)),e.h+=n.length)}function Th(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Nc=bh.prototype).add=function(e,t){xh(this),this.i=null,e=Th(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Nc.forEach=function(e,t){xh(this),this.g.forEach((function(n,r){Hc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Nc.T=function(){xh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Nc.R=function(e){xh(this);var t=[];if("string"===typeof e)Ih(this,e)&&(t=Qc(t,this.g.get(Th(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Qc(t,e[n])}return t},Nc.set=function(e,t){return xh(this),this.i=null,Ih(this,e=Th(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Nc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Nc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Sh=$((function e(t,n){H(this,e),this.h=t,this.g=n}));function Ch(e){this.l=e||Ah,Rc.PerformanceNavigationTiming?e=0<(e=Rc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Rc.g&&Rc.g.Ea&&Rc.g.Ea()&&Rc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Nh,Ah=10;function Dh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Oh(e){return e.h?1:e.g?e.g.size:0}function Rh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ph(e,t){e.g?e.g.add(t):e.h=t}function Lh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Mh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=J(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return $c(e.i)}function Fh(){}function Vh(){this.g=new Fh}function Uh(e,t,n){var r=n||"";try{eh(e,(function(e,n){var i=e;Mc(e)&&(i=Jl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function jh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Bh(e){this.l=e.$b||null,this.j=e.ib||!1}function qh(e,t){Hl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=zh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ch.prototype.cancel=function(){if(this.i=Mh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=J(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Fh.prototype.stringify=function(e){return Rc.JSON.stringify(e,void 0)},Fh.prototype.parse=function(e){return Rc.JSON.parse(e,void 0)},zc(Bh,Af),Bh.prototype.g=function(){return new qh(this.l,this.j)},Bh.prototype.i=(Nh={},function(){return Nh}),zc(qh,Hl);var zh=0;function Kh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Gh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wh(e)}function Wh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Nc=qh.prototype).open=function(e,t){if(this.readyState!=zh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wh(this)},Nc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Rc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Nc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gh(this)),this.readyState=zh},Nc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wh(this)),this.g&&(this.readyState=3,Wh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Rc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Nc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Gh(this):Wh(this),3==this.readyState&&Kh(this)}},Nc.Ua=function(e){this.g&&(this.response=this.responseText=e,Gh(this))},Nc.Ta=function(e){this.g&&(this.response=e,Gh(this))},Nc.ha=function(){this.g&&Gh(this)},Nc.setRequestHeader=function(e,t){this.v.append(e,t)},Nc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Nc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Hh=Rc.JSON.parse;function Qh(e){Hl.call(this),this.headers=new th,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$h,this.K=this.L=!1}zc(Qh,Hl);var $h="",Jh=/^https?$/i,Yh=["POST","PUT"];function Xh(e){return"content-type"==e.toLowerCase()}function Zh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ed(e),nd(e)}function ed(e){e.D||(e.D=!0,Ql(e,"complete"),Ql(e,"error"))}function td(e){if(e.h&&"undefined"!=typeof Oc&&(!e.C[1]||4!=id(e)||2!=e.ba()))if(e.v&&4==id(e))lf(e.Fa,0,e);else if(Ql(e,"readystatechange"),4==id(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ih)[1]||null;if(!a&&Rc.self&&Rc.self.location){var o=Rc.self.location.protocol;a=o.substr(0,o.length-1)}i=!Jh.test(a?a.toLowerCase():"")}t=i}if(t)Ql(e,"complete"),Ql(e,"success");else{e.m=6;try{var u=2<id(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",ed(e)}}finally{nd(e)}}}function nd(e,t){if(e.g){rd(e);var n=e.g,r=e.C[0]?Pc:null;e.g=null,e.C=null,t||Ql(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function rd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Rc.clearTimeout(e.A),e.A=null)}function id(e){return e.g?e.g.readyState:0}function ad(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case $h:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function od(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return rl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):fh(e,t,n))}function ud(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sd(e){this.za=0,this.l=[],this.h=new yf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ud("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ud("baseRetryDelayMs",5e3,e),this.$a=ud("retryDelaySeedMs",1e4,e),this.Ya=ud("forwardChannelMaxRetries",2,e),this.ra=ud("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ch(e&&e.concurrentRequestLimit),this.Ca=new Vh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function cd(e){if(fd(e),3==e.G){var t=e.V++,n=oh(e.F);fh(n,"SID",e.J),fh(n,"RID",t),fh(n,"TYPE","terminate"),vd(e,n),(t=new Vf(e,e.h,t,void 0)).K=2,t.v=hh(oh(n)),n=!1,Rc.navigator&&Rc.navigator.sendBeacon&&(n=Rc.navigator.sendBeacon(t.v.toString(),"")),!n&&Rc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Qf(t)}Ed(e)}function ld(e){e.g&&(kd(e),e.g.cancel(),e.g=null)}function fd(e){ld(e),e.u&&(Rc.clearTimeout(e.u),e.u=null),bd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Rc.clearTimeout(e.m),e.m=null)}function hd(e,t){e.l.push(new Sh(e.Za++,t)),3==e.G&&dd(e)}function dd(e){Dh(e.i)||e.m||(e.m=!0,rf(e.Ha,e),e.C=0)}function pd(e,t){var n;n=t?t.m:e.V++;var r=oh(e.F);fh(r,"SID",e.J),fh(r,"RID",n),fh(r,"AID",e.U),vd(e,r),e.o&&e.s&&od(r,e.o,e.s),n=new Vf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=md(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ph(e.i,n),zf(n,r,t)}function vd(e,t){e.j&&eh({},(function(e,n){fh(t,n,e)}))}function md(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Bc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Uh(l,o,"req"+c+"_")}catch(tp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function yd(e){e.g||e.u||(e.Y=1,rf(e.Ga,e),e.A=0)}function gd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Sf(Bc(e.Ga,e),_d(e,e.A)),e.A++,!0)}function kd(e){null!=e.B&&(Rc.clearTimeout(e.B),e.B=null)}function wd(e){e.g=new Vf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=oh(e.oa);fh(t,"RID","rpc"),fh(t,"SID",e.J),fh(t,"CI",e.N?"0":"1"),fh(t,"AID",e.U),vd(e,t),fh(t,"TYPE","xmlhttp"),e.o&&e.s&&od(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=hh(oh(t)),n.s=null,n.U=!0,Kf(n,e)}function bd(e){null!=e.v&&(Rc.clearTimeout(e.v),e.v=null)}function xd(e,t){var n=null;if(e.g==t){bd(e),kd(e),e.g=null;var r=2}else{if(!Rh(e.i,t))return;n=t.D,Lh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ql(r=bf(),new Tf(r,n,t,i)),dd(e)}else yd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Oh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Sf(Bc(e.Ha,e,t),_d(e,e.C)),e.C++,!0))}(e,t)||2==r&&gd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Id(e,5);break;case 4:Id(e,10);break;case 3:Id(e,6);break;default:Id(e,2)}}function _d(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Id(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Bc(e.jb,e);n||(n=new ah("//www.google.com/images/cleardot.gif"),Rc.location&&"http"==Rc.location.protocol||uh(n,"https"),hh(n)),function(e,t){var n=new yf;if(Rc.Image){var r=new Image;r.onload=qc(jh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qc(jh,n,r,"TestLoadImage: error",!1,t),r.onabort=qc(jh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qc(jh,n,r,"TestLoadImage: timeout",!1,t),Rc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ef(2);e.G=0,e.j&&e.j.va(t),Ed(e),fd(e)}function Ed(e){e.G=0,e.I=-1,e.j&&(0==Mh(e.i).length&&0==e.l.length||(e.i.i.length=0,$c(e.l),e.l.length=0),e.j.ua())}function Td(e,t,n){var r=function(e){return e instanceof ah?oh(e):new ah(e,void 0)}(n);if(""!=r.i)t&&sh(r,t+"."+r.i),ch(r,r.m);else{var i=Rc.location;r=function(e,t,n,r){var i=new ah(null,void 0);return e&&uh(i,e),t&&sh(i,t),n&&ch(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&rl(e.aa,(function(e,t){fh(r,t,e)})),t=e.D,n=e.sa,t&&n&&fh(r,t,n),fh(r,"VER",e.ma),vd(e,r),r}function Sd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Qh(new Bh({ib:!0})):new Qh(e.qa)).L=e.H,t}function Cd(){}function Nd(){if(ll&&!(10<=Number(_l)))throw Error("Environmental error: no available transport.")}function Ad(e,t){Hl.call(this),this.g=new sd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Jc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Rd(this)}function Dd(e){Lf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Od(){Mf.call(this),this.status=1}function Rd(e){this.g=e}(Nc=Qh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rf.g(),this.C=this.u?Df(this.u):Df(Rf),this.g.onreadystatechange=Bc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Zh(this,a)}e=n||"";var i=new th(this.headers);r&&eh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Xh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Rc.FormData&&e instanceof Rc.FormData,!(0<=Wc(Yh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rd(this),0<this.B&&((this.K=function(e){return ll&&bl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bc(this.pa,this)):this.A=lf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Zh(this,a)}},Nc.pa=function(){"undefined"!=typeof Oc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ql(this,"timeout"),this.abort(8))},Nc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ql(this,"complete"),Ql(this,"abort"),nd(this))},Nc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nd(this,!0)),Qh.Z.M.call(this)},Nc.Fa=function(){this.s||(this.F||this.v||this.l?td(this):this.cb())},Nc.cb=function(){td(this)},Nc.ba=function(){try{return 2<id(this)?this.g.status:-1}catch(Nh){return-1}},Nc.ga=function(){try{return this.g?this.g.responseText:""}catch(Nh){return""}},Nc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Hh(t)}},Nc.Da=function(){return this.m},Nc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Nc=sd.prototype).ma=8,Nc.G=1,Nc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Nc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Vf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ol(n=il(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=md(this,t,r),fh(i=oh(this.F),"RID",e),fh(i,"CVER",22),this.D&&fh(i,"X-HTTP-Session-Id",this.D),vd(this,i),this.o&&n&&od(i,this.o,n),Ph(this.i,t),this.Ra&&fh(i,"TYPE","init"),this.ja?(fh(i,"$req",r),fh(i,"SID","null"),t.$=!0,zf(t,i,null)):zf(t,i,r),this.G=2}}else 3==this.G&&(e?pd(this,e):0==this.l.length||Dh(this.i)||pd(this))},Nc.Ga=function(){if(this.u=null,wd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Sf(Bc(this.bb,this),e)}},Nc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ef(10),ld(this),wd(this))},Nc.ab=function(){null!=this.v&&(this.v=null,ld(this),gd(this),Ef(19))},Nc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ef(2)):(this.h.info("Failed to ping google.com"),Ef(1))},(Nc=Cd.prototype).xa=function(){},Nc.wa=function(){},Nc.va=function(){},Nc.ua=function(){},Nc.Oa=function(){},Nd.prototype.g=function(e,t){return new Ad(e,t)},zc(Ad,Hl),Ad.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),rf(Bc(e.hb,e,t))),Ef(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Td(e,null,e.W),dd(e)},Ad.prototype.close=function(){cd(this.g)},Ad.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,hd(this.g,t)}else this.v?((t={}).__data__=Jl(e),hd(this.g,t)):hd(this.g,e)},Ad.prototype.M=function(){this.g.j=null,delete this.j,cd(this.g),delete this.g,Ad.Z.M.call(this)},zc(Dd,Lf),zc(Od,Mf),zc(Rd,Cd),Rd.prototype.xa=function(){Ql(this.g,"a")},Rd.prototype.wa=function(e){Ql(this.g,new Dd(e))},Rd.prototype.va=function(e){Ql(this.g,new Od(e))},Rd.prototype.ua=function(){Ql(this.g,"b")},Nd.prototype.createWebChannel=Nd.prototype.g,Ad.prototype.send=Ad.prototype.u,Ad.prototype.open=Ad.prototype.m,Ad.prototype.close=Ad.prototype.close,Cf.NO_ERROR=0,Cf.TIMEOUT=8,Cf.HTTP_ERROR=6,Nf.COMPLETE="complete",Of.EventType=Pf,Pf.OPEN="a",Pf.CLOSE="b",Pf.ERROR="c",Pf.MESSAGE="d",Hl.prototype.listen=Hl.prototype.N,Qh.prototype.listenOnce=Qh.prototype.O,Qh.prototype.getLastError=Qh.prototype.La,Qh.prototype.getLastErrorCode=Qh.prototype.Da,Qh.prototype.getStatus=Qh.prototype.ba,Qh.prototype.getResponseJson=Qh.prototype.Qa,Qh.prototype.getResponseText=Qh.prototype.ga,Qh.prototype.send=Qh.prototype.ea;var Pd=Dc.createWebChannelTransport=function(){return new Nd},Ld=Dc.getStatEventTarget=function(){return bf()},Md=Dc.ErrorCode=Cf,Fd=Dc.EventType=Nf,Vd=Dc.Event=kf,Ud=Dc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jd=Dc.FetchXmlHttpFactory=Bh,Bd=Dc.WebChannel=Of,qd=Dc.XhrIo=Qh,zd="@firebase/firestore",Kd=function(){function e(t){H(this,e),this.uid=t}return $(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Kd.UNAUTHENTICATED=new Kd(null),Kd.GOOGLE_CREDENTIALS=new Kd("google-credentials-uid"),Kd.FIRST_PARTY=new Kd("first-party-uid"),Kd.MOCK_USER=new Kd("mock-user");var Gd="9.9.2",Wd=new Xe("@firebase/firestore");function Hd(){return Wd.logLevel}function Qd(e){if(Wd.logLevel<=Ge.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yd);Wd.debug.apply(Wd,["Firestore (".concat(Gd,"): ").concat(e)].concat(Me(i)))}}function $d(e){if(Wd.logLevel<=Ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yd);Wd.error.apply(Wd,["Firestore (".concat(Gd,"): ").concat(e)].concat(Me(i)))}}function Jd(e){if(Wd.logLevel<=Ge.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yd);Wd.warn.apply(Wd,["Firestore (".concat(Gd,"): ").concat(e)].concat(Me(i)))}}function Yd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Xd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Gd,") INTERNAL ASSERTION FAILED: ")+e;throw $d(t),new Error(t)}function Zd(e,t){e||Xd()}function ep(e,t){return e}var tp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},np=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return $(n)}(be),rp=$((function e(){var t=this;H(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ip=$((function e(t,n){H(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ap=function(){function e(){H(this,e)}return $(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),op=function(){function e(t){H(this,e),this.token=t,this.changeListener=null}return $(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),up=function(){function e(t){H(this,e),this.t=t,this.currentUser=Kd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return $(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new rp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new rp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Qd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Qd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new rp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Qd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Zd("string"==typeof n.accessToken),new ip(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Zd(null===e||"string"==typeof e),new Kd(e)}}]),e}(),sp=$((function e(t,n,r){H(this,e),this.type="FirstParty",this.user=Kd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),cp=function(){function e(t,n,r){H(this,e),this.h=t,this.l=n,this.m=r}return $(e,[{key:"getToken",value:function(){return Promise.resolve(new sp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),lp=$((function e(t){H(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),fp=function(){function e(t){H(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return $(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Qd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Qd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Qd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Qd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Zd("string"==typeof t.token),e.p=t.token,new lp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function hp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var dp=function(){function e(){H(this,e)}return $(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=hp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function pp(e,t){return e<t?-1:e>t?1:0}function vp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function mp(e){return e+"\0"}var yp=function(){function e(t,n){if(H(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new np(tp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new np(tp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new np(tp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new np(tp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return $(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?pp(this.nanoseconds,e.nanoseconds):pp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),gp=function(){function e(t){H(this,e),this.timestamp=t}return $(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new yp(0,0))}},{key:"max",value:function(){return new e(new yp(253402300799,999999999))}}]),e}(),kp=function(){function e(t,n,r){H(this,e),void 0===n?n=0:n>t.length&&Xd(),void 0===r?r=t.length-n:r>t.length-n&&Xd(),this.segments=t,this.offset=n,this.len=r}return $(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),wp=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new np(tp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Me(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kp),bp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xp=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return bp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new np(tp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new np(tp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new np(tp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new np(tp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kp),_p=function(){function e(t){H(this,e),this.path=t}return $(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===wp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(wp.fromString(t))}},{key:"fromName",value:function(t){return new e(wp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(wp.emptyPath())}},{key:"comparator",value:function(e,t){return wp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new wp(t.slice()))}}]),e}(),Ip=$((function e(t,n,r,i){H(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ep(e){return e.fields.find((function(e){return 2===e.kind}))}function Tp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Ip.UNKNOWN_ID=-1;var Sp=$((function e(t,n){H(this,e),this.fieldPath=t,this.kind=n}));var Cp=function(){function e(t,n){H(this,e),this.sequenceNumber=t,this.offset=n}return $(e,null,[{key:"empty",value:function(){return new e(0,Dp.min())}}]),e}();function Np(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=gp.fromTimestamp(1e9===r?new yp(n+1,0):new yp(n,r));return new Dp(i,_p.empty(),t)}function Ap(e){return new Dp(e.readTime,e.key,-1)}var Dp=function(){function e(t,n,r){H(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return $(e,null,[{key:"min",value:function(){return new e(gp.min(),_p.empty(),-1)}},{key:"max",value:function(){return new e(gp.max(),_p.empty(),-1)}}]),e}();function Op(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=_p.comparator(e.documentKey,t.documentKey))?n:pp(e.largestBatchId,t.largestBatchId)}var Rp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pp=function(){function e(){H(this,e),this.onCommittedListeners=[]}return $(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Lp(e){return Mp.apply(this,arguments)}function Mp(){return Mp=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===tp.FAILED_PRECONDITION&&t.message===Rp){e.next=2;break}throw t;case 2:Qd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}var Fp=function(){function e(t){var n=this;H(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return $(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Xd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=J(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Vp=function(){function e(t,n){var r=this;H(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new rp,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Bp(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=Wp(e.target.error);r.T.reject(new Bp(t,n))}}return $(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(Qd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new zp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Bp(n,t)}}}]),e}(),Up=function(){function e(t,n,r){H(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(pe())&&$d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return $(e,[{key:"k",value:function(){var e=Ve(je().mark((function e(t){var n=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Qd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Bp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new np(tp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new np(tp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Bp(t,n))},i.onupgradeneeded=function(e){Qd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.M(t,i.transaction,e.oldVersion,n.version).next((function(){Qd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.O&&(this.db.onversionchange=function(e){return n.O(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.O=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ve(je().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(je().mark((function e(){var n,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Vp.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Fp.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Qd("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Qd("SimpleDb","Removing database:",e),Kp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!we())return!1;if(e.S())return!0;var t=pe(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),jp=function(){function e(t){H(this,e),this.$=t,this.B=!1,this.L=null}return $(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Kp(this.$.delete())}}]),e}(),Bp=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,tp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return $(n)}(np);function qp(e){return"IndexedDbTransactionError"===e.name}var zp=function(){function e(t){H(this,e),this.store=t}return $(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Qd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Kp(n)}},{key:"add",value:function(e){return Qd("SimpleDb","ADD",this.store.name,e,e),Kp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Kp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Qd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Qd("SimpleDb","DELETE",this.store.name,e),Kp(this.store.delete(e))}},{key:"count",value:function(){return Qd("SimpleDb","COUNT",this.store.name),Kp(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Fp((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Fp((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){Qd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Fp((function(n,r){t.onerror=function(e){var t=Wp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Fp((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new jp(i),o=t(i.primaryKey,i.value,a);if(o instanceof Fp){var u=o.catch((function(e){return a.done(),Fp.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Fp.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Kp(e){return new Fp((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Wp(e.target.error);n(t)}}))}var Gp=!1;function Wp(e){var t=Up.v(pe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new np("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Gp||(Gp=!0,setTimeout((function(){throw r}),0)),r}}return e}var Hp=function(){function e(t,n){H(this,e),this.asyncQueue=t,this.X=n,this.task=null}return $(e,[{key:"start",value:function(){this.Z(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;Qd("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Qd,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!qp(e.t4)){e.next=17;break}Qd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Lp(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Qp=function(){function e(t,n){H(this,e),this.localStore=t,this.persistence=n}return $(e,[{key:"tt",value:function(){var e=Ve(je().mark((function e(){var t,n=this,r=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Fp.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Qd("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return Qd("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ap(t);Op(r,n)>0&&(n=r)})),new Dp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),$p=function(){function e(t,n){var r=this;H(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return $(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function Jp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}$p.ot=-1;var Zp=function(){function e(t,n){H(this,e),this.comparator=t,this.root=n||tv.EMPTY}return $(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ev(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ev(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ev(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ev(this.root,e,this.comparator,!0)}}]),e}(),ev=function(){function e(t,n,r,i){H(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return $(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),tv=function(){function e(t,n,r,i,a){H(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return $(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Xd();if(this.right.isRed())throw Xd();var e=this.left.check();if(e!==this.right.check())throw Xd();return e+(this.isRed()?0:1)}}]),e}();tv.EMPTY=null,tv.RED=!0,tv.BLACK=!1,tv.EMPTY=new(function(){function e(){H(this,e),this.size=0}return $(e,[{key:"key",get:function(){throw Xd()}},{key:"value",get:function(){throw Xd()}},{key:"color",get:function(){throw Xd()}},{key:"left",get:function(){throw Xd()}},{key:"right",get:function(){throw Xd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new tv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var nv=function(){function e(t){H(this,e),this.comparator=t,this.data=new Zp(this.comparator)}return $(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new rv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new rv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),rv=function(){function e(t){H(this,e),this.iter=t}return $(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function iv(e){return e.hasNext()?e.getNext():void 0}var av=function(){function e(t){H(this,e),this.fields=t,t.sort(xp.comparator)}return $(e,[{key:"unionWith",value:function(t){var n,r=new nv(xp.comparator),i=J(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=J(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=J(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return vp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var ov=function(e){function t(e){H(this,t),this.binaryString=e}return $(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return pp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ov.EMPTY_BYTE_STRING=new ov("");var uv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sv(e){if(Zd(!!e),"string"==typeof e){var t=0,n=uv.exec(e);if(Zd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:cv(e.seconds),nanos:cv(e.nanos)}}function cv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lv(e){return"string"==typeof e?ov.fromBase64String(e):ov.fromUint8Array(e)}function fv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hv(e){var t=e.mapValue.fields.__previous_value__;return fv(t)?hv(t):t}function dv(e){var t=sv(e.mapValue.fields.__local_write_time__.timestampValue);return new yp(t.seconds,t.nanos)}var pv=$((function e(t,n,r,i,a,o,u,s){H(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),vv=function(){function e(t,n){H(this,e),this.projectId=t,this.database=n||"(default)"}return $(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function mv(e){return null==e}function yv(e){return 0===e&&1/e==-1/0}function gv(e){return"number"==typeof e&&Number.isInteger(e)&&!yv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var kv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wv={nullValue:"NULL_VALUE"};function bv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fv(e)?4:Lv(e)?9007199254740991:10:Xd()}function xv(e,t){if(e===t)return!0;var n=bv(e);if(n!==bv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dv(e).isEqual(dv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=sv(e.timestampValue),r=sv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return lv(e.bytesValue).isEqual(lv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cv(e.geoPointValue.latitude)===cv(t.geoPointValue.latitude)&&cv(e.geoPointValue.longitude)===cv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cv(e.integerValue)===cv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=cv(e.doubleValue),r=cv(t.doubleValue);return n===r?yv(n)===yv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vp(e.arrayValue.values||[],t.arrayValue.values||[],xv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Jp(n)!==Jp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xv(n[i],r[i])))return!1;return!0}(e,t);default:return Xd()}}function _v(e,t){return void 0!==(e.values||[]).find((function(e){return xv(e,t)}))}function Iv(e,t){if(e===t)return 0;var n=bv(e),r=bv(t);if(n!==r)return pp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=cv(e.integerValue||e.doubleValue),r=cv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ev(e.timestampValue,t.timestampValue);case 4:return Ev(dv(e),dv(t));case 5:return pp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lv(e),r=lv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=pp(n[i],r[i]);if(0!==a)return a}return pp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=pp(cv(e.latitude),cv(t.latitude));return 0!==n?n:pp(cv(e.longitude),cv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Iv(n[i],r[i]);if(a)return a}return pp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===kv.mapValue&&t===kv.mapValue)return 0;if(e===kv.mapValue)return 1;if(t===kv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=pp(r[o],a[o]);if(0!==u)return u;var s=Iv(n[r[o]],i[a[o]]);if(0!==s)return s}return pp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Xd()}}function Ev(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pp(e,t);var n=sv(e),r=sv(t),i=pp(n.seconds,r.seconds);return 0!==i?i:pp(n.nanos,r.nanos)}function Tv(e){return Sv(e)}function Sv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=sv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,_p.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=J(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Sv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=J(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Sv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Xd();var t,n}function Cv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Nv(e){return!!e&&"integerValue"in e}function Av(e){return!!e&&"arrayValue"in e}function Dv(e){return!!e&&"nullValue"in e}function Ov(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Rv(e){return!!e&&"mapValue"in e}function Pv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Yp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Pv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Pv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Lv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mv(e){return"nullValue"in e?wv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Cv(vv.empty(),_p.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Xd()}function Fv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Cv(vv.empty(),_p.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?kv:Xd()}function Vv(e,t){var n=Iv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Uv(e,t){var n=Iv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var jv=function(){function e(t){H(this,e),this.value=t}return $(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Rv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pv(t)}},{key:"setAll",value:function(e){var t=this,n=xp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Pv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Rv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return xv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Rv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Yp(t,(function(t,n){return e[t]=n}));var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Pv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Bv(e){var t=[];return Yp(e.fields,(function(e,n){var r=new xp([e]);if(Rv(n)){var i=Bv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=J(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new av(t)}var qv=function(){function e(t,n,r,i,a,o){H(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return $(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=jv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=jv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=gp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,gp.min(),gp.min(),jv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,gp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,gp.min(),jv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,gp.min(),jv.empty(),2)}}]),e}(),zv=$((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;H(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function Kv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new zv(e,t,n,r,i,a,o)}function Gv(e){var t=ep(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Tv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),mv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Tv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Tv(e)})).join(",")),t.ut=n}return t.ut}function Wv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!sm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!xv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lm(e.startAt,t.startAt)&&lm(e.endAt,t.endAt)}function Hv(e){return _p.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Qv(e,t){return e.filters.filter((function(e){return e instanceof Yv&&e.field.isEqual(t)}))}function $v(e,t,n){var r,i=wv,a=!0,o=J(Qv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=wv,c=!0;switch(u.op){case"<":case"<=":s=Mv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=wv}Vv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Vv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Jv(e,t,n){var r,i=kv,a=!0,o=J(Qv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=kv,c=!0;switch(u.op){case">=":case">":s=Fv(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=kv}Uv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Uv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Yv=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return $(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Iv(t,this.value)):null!==t&&bv(this.value)===bv(t)&&this.at(Iv(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xd()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Xv(e,t,r):"array-contains"===t?new nm(e,r):"in"===t?new rm(e,r):"not-in"===t?new im(e,r):"array-contains-any"===t?new am(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Zv(e,n):new em(e,n)}}]),n}(function(){return $((function e(){H(this,e)}))}()),Xv=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this,e,r,i)).key=_p.fromName(i.referenceValue),a}return $(n,[{key:"matches",value:function(e){var t=_p.comparator(e.key,this.key);return this.at(t)}}]),n}(Yv),Zv=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e,"in",r)).keys=tm("in",r),i}return $(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yv),em=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e,"not-in",r)).keys=tm("not-in",r),i}return $(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yv);function tm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return _p.fromName(e.referenceValue)}))}var nm=function(e){Z(n,e);var t=ie(n);function n(e,r){return H(this,n),t.call(this,e,"array-contains",r)}return $(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Av(t)&&_v(t.arrayValue,this.value)}}]),n}(Yv),rm=function(e){Z(n,e);var t=ie(n);function n(e,r){return H(this,n),t.call(this,e,"in",r)}return $(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&_v(this.value.arrayValue,t)}}]),n}(Yv),im=function(e){Z(n,e);var t=ie(n);function n(e,r){return H(this,n),t.call(this,e,"not-in",r)}return $(n,[{key:"matches",value:function(e){if(_v(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!_v(this.value.arrayValue,t)}}]),n}(Yv),am=function(e){Z(n,e);var t=ie(n);function n(e,r){return H(this,n),t.call(this,e,"array-contains-any",r)}return $(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Av(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return _v(t.value.arrayValue,e)}))}}]),n}(Yv),om=$((function e(t,n){H(this,e),this.position=t,this.inclusive=n})),um=$((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";H(this,e),this.field=t,this.dir=n}));function sm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function cm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?_p.comparator(_p.fromName(o.referenceValue),n.key):Iv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function lm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!xv(e.position[n],t.position[n]))return!1;return!0}var fm=$((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;H(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function hm(e,t,n,r,i,a,o,u){return new fm(e,t,n,r,i,a,o,u)}function dm(e){return new fm(e)}function pm(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function mm(e){var t,n=J(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ym(e){return null!==e.collectionGroup}function gm(e){var t=ep(e);if(null===t.lt){t.lt=[];var n=mm(t),r=vm(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new um(n)),t.lt.push(new um(xp.keyField(),"asc"));else{var i,a=!1,o=J(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new um(xp.keyField(),s))}}}return t.lt}function km(e){var t=ep(e);if(!t.ft)if("F"===t.limitType)t.ft=Kv(t.path,t.collectionGroup,gm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=J(gm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new um(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new om(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new om(t.startAt.position,t.startAt.inclusive):null;t.ft=Kv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function wm(e,t,n){return new fm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bm(e,t){return Wv(km(e),km(t))&&e.limitType===t.limitType}function xm(e){return"".concat(Gv(km(e)),"|lt:").concat(e.limitType)}function _m(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Tv(t.value));var t})).join(", "),"]")),mv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Tv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Tv(e)})).join(",")),"Target(".concat(t,")")}(km(e)),"; limitType=").concat(e.limitType,")")}function Im(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):_p.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=J(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=J(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=cm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gm(e),t))&&!(e.endAt&&!function(e,t,n){var r=cm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gm(e),t))}(e,t)}function Em(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Tm(e){return function(t,n){var r,i=!1,a=J(gm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Sm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Sm(e,t,n){var r=e.field.isKeyField()?_p.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Iv(r,i):Xd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xd()}}function Cm(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yv(t)?"-0":t}}function Nm(e){return{integerValue:""+e}}function Am(e,t){return gv(t)?Nm(t):Cm(e,t)}var Dm=$((function e(){H(this,e),this._=void 0}));function Om(e,t,n){return e instanceof Lm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mm?Fm(e,t):e instanceof Vm?Um(e,t):function(e,t){var n=Pm(e,t),r=Bm(n)+Bm(e._t);return Nv(n)&&Nv(e._t)?Nm(r):Cm(e.wt,r)}(e,t)}function Rm(e,t,n){return e instanceof Mm?Fm(e,t):e instanceof Vm?Um(e,t):n}function Pm(e,t){return e instanceof jm?Nv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Lm=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n)}(Dm),Mm=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this)).elements=e,r}return $(n)}(Dm);function Fm(e,t){var n,r=qm(t),i=J(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return xv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vm=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this)).elements=e,r}return $(n)}(Dm);function Um(e,t){var n,r=qm(t),i=J(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!xv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var jm=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this)).wt=e,i._t=r,i}return $(n)}(Dm);function Bm(e){return cv(e.integerValue||e.doubleValue)}function qm(e){return Av(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var zm=$((function e(t,n){H(this,e),this.field=t,this.transform=n}));var Km=$((function e(t,n){H(this,e),this.version=t,this.transformResults=n})),Gm=function(){function e(t,n){H(this,e),this.updateTime=t,this.exists=n}return $(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Wm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Hm=$((function e(){H(this,e)}));function Qm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new oy(e.key,Gm.none()):new Zm(e.key,e.data,Gm.none());var n,r=e.data,i=jv.empty(),a=new nv(xp.comparator),o=J(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new ey(e.key,i,new av(a.toArray()),Gm.none())}function $m(e,t,n){e instanceof Zm?function(e,t,n){var r=e.value.clone(),i=ny(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ey?function(e,t,n){if(Wm(e.precondition,t)){var r=ny(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ty(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Jm(e,t,n,r){return e instanceof Zm?function(e,t,n,r){if(!Wm(e.precondition,t))return n;var i=e.value.clone(),a=ry(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ey?function(e,t,n,r){if(!Wm(e.precondition,t))return n;var i=ry(e.fieldTransforms,r,t),a=t.data;return a.setAll(ty(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Wm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ym(e,t){var n,r=null,i=J(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Pm(a.transform,o||null);null!=u&&(null===r&&(r=jv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Xm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&vp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mm&&t instanceof Mm||e instanceof Vm&&t instanceof Vm?vp(e.elements,t.elements,xv):e instanceof jm&&t instanceof jm?xv(e._t,t._t):e instanceof Lm&&t instanceof Lm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Zm=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return H(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return $(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hm),ey=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return H(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return $(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Hm);function ty(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ny(e,t,n){var r=new Map;Zd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Rm(o,u,n[i]))}return r}function ry(e,t,n){var r,i=new Map,a=J(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Om(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var iy,ay,oy=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return $(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hm),uy=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return $(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hm),sy=$((function e(t){H(this,e),this.count=t}));function cy(e){switch(e){default:return Xd();case tp.CANCELLED:case tp.UNKNOWN:case tp.DEADLINE_EXCEEDED:case tp.RESOURCE_EXHAUSTED:case tp.INTERNAL:case tp.UNAVAILABLE:case tp.UNAUTHENTICATED:return!1;case tp.INVALID_ARGUMENT:case tp.NOT_FOUND:case tp.ALREADY_EXISTS:case tp.PERMISSION_DENIED:case tp.FAILED_PRECONDITION:case tp.ABORTED:case tp.OUT_OF_RANGE:case tp.UNIMPLEMENTED:case tp.DATA_LOSS:return!0}}function ly(e){if(void 0===e)return $d("GRPC error has no .code"),tp.UNKNOWN;switch(e){case iy.OK:return tp.OK;case iy.CANCELLED:return tp.CANCELLED;case iy.UNKNOWN:return tp.UNKNOWN;case iy.DEADLINE_EXCEEDED:return tp.DEADLINE_EXCEEDED;case iy.RESOURCE_EXHAUSTED:return tp.RESOURCE_EXHAUSTED;case iy.INTERNAL:return tp.INTERNAL;case iy.UNAVAILABLE:return tp.UNAVAILABLE;case iy.UNAUTHENTICATED:return tp.UNAUTHENTICATED;case iy.INVALID_ARGUMENT:return tp.INVALID_ARGUMENT;case iy.NOT_FOUND:return tp.NOT_FOUND;case iy.ALREADY_EXISTS:return tp.ALREADY_EXISTS;case iy.PERMISSION_DENIED:return tp.PERMISSION_DENIED;case iy.FAILED_PRECONDITION:return tp.FAILED_PRECONDITION;case iy.ABORTED:return tp.ABORTED;case iy.OUT_OF_RANGE:return tp.OUT_OF_RANGE;case iy.UNIMPLEMENTED:return tp.UNIMPLEMENTED;case iy.DATA_LOSS:return tp.DATA_LOSS;default:return Xd()}}(ay=iy||(iy={}))[ay.OK=0]="OK",ay[ay.CANCELLED=1]="CANCELLED",ay[ay.UNKNOWN=2]="UNKNOWN",ay[ay.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ay[ay.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ay[ay.NOT_FOUND=5]="NOT_FOUND",ay[ay.ALREADY_EXISTS=6]="ALREADY_EXISTS",ay[ay.PERMISSION_DENIED=7]="PERMISSION_DENIED",ay[ay.UNAUTHENTICATED=16]="UNAUTHENTICATED",ay[ay.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ay[ay.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ay[ay.ABORTED=10]="ABORTED",ay[ay.OUT_OF_RANGE=11]="OUT_OF_RANGE",ay[ay.UNIMPLEMENTED=12]="UNIMPLEMENTED",ay[ay.INTERNAL=13]="INTERNAL",ay[ay.UNAVAILABLE=14]="UNAVAILABLE",ay[ay.DATA_LOSS=15]="DATA_LOSS";var fy=function(){function e(t,n){H(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return $(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Yp(this.inner,(function(t,n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Xp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),hy=new Zp(_p.comparator);function dy(){return hy}var py=new Zp(_p.comparator);function vy(){for(var e=py,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function my(e){var t=py;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function yy(){return ky()}function gy(){return ky()}function ky(){return new fy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var wy=new Zp(_p.comparator),by=new nv(_p.comparator);function xy(){for(var e=by,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _y=new nv(pp);function Iy(){return _y}var Ey=function(){function e(t,n,r,i,a){H(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return $(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ty.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(gp.min(),r,Iy(),dy(),xy())}}]),e}(),Ty=function(){function e(t,n,r,i,a){H(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return $(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(ov.EMPTY_BYTE_STRING,n,xy(),xy(),xy())}}]),e}(),Sy=$((function e(t,n,r,i){H(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),Cy=$((function e(t,n){H(this,e),this.targetId=t,this.It=n})),Ny=$((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ov.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;H(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ay=function(){function e(){H(this,e),this.Tt=0,this.Et=Ry(),this.At=ov.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return $(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=xy(),t=xy(),n=xy();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xd()}})),new Ty(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Ry()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Dy=function(){function e(t){H(this,e),this.Ot=t,this.Ft=new Map,this.$t=dy(),this.Bt=Oy(),this.Lt=new nv(pp)}return $(e,[{key:"Ut",value:function(e){var t,n=J(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=J(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Xd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Hv(i))if(0===n){var a=new _p(i.path);this.Kt(t,a,qv.newNoDocument(a,gp.min()))}else Zd(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Hv(a.target)){var o=new _p(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,qv.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=xy();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ey(e,n,this.Lt,this.$t,r);return this.$t=dy(),this.Bt=Oy(),this.Lt=new nv(pp),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Ay,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new nv(pp),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Qd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Ay),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function Oy(){return new Zp(_p.comparator)}function Ry(){return new Zp(_p.comparator)}var Py={asc:"ASCENDING",desc:"DESCENDING"},Ly={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},My=$((function e(t,n){H(this,e),this.databaseId=t,this.dt=n}));function Fy(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vy(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Uy(e,t){return Fy(e,t.toTimestamp())}function jy(e){return Zd(!!e),gp.fromTimestamp(function(e){var t=sv(e);return new yp(t.seconds,t.nanos)}(e))}function By(e,t){return function(e){return new wp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qy(e){var t=wp.fromString(e);return Zd(fg(t)),t}function zy(e,t){return By(e.databaseId,t.path)}function Ky(e,t){var n=qy(t);if(n.get(1)!==e.databaseId.projectId)throw new np(tp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new np(tp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new _p(Qy(n))}function Gy(e,t){return By(e.databaseId,t)}function Wy(e){var t=qy(e);return 4===t.length?wp.emptyPath():Qy(t)}function Hy(e){return new wp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qy(e){return Zd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function $y(e,t,n){return{name:zy(e,t),fields:n.value.mapValue.fields}}function Jy(e,t,n){var r=Ky(e,t.name),i=jy(t.updateTime),a=new jv({mapValue:{fields:t.fields}}),o=qv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Yy(e,t){return"found"in t?function(e,t){Zd(!!t.found),t.found.name,t.found.updateTime;var n=Ky(e,t.found.name),r=jy(t.found.updateTime),i=new jv({mapValue:{fields:t.found.fields}});return qv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Zd(!!t.missing),Zd(!!t.readTime);var n=Ky(e,t.missing),r=jy(t.readTime);return qv.newNoDocument(n,r)}(e,t):Xd()}function Xy(e,t){var n;if(t instanceof Zm)n={update:$y(e,t.key,t.value)};else if(t instanceof oy)n={delete:zy(e,t.key)};else if(t instanceof ey)n={update:$y(e,t.key,t.data),updateMask:lg(t.fieldMask)};else{if(!(t instanceof uy))return Xd();n={verify:zy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Lm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jm)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Xd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xd()}(e,t.precondition)),n}function Zy(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gm.updateTime(jy(e.updateTime)):void 0!==e.exists?Gm.exists(e.exists):Gm.none()}(t.currentDocument):Gm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Zd("REQUEST_TIME"===t.setToServerValue),n=new Lm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Mm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Vm(i)}else"increment"in t?n=new jm(e,t.increment):Xd();var a=xp.fromServerFormat(t.fieldPath);return new zm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ky(e,t.update.name),a=new jv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new av(t.map((function(e){return xp.fromServerFormat(e)})))}(t.updateMask);return new ey(i,a,o,n,r)}return new Zm(i,a,n,r)}if(t.delete){var u=Ky(e,t.delete);return new oy(u,n)}if(t.verify){var s=Ky(e,t.verify);return new uy(s,n)}return Xd()}function eg(e,t){return{documents:[Gy(e,t.path)]}}function tg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Gy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Gy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ov(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NAN"}};if(Dv(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ov(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NOT_NAN"}};if(Dv(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:og(e.field),op:ag(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:og(e.field),direction:ig(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||mv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ng(e){var t=Wy(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=rg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new um(ug(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return mv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new om(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new om(n,t)}(n.endAt)),hm(t,i,u,o,s,"F",c,l)}function rg(e){return e?void 0!==e.unaryFilter?[cg(e)]:void 0!==e.fieldFilter?[sg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return rg(e)})).reduce((function(e,t){return e.concat(t)})):Xd():[]}function ig(e){return Py[e]}function ag(e){return Ly[e]}function og(e){return{fieldPath:e.canonicalString()}}function ug(e){return xp.fromServerFormat(e.fieldPath)}function sg(e){return Yv.create(ug(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xd()}}(e.fieldFilter.op),e.fieldFilter.value)}function cg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ug(e.unaryFilter.field);return Yv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ug(e.unaryFilter.field);return Yv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ug(e.unaryFilter.field);return Yv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ug(e.unaryFilter.field);return Yv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xd()}}function lg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function fg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function hg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=pg(t)),t=dg(e.get(n),t);return pg(t)}function dg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function pg(e){return e+"\x01\x01"}function vg(e){var t=e.length;if(Zd(t>=2),2===t)return Zd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),wp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Xd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Xd()}a=o+2}return new wp(r)}var mg=["userId","batchId"];function yg(e,t){return[e,hg(t)]}function gg(e,t,n){return[e,hg(t),n]}var kg={},wg=["prefixPath","collectionGroup","readTime","documentId"],bg=["prefixPath","collectionGroup","documentId"],xg=["collectionGroup","readTime","prefixPath","documentId"],_g=["canonicalId","targetId"],Ig=["targetId","path"],Eg=["path","targetId"],Tg=["collectionId","parent"],Sg=["indexId","uid"],Cg=["uid","sequenceNumber"],Ng=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ag=["indexId","uid","orderedDocumentKey"],Dg=["userId","collectionPath","documentId"],Og=["userId","collectionPath","largestBatchId"],Rg=["userId","collectionGroup","largestBatchId"],Pg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Lg=[].concat(Me(Pg),["documentOverlays"]),Mg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fg=Mg,Vg=[].concat(Fg,["indexConfiguration","indexState","indexEntries"]),Ug=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return $(n)}(Pp);function jg(e,t){var n=ep(e);return Up.N(n.ee,t)}var Bg=function(){function e(t,n,r,i){H(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return $(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&$m(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=J(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Jm(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=J(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Jm(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=gy();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Qm(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(gp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),xy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&vp(this.mutations,e.mutations,(function(e,t){return Xm(e,t)}))&&vp(this.baseMutations,e.baseMutations,(function(e,t){return Xm(e,t)}))}}]),e}(),qg=function(){function e(t,n,r,i){H(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return $(e,null,[{key:"from",value:function(t,n,r){Zd(t.mutations.length===r.length);for(var i=wy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),zg=function(){function e(t,n){H(this,e),this.largestBatchId=t,this.mutation=n}return $(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Kg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ov.EMPTY_BYTE_STRING;H(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return $(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Gg=$((function e(t){H(this,e),this.ne=t}));function Wg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Fy(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Qg(t.version)};else{if(!t.isUnknownDocument())return Xd();r.unknownDocument={path:n.path.toArray(),version:Qg(t.version)}}return r}function Hg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Qg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $g(e){var t=new yp(e.seconds,e.nanoseconds);return gp.fromTimestamp(t)}function Jg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Zy(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Zy(e.ne,t)})),u=yp.fromMillis(t.localWriteTimeMs);return new Bg(t.batchId,u,n,o)}function Yg(e){var t,n,r=$g(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?$g(e.lastLimboFreeSnapshotVersion):gp.min();return void 0!==e.query.documents?(Zd(1===(n=e.query).documents.length),t=km(dm(Wy(n.documents[0])))):t=function(e){return km(ng(e))}(e.query),new Kg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,ov.fromBase64String(e.resumeToken))}function Xg(e,t){var n,r=Qg(t.snapshotVersion),i=Qg(t.lastLimboFreeSnapshotVersion);n=Hv(t.target)?eg(e.ne,t.target):tg(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Gv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Zg(e){var t=ng({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wm(t,t.limit,"L"):t}function ek(e,t){return new zg(t.largestBatchId,Zy(e.ne,t.overlayMutation))}function tk(e,t){var n=t.path.lastSegment();return[e,hg(t.path.popLast()),n]}function nk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Qg(r.readTime),documentKey:hg(r.documentKey.path),largestBatchId:r.largestBatchId}}var rk=function(){function e(){H(this,e)}return $(e,[{key:"getBundleMetadata",value:function(e,t){return ik(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:$g(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return ik(e).put({bundleId:(n=t).id,createTime:Qg(jy(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ak(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Zg(t.bundledQuery),readTime:$g(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ak(e).put(function(e){return{name:e.name,readTime:Qg(jy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function ik(e){return jg(e,"bundles")}function ak(e){return jg(e,"namedQueries")}var ok=function(){function e(t,n){H(this,e),this.wt=t,this.userId=n}return $(e,[{key:"getOverlay",value:function(e,t){var n=this;return uk(e).get(tk(this.userId,t)).next((function(e){return e?ek(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=yy();return Fp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new zg(t,a);i.push(r.ie(e,o))})),Fp.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(hg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(uk(e).W("collectionPathOverlayIndex",i))})),Fp.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=yy(),a=hg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return uk(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ek(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=yy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uk(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ek(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return uk(e).put(function(e,t,n){var r=s(tk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Xy(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function uk(e){return jg(e,"documentOverlays")}var sk=function(){function e(){H(this,e)}return $(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(cv(e.integerValue));else if("doubleValue"in e){var n=cv(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),yv(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(lv(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Lv(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Xd()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),_p.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function ck(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function lk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ck(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}sk.ye=new sk;var fk=function(){function e(){H(this,e),this.buffer=new Uint8Array(1024),this.position=0}return $(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=lk(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=lk(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Me",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),hk=function(){function e(t){H(this,e),this.Oe=t}return $(e,[{key:"de",value:function(e){this.Oe.pe(e)}},{key:"he",value:function(e){this.Oe.be(e)}},{key:"ae",value:function(e){this.Oe.ve(e)}},{key:"ue",value:function(){this.Oe.Ce()}}]),e}(),dk=function(){function e(t){H(this,e),this.Oe=t}return $(e,[{key:"de",value:function(e){this.Oe.Ee(e)}},{key:"he",value:function(e){this.Oe.Pe(e)}},{key:"ae",value:function(e){this.Oe.De(e)}},{key:"ue",value:function(){this.Oe.Ne()}}]),e}(),pk=function(){function e(){H(this,e),this.Oe=new fk,this.Fe=new hk(this.Oe),this.$e=new dk(this.Oe)}return $(e,[{key:"seed",value:function(e){this.Oe.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Me",value:function(){return this.Oe.Me()}},{key:"reset",value:function(){this.Oe.reset()}}]),e}(),vk=function(){function e(t,n,r,i){H(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return $(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function mk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=yk(e.arrayValue,t.arrayValue))?n:0!==(n=yk(e.directionalValue,t.directionalValue))?n:_p.comparator(e.documentKey,t.documentKey)}function yk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var gk=function(){function e(t){H(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=J(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return $(e,[{key:"Ge",value:function(e){var t=Ep(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Tp(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=J(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),kk=function(){function e(){H(this,e),this.ze=new wk}return $(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Fp.resolve()}},{key:"getCollectionParents",value:function(e,t){return Fp.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Fp.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Fp.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Fp.resolve(null)}},{key:"getIndexType",value:function(e,t){return Fp.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Fp.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Fp.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Fp.resolve(Dp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Fp.resolve(Dp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Fp.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Fp.resolve()}}]),e}(),wk=function(){function e(){H(this,e),this.index={}}return $(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nv(wp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new nv(wp.comparator)).toArray()}}]),e}(),bk=new Uint8Array(0),xk=function(){function e(t,n){H(this,e),this.user=t,this.databaseId=n,this.He=new wk,this.Je=new fy((function(e){return Gv(e)}),(function(e,t){return Wv(e,t)})),this.uid=t.uid||""}return $(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:hg(i)};return _k(e).put(a)}return Fp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[mp(t),""],!1,!0);return _k(e).K(r).next((function(e){var r,i=J(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(vg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Ek(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Tk(e);return a.next((function(e){o.put(nk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ek(e),r=Tk(e),i=Ik(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Ik(e),i=!0,a=new Map;return Fp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=xy(),o=[];return Fp.forEach(a,(function(i,a){var u;Qd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Gv(t)));var s=function(e,t){var n=Ep(t);if(void 0===n)return null;var r,i=J(Qv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=J(Tp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=J(Qv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=J(Tp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?$v(e,o.fieldPath,e.startAt):Jv(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new om(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=J(Tp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Jv(e,o.fieldPath,e.endAt):$v(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new om(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Fp.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=_p.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Fp.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):bk,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,Me(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new vk(e,_p.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new vk(e,_p.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new gk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=J(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Fp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new nv(xp.comparator),r=!1,i=J(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=J(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new pk,i=J(Tp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);sk.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Me()}},{key:"nn",value:function(e){var t=new pk;return sk.ye.re(e,t.Be(0)),t.Me()}},{key:"un",value:function(e,t){var n=new pk;return sk.ye.re(Cv(this.databaseId,t),n.Be(function(e){var t=Tp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Me()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new pk);var i,a=0,o=J(Tp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=J(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Av(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);sk.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Me();return t}},{key:"an",value:function(e,t,n){var r,i=Me(e),a=[],o=J(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=J(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new pk;f.seed(l.Me()),sk.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Yv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ek(e),i=Tk(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Fp.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Cp(t.sequenceNumber,new Dp($g(t.readTime),new _p(vg(t.documentKey)),t.largestBatchId)):Cp.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Sp(xp.fromServerFormat(n),r)}));return new Ip(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:pp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ek(e),a=Tk(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Fp.forEach(t,(function(t){return a.put(nk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Fp.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Fp.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Fp.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Fp.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Ik(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Ik(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Ik(e),i=new nv(mk);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new vk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new nv(mk),r=this.on(t,e);if(null==r)return n;var i=Ep(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Av(a)){var o,u=J(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new vk(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new vk(t.indexId,e.key,bk,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Qd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=iv(a),s=iv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=iv(o)):l?(i(u),u=iv(a)):(u=iv(a),s=iv(o))}}(r,i,mk,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Fp.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Tk(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return mk(e,t)})).filter((function(e,t,n){return!t||0!==mk(e,n[t-1])}));var r=[];r.push(e);var i,a=J(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=mk(o,e),s=mk(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,bk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,bk,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Sk)}},{key:"getMinOffset",value:function(e,t){var n=this;return Fp.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||Xd()}))})).next(Sk)}}]),e}();function _k(e){return jg(e,"collectionParents")}function Ik(e){return jg(e,"indexEntries")}function Ek(e){return jg(e,"indexConfiguration")}function Tk(e){return jg(e,"indexState")}function Sk(e){Zd(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Op(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Dp(t.readTime,t.documentKey,n)}var Ck={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nk=function(){function e(t,n,r){H(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return $(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ak(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Zd(1===u)})));var c,l=[],f=J(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=gg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Fp.waitFor(a).next((function(){return l}))}function Dk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Xd();t=e.noDocument}return JSON.stringify(t).length}Nk.DEFAULT_COLLECTION_PERCENTILE=10,Nk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nk.DEFAULT=new Nk(41943040,Nk.DEFAULT_COLLECTION_PERCENTILE,Nk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nk.DISABLED=new Nk(-1,0,0);var Ok=function(){function e(t,n,r,i){H(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return $(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pk(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Lk(e),o=Pk(e);return o.add({}).next((function(u){Zd("number"==typeof u);var s,c=new Bg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Xy(e.ne,t)})),i=n.mutations.map((function(t){return Xy(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new nv((function(e,t){return pp(e.canonicalString(),t.canonicalString())})),d=J(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=gg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,kg))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Fp.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Pk(e).get(t).next((function(e){return e?(Zd(e.userId===n.userId),Jg(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Fp.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Pk(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Zd(t.batchId>=r),a=Jg(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pk(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pk(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return Jg(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=yg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Lk(e).J({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=vg(l);if(c===n.userId&&t.path.isEqual(h))return Pk(e).get(f).next((function(e){if(!e)throw Xd();Zd(e.userId===n.userId),a.push(Jg(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nv(pp),i=[];return t.forEach((function(t){var a=yg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Lk(e).J({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=vg(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Fp.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=yg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new nv(pp);return Lk(e).J({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=vg(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Pk(e).get(t).next((function(e){if(null===e)throw Xd();Zd(e.userId===n.userId),r.push(Jg(n.wt,e))})))})),Fp.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ak(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Fp.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Fp.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Lk(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=vg(e[1]);i.push(a)}else r.done()})).next((function(){Zd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Rk(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Mk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return Zd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Rk(e,t,n){var r=yg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Lk(e).J({range:a,H:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Pk(e){return jg(e,"mutations")}function Lk(e){return jg(e,"documentMutations")}function Mk(e){return jg(e,"mutationQueues")}var Fk=function(){function e(t){H(this,e),this.En=t}return $(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Vk=function(){function e(t,n){H(this,e),this.referenceDelegate=t,this.wt=n}return $(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new Fk(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return gp.fromTimestamp(new yp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Uk(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return Zd(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Uk(e).J((function(o,u){var s=Yg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Fp.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Uk(e).J((function(e,n){var r=Yg(n);t(r)}))}},{key:"bn",value:function(e){return jk(e).get("targetGlobalKey").next((function(e){return Zd(null!==e),e}))}},{key:"Pn",value:function(e,t){return jk(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Uk(e).put(Xg(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Gv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Uk(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Yg(n);Wv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Bk(e);return t.forEach((function(t){var o=hg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Fp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Bk(e);return Fp.forEach(t,(function(t){var a=hg(t.path);return Fp.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Bk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Bk(e),i=xy();return r.J({range:n,H:!0},(function(e,t,n){var r=vg(e[1]),a=new _p(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=hg(t.path),r=IDBKeyRange.bound([n],[mp(n)],!1,!0),i=0;return Bk(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Uk(e).get(t).next((function(e){return e?Yg(e):null}))}}]),e}();function Uk(e){return jg(e,"targets")}function jk(e){return jg(e,"targetGlobal")}function Bk(e){return jg(e,"targetDocuments")}function qk(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=pp(r,o);return 0===c?pp(i,u):c}var zk=function(){function e(t){H(this,e),this.Sn=t,this.buffer=new nv(qk),this.Dn=0}return $(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();qk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Kk=function(){function e(t,n,r){H(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return $(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;Qd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!qp(e.t0)){e.next=12;break}Qd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Lp(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Gk=function(){function e(t,n){H(this,e),this.Mn=t,this.params=n}return $(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.On(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Fp.resolve($p.ot);var r=new zk(t);return this.Mn.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.Mn.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Qd("LruGarbageCollector","Garbage collection skipped; disabled"),Fp.resolve(Ck)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Qd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Ck):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Qd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Hd()<=Ge.DEBUG&&Qd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Fp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Wk=function(){function e(t,n){H(this,e),this.db=t,this.garbageCollector=function(e,t){return new Gk(e,t)}(this,n)}return $(e,[{key:"On",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Hk(e,n)}},{key:"removeReference",value:function(e,t,n){return Hk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Hk(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Mk(e).Y((function(r){return Rk(e,r,t).next((function(e){return e&&(n=!0),Fp.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,gp.min()),Bk(e).delete([0,hg(o.path)])}))}));i.push(s)}})).next((function(){return Fp.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Hk(e,t)}},{key:"Ln",value:function(e,t){var n,r=Bk(e),i=$p.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==$p.ot&&t(new _p(vg(n)),i),i=c,n=u):i=$p.ot})).next((function(){i!==$p.ot&&t(new _p(vg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Hk(e,t){return Bk(e).put(function(e,t){return{targetId:0,path:hg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Qk=function(){function e(){H(this,e),this.changes=new fy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return $(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,qv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Fp.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),$k=function(){function e(t){H(this,e),this.wt=t}return $(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Zk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Zk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Hg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=qv.newInvalidDocument(t);return Zk(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ew(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:qv.newInvalidDocument(t)};return Zk(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ew(t))},(function(e,i){r={document:n.Kn(t,i),size:Dk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=dy();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=dy(),i=new Zp(_p.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,Dk(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Fp.resolve();var r=new nv(nw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(ew(r.first()),ew(r.last())),a=r.getIterator(),o=a.getNext();return Zk(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=_p.fromSegments([].concat(Me(t.prefixPath),[t.collectionGroup,t.documentId]));o&&nw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(ew(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Hg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zk(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=dy(),i=J(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(_p.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=dy(),o=tw(t,n),u=tw(t,Dp.max());return Zk(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(_p.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Yk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Xk(e).get("remoteDocumentGlobalKey").next((function(e){return Zd(!!e),e}))}},{key:"qn",value:function(e,t){return Xk(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Jy(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=_p.fromSegments(t.noDocument.path),i=$g(t.noDocument.readTime);n=qv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xd();var a=_p.fromSegments(t.unknownDocument.path),o=$g(t.unknownDocument.version);n=qv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new yp(e[0],e[1]);return gp.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(gp.min()))return n}return qv.newInvalidDocument(e)}}]),e}();function Jk(e){return new $k(e)}var Yk=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new fy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return $(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new nv((function(e,t){return pp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Wg(t.zn.wt,o);i=i.add(a.path.popLast());var c=Dk(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Wg(t.zn.wt,o.convertToNoDocument(gp.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Fp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Qk);function Xk(e){return jg(e,"remoteDocumentGlobal")}function Zk(e){return jg(e,"remoteDocumentsV14")}function ew(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function tw(e,t){var n=t.documentKey.path.toArray();return[e,Hg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function nw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=pp(n[a],r[a]))return i;return(i=pp(n.length,r.length))||((i=pp(n[n.length-2],r[r.length-2]))||pp(n[n.length-1],r[r.length-1]))}var rw=$((function e(t,n){H(this,e),this.overlayedDocument=t,this.mutatedFields=n})),iw=function(){function e(t,n,r,i){H(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return $(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Jm(r.mutation,e,av.empty(),yp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,xy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xy(),i=yy();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=vy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=yy();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,xy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=dy(),a=ky(),o=ky();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ey)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Jm(o.mutation,t,o.mutation.getFieldMask(),yp.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new rw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=ky(),i=new Zp((function(e,t){return e-t})),a=xy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=J(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||av.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||xy()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=gy();c.forEach((function(e){if(!a.has(e)){var n=Qm(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Fp.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return _p.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ym(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Fp.resolve(yy()),u=-1,s=a;return o.next((function(t){return Fp.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Fp.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,xy())})).next((function(e){return{batchId:u,changes:my(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new _p(t)).next((function(e){var t=vy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=vy();return this.indexManager.getCollectionParents(e,i).next((function(o){return Fp.forEach(o,(function(o){var u=function(e,t){return new fm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,qv.newInvalidDocument(n)))}));var n=vy();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Jm(a.mutation,i,av.empty(),yp.now()),Im(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Fp.resolve(qv.newInvalidDocument(t))}}]),e}(),aw=function(){function e(t){H(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return $(e,[{key:"getBundleMetadata",value:function(e,t){return Fp.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:jy(n.createTime)}),Fp.resolve()}},{key:"getNamedQuery",value:function(e,t){return Fp.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Zg(e.bundledQuery),readTime:jy(e.readTime)}}(t)),Fp.resolve()}}]),e}(),ow=function(){function e(){H(this,e),this.overlays=new Zp(_p.comparator),this.Xn=new Map}return $(e,[{key:"getOverlay",value:function(e,t){return Fp.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=yy();return Fp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Fp.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Fp.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=yy(),i=t.length+1,a=new _p(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Fp.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Zp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=yy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=yy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Fp.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new zg(t,n));var a=this.Xn.get(t);void 0===a&&(a=xy(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),uw=function(){function e(){H(this,e),this.Zn=new nv(sw.ts),this.es=new nv(sw.ns)}return $(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new sw(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new sw(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new _p(new wp([])),r=new sw(n,e),i=new sw(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new _p(new wp([])),n=new sw(t,e),r=new sw(t,e+1),i=xy();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new sw(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),sw=function(){function e(t,n){H(this,e),this.key=t,this.ls=n}return $(e,null,[{key:"ts",value:function(e,t){return _p.comparator(e.key,t.key)||pp(e.ls,t.ls)}},{key:"ns",value:function(e,t){return pp(e.ls,t.ls)||_p.comparator(e.key,t.key)}}]),e}(),cw=function(){function e(t,n){H(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new nv(sw.ts)}return $(e,[{key:"checkEmpty",value:function(e){return Fp.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Bg(i,t,n,r);this.mutationQueue.push(a);var o,u=J(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new sw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Fp.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Fp.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Fp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Fp.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Fp.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new sw(t,0),i=new sw(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Fp.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nv(pp);return t.forEach((function(e){var t=new sw(e,0),i=new sw(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Fp.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;_p.isDocumentKey(i)||(i=i.child(""));var a=new sw(new _p(i),0),o=new nv(pp);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Fp.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Zd(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Fp.forEach(t.mutations,(function(i){var a=new sw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new sw(t,0),r=this.ds.firstAfterOrEqual(n);return Fp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Fp.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),lw=function(){function e(t){H(this,e),this.ps=t,this.docs=new Zp(_p.comparator),this.size=0}return $(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Fp.resolve(n?n.document.mutableCopy():qv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=dy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():qv.newInvalidDocument(e))})),Fp.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=dy(),i=new _p(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Op(Ap(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Fp.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Xd()}},{key:"Is",value:function(e,t){return Fp.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new fw(this)}},{key:"getSize",value:function(e){return Fp.resolve(this.size)}}]),e}(),fw=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this)).zn=e,r}return $(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Fp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Qk),hw=function(){function e(t){H(this,e),this.persistence=t,this.Ts=new fy((function(e){return Gv(e)}),Wv),this.lastRemoteSnapshotVersion=gp.min(),this.highestTargetId=0,this.Es=0,this.As=new uw,this.targetCount=0,this.Rs=Fk.An()}return $(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Fp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Fp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Fp.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Fp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Fp.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Fk(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Fp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Fp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Fp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Fp.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Fp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Fp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Fp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Fp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Fp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Fp.resolve(n)}},{key:"containsKey",value:function(e,t){return Fp.resolve(this.As.containsKey(t))}}]),e}(),dw=function(){function e(t,n){var r=this;H(this,e),this.bs={},this.overlays={},this.Ps=new $p(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new hw(this),this.indexManager=new kk,this.remoteDocumentCache=new lw((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Gg(n),this.Ds=new aw(this.wt)}return $(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ow,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new cw(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Qd("MemoryPersistence","Starting transaction:",e);var i=new pw(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Fp.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),pw=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return $(n)}(Pp),vw=function(){function e(t){H(this,e),this.persistence=t,this.ks=new uw,this.Ms=null}return $(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw Xd()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Fp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Fp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Fp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fp.forEach(this.Fs,(function(r){var i=_p.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,gp.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Fp.or([function(){return Fp.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}(),mw=function(){function e(t){H(this,e),this.wt=t}return $(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Vp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mg,{unique:!0}),e.createObjectStore("documentMutations")}(e),yw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Fp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),yw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Fp.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Dg});t.createIndex("collectionPathOverlayIndex",Og,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Rg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:wg});t.createIndex("documentKeyIndex",bg),t.createIndex("collectionGroupIndex",xg)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Sg}).createIndex("sequenceNumberIndex",Cg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ng}).createIndex("documentKeyIndex",Ag,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=Dk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Fp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Fp.forEach(r,(function(r){Zd(r.userId===n.userId);var i=Jg(t.wt,r);return Ak(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new wp(n),o=function(e){return[0,hg(e)]}(a);r.push(t.get(o).next((function(n){return n?Fp.resolve():function(n){return t.put({targetId:0,path:hg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Fp.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Tg});var n=t.store("collectionParents"),r=new wk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:hg(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new wp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],vg(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=Yg(r),a=Xg(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new _p(wp.fromString(i.document.name).popFirst(5)):i.noDocument?_p.fromSegments(i.noDocument.path):i.unknownDocument?_p.fromSegments(i.unknownDocument.path):Xd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Fp.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=Jk(this.wt),a=new dw(vw.Os,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:xy();Jg(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Fp.forEach(r,(function(e,r){var o=new Kd(r),u=ok.se(n.wt,o),s=a.getIndexManager(o),c=Ok.se(o,n.wt,s,a.referenceDelegate);return new iw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Ug(t,$p.ot),e).next()}))}))}}]),e}();function yw(e){e.createObjectStore("targetDocuments",{keyPath:Ig}).createIndex("documentTargetsIndex",Eg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_g,{unique:!0}),e.createObjectStore("targetGlobal")}var gw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kw=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(H(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new np(tp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wk(this,i),this.ei=n+"main",this.wt=new Gg(s),this.ni=new Up(this.ei,this.Hs,new mw(this.wt)),this.Vs=new Vk(this.referenceDelegate,this.wt),this.remoteDocumentCache=Jk(this.wt),this.Ds=new rk,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&$d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return $(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new np(tp.FAILED_PRECONDITION,gw);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new $p(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=Ve(je().mark((function n(r){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=Ve(je().mark((function t(n){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return bw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(qp(t))return Qd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Qd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return ww(e).get("owner").next((function(e){return Fp.resolve(t.di(e))}))}},{key:"_i",value:function(e){return bw(e).delete(this.clientId)}},{key:"wi",value:function(){var e=Ve(je().mark((function e(){var t,n,r,i,a=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=jg(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Fp.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=J(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Fp.resolve(!0):ww(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new np(tp.FAILED_PRECONDITION,gw);return!1}}return!(!t.networkEnabled||!t.inForeground)||bw(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Qd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ve(je().mark((function e(){var t=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ug(e,$p.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return bw(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Ok.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new xk(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return ok.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Qd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?Vg:14===i?Fg:13===i?Mg:12===i?Lg:11===i?Pg:void Xd();return this.ni.runTransaction(e,o,u,(function(i){return a=new Ug(i,r.Ps?r.Ps.next():$p.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw $d("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new np(tp.FAILED_PRECONDITION,Rp);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return ww(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new np(tp.FAILED_PRECONDITION,gw)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ww(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=ww(e);return n.get("owner").next((function(e){return t.di(e)?(Qd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Fp.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||($d("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Qd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return $d("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(zc){$d("Failed to set zombie client id.",zc)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(zc){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Up.V()}}]),e}();function ww(e){return jg(e,"owner")}function bw(e){return jg(e,"clientMetadata")}function xw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var _w=function(){function e(t,n,r,i){H(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return $(e,null,[{key:"Vi",value:function(t,n){var r,i=xy(),a=xy(),o=J(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Iw=function(){function e(){H(this,e),this.Si=!1}return $(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(pm(t))return Fp.resolve(null);var r=km(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=wm(t,null,"F"),r=km(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=xy.apply(void 0,Me(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,wm(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return pm(t)||r.isEqual(gp.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(Hd()<=Ge.DEBUG&&Qd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_m(t)),i.Oi(e,o,t,Np(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new nv(Tm(e));return t.forEach((function(t,r){Im(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Hd()<=Ge.DEBUG&&Qd("QueryEngine","Using full collection scan to execute query:",_m(t)),this.Di.getDocumentsMatchingQuery(e,t,Dp.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ew=function(){function e(t,n,r,i){H(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Zp(pp),this.Bi=new fy((function(e){return Gv(e)}),Wv),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return $(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Tw(e,t,n,r){return new Ew(e,t,n,r)}function Sw(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=xy(),s=J(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=J(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=J(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=J(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e,t){var n=ep(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Fp.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Zd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=xy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Aw(e){var t=ep(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Dw(e,t){var n=ep(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(ov.EMPTY_BYTE_STRING,gp.min()).withLastLimboFreeSnapshotVersion(gp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=dy(),s=xy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ow(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(gp.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Fp.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Ow(e,t,n){var r=xy(),i=xy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=dy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(gp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Qd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Rw(e,t){var n=ep(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Pw(e,t){var n=ep(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Fp.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new Kg(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Lw(e,t,n){return Mw.apply(this,arguments)}function Mw(){return Mw=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ep(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),qp(e.t1)){e.next=12;break}throw e.t1;case 12:Qd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Mw.apply(this,arguments)}function Fw(e,t,n){var r=ep(e),i=gp.min(),a=xy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ep(e),i=r.Bi.get(n);return void 0!==i?Fp.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,km(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:gp.min(),n?a:xy())})).next((function(e){return jw(r,Em(t),e),{documents:e,ji:a}}))}))}function Vw(e,t){var n=ep(e),r=ep(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Uw(e,t){var n=ep(e),r=n.Li.get(t)||gp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Np(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return jw(n,t,e),e}))}function jw(e,t,n){var r=gp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Bw(e,t,n,r){return qw.apply(this,arguments)}function qw(){return qw=Ve(je().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ep(t),o=xy(),u=dy(),s=J(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Pw(a,function(e){return km(dm(wp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ow(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function zw(e,t){return Kw.apply(this,arguments)}function Kw(){return Kw=Ve(je().mark((function e(t,n){var r,i,a,o=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:xy(),e.next=3,Pw(t,km(Zg(n.bundledQuery)));case 3:return i=e.sent,a=ep(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=jy(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(ov.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Gw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ww(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Hw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Qw=function(){function e(t,n,r,i){H(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return $(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new np(a.error.code,a.error.message))),o?new e(t,n,a.state,i):($d("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),$w=function(){function e(t,n,r){H(this,e),this.targetId=t,this.state=n,this.error=r}return $(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new np(i.error.code,i.error.message))),a?new e(t,i.state,r):($d("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Jw=function(){function e(t,n){H(this,e),this.clientId=t,this.activeTargetIds=n}return $(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Iy(),o=0;i&&o<r.activeTargetIds.length;++o)i=gv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):($d("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Yw=function(){function e(t,n){H(this,e),this.clientId=t,this.onlineState=n}return $(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):($d("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Xw=function(){function e(){H(this,e),this.activeTargetIds=Iy()}return $(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Zw=function(){function e(t,n,r,i,a){H(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Zp(pp),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Gw(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Xw),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return $(e,[{key:"start",value:function(){var e=Ve(je().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=J(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Gw(this.persistenceKey,i)))&&(o=Jw.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=J(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Hw(this.persistenceKey,e));if(n){var r=$w.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Hw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Qd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Qd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Qd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Qd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void $d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(Ve(je().mark((function e(){var r,i,a,o,u,s,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=$p.ot;if(null!=e)try{var n=JSON.parse(e);Zd("number"==typeof n),t=n}catch(e){$d("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==$p.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Qw(this.currentUser,e,t,n),i=Ww(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Ww(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Hw(this.persistenceKey,e),i=new $w(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Jw.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qw.Ji(new Kd(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return $w.Ji(r,t)}},{key:"wr",value:function(e){return Yw.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Qd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Iy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),eb=function(){function e(){H(this,e),this.Fr=new Xw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return $(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Xw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),tb=function(){function e(){H(this,e)}return $(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),nb=function(){function e(){var t=this;H(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return $(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Qd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=J(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Qd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=J(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),rb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ib=function(){function e(t){H(this,e),this.jr=t.jr,this.Wr=t.Wr}return $(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),ab=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return $(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new qd;o.listenOnce(Fd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Md.NO_ERROR:var t=o.getResponseJson();Qd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Md.TIMEOUT:Qd("Connection",'RPC "'+e+'" timed out'),a(new np(tp.DEADLINE_EXCEEDED,"Request time out"));break;case Md.HTTP_ERROR:var n=o.getStatus();if(Qd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(tp).indexOf(t)>=0?t:tp.UNKNOWN}(r.status);a(new np(u,r.message))}else a(new np(tp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new np(tp.UNAVAILABLE,"Connection failed."));break;default:Xd()}}finally{Qd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Pd(),a=Ld(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new jd({})),this.uo(o.initMessageHeaders,t,n),ve()||ge()||pe().indexOf("Electron/")>=0||ke()||pe().indexOf("MSAppHost/")>=0||ye()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Qd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ib({jr:function(e){l?Qd("Connection","Not sending because WebChannel is closed:",e):(c||(Qd("Connection","Opening WebChannel transport."),s.open(),c=!0),Qd("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Bd.EventType.OPEN,(function(){l||Qd("Connection","WebChannel transport opened.")})),h(s,Bd.EventType.CLOSE,(function(){l||(l=!0,Qd("Connection","WebChannel transport closed"),f.eo())})),h(s,Bd.EventType.ERROR,(function(e){l||(l=!0,Jd("Connection","WebChannel transport errored:",e),f.eo(new np(tp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Bd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Zd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Qd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=iy[e];if(void 0!==t)return ly(t)}(a),u=i.message;void 0===o&&(o=tp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new np(o,u)),s.close()}else Qd("Connection","WebChannel received:",n),f.no(n)}})),h(a,Vd.STAT_EVENT,(function(e){e.stat===Ud.PROXY?Qd("Connection","Detected buffering proxy"):e.stat===Ud.NOPROXY&&Qd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){H(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return $(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Qd("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Qd("RestConnection","Received: ",e),e}),(function(t){throw Jd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=rb[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function ob(){return"undefined"!=typeof window?window:null}function ub(){return"undefined"!=typeof document?document:null}function sb(e){return new My(e,!0)}var cb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;H(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return $(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Qd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),lb=function(){function e(t,n,r,i,a,o,u,s){H(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new cb(t,n)}return $(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===tp.RESOURCE_EXHAUSTED?($d(n.toString()),$d("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===tp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new np(tp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Qd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Qd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),fb=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a,o,u){var s;return H(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return $(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Zd(void 0===t||"string"==typeof t),ov.fromBase64String(t||"")):(Zd(void 0===t||t instanceof Uint8Array),ov.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?tp.UNKNOWN:ly(e.code);return new np(t,e.message||"")}(o);n=new Ny(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Ky(e,s.document.name),l=jy(s.document.updateTime),f=new jv({mapValue:{fields:s.document.fields}}),h=qv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Sy(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Ky(e,v.document),y=v.readTime?jy(v.readTime):gp.min(),g=qv.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Sy([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Ky(e,w.document),x=w.removedTargetIds||[];n=new Sy([],x,b,null)}else{if(!("filter"in t))return Xd();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new sy(I),T=_.targetId;n=new Cy(T,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return gp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?gp.min():t.readTime?jy(t.readTime):gp.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Hy(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Hv(r)?{documents:eg(e,r)}:{query:tg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Vy(e,t.resumeToken):t.snapshotVersion.compareTo(gp.min())>0&&(n.readTime=Fy(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Hy(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(lb),hb=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a,o,u){var s;return H(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return $(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,vn(ee(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Zd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Zd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?jy(e.updateTime):jy(t);return n.isEqual(gp.min())&&(n=jy(t)),new Km(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=jy(e.commitTime);return this.listener.Jo(n,t)}return Zd(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Hy(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Xy(t.wt,e)}))};this.Oo(n)}}]),n}(lb),db=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a){var o;return H(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return $(n,[{key:"tu",value:function(){if(this.Zo)throw new np(tp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new np(tp.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.bo.ao(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new np(tp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return $((function e(){H(this,e)}))}()),pb=function(){function e(t,n){H(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return $(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?($d(t),this.su=!1):Qd("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),vb=$((function e(t,n,r,i,a){var o=this;H(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Tb(o),!e.t0){e.next=5;break}return Qd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ep(t)).lu.add(4),e.next=4,gb(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,mb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new pb(r,i)}));function mb(e){return yb.apply(this,arguments)}function yb(){return yb=Ve(je().mark((function e(t){var n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Tb(t)){e.next=18;break}n=J(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),yb.apply(this,arguments)}function gb(e){return kb.apply(this,arguments)}function kb(){return kb=Ve(je().mark((function e(t){var n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=J(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),kb.apply(this,arguments)}function wb(e,t){var n=ep(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Eb(n)?Ib(n):tx(n).Co()&&xb(n,t))}function bb(e,t){var n=ep(e),r=tx(n);n.hu.delete(t),r.Co()&&_b(n,t),0===n.hu.size&&(r.Co()?r.ko():Tb(n)&&n._u.set("Unknown"))}function xb(e,t){e.wu.Nt(t.targetId),tx(e).Qo(t)}function _b(e,t){e.wu.Nt(t),tx(e).jo(t)}function Ib(e){e.wu=new Dy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),tx(e).start(),e._u.iu()}function Eb(e){return Tb(e)&&!tx(e).Do()&&e.hu.size>0}function Tb(e){return 0===ep(e).lu.size}function Sb(e){e.wu=void 0}function Cb(e){return Nb.apply(this,arguments)}function Nb(){return Nb=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){xb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}function Ab(e,t){return Db.apply(this,arguments)}function Db(){return Db=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sb(t),Eb(t)?(t._u.uu(n),Ib(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Ob(e,t,n){return Rb.apply(this,arguments)}function Rb(){return Rb=Ve(je().mark((function e(t,n,r){var i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Ny&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ve(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=J(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Qd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Pb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Sy?t.wu.Ut(n):n instanceof Cy?t.wu.zt(n):t.wu.Gt(n),r.isEqual(gp.min())){e.next=29;break}return e.prev=14,e.next=17,Aw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(ov.EMPTY_BYTE_STRING,n.snapshotVersion)),_b(e,t);var r=new Kg(n.target,t,1,n.sequenceNumber);xb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Qd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Pb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Rb.apply(this,arguments)}function Pb(e,t,n){return Lb.apply(this,arguments)}function Lb(){return Lb=Ve(je().mark((function e(t,n,r){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qp(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,gb(t);case 5:t._u.set("Offline"),r||(r=function(){return Aw(t.localStore)}),t.asyncQueue.enqueueRetryable(Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,mb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(e,t){return t().catch((function(n){return Pb(e,n,t)}))}function Fb(e){return Vb.apply(this,arguments)}function Vb(){return Vb=Ve(je().mark((function e(t){var n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ep(t),r=nx(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Ub(n)){e.next=19;break}return e.prev=3,e.next=6,Rw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,jb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Pb(n,e.t0);case 17:e.next=2;break;case 19:Bb(n)&&qb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Vb.apply(this,arguments)}function Ub(e){return Tb(e)&&e.au.length<10}function jb(e,t){e.au.push(t);var n=nx(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Bb(e){return Tb(e)&&!nx(e).Do()&&e.au.length>0}function qb(e){nx(e).start()}function zb(e){return Kb.apply(this,arguments)}function Kb(){return Kb=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nx(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Kb.apply(this,arguments)}function Gb(e){return Wb.apply(this,arguments)}function Wb(){return Wb=Ve(je().mark((function e(t){var n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nx(t),r=J(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Hb(e,t,n){return Qb.apply(this,arguments)}function Qb(){return Qb=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=qg.from(i,n,r),e.next=3,Mb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Fb(t);case 5:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function $b(e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=Ve(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nx(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cy(i=n.code)||i===tp.ABORTED){e.next=7;break}return r=t.au.shift(),nx(t).No(),e.next=5,Mb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Fb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Bb(t)&&qb(t);case 5:case"end":return e.stop()}}),e)}))),Jb.apply(this,arguments)}function Yb(e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ep(t)).asyncQueue.verifyOperationInProgress(),Qd("RemoteStore","RemoteStore received new credentials"),i=Tb(r),r.lu.add(3),e.next=6,gb(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,mb(r);case 12:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Zb(e,t){return ex.apply(this,arguments)}function ex(){return ex=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ep(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,mb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,gb(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e){return e.mu||(e.mu=function(e,t,n){var r=ep(e);return r.tu(),new fb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Cb.bind(null,e),Jr:Ab.bind(null,e),Go:Ob.bind(null,e)}),e.fu.push(function(){var t=Ve(je().mark((function t(n){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Eb(e)?Ib(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Sb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function nx(e){return e.gu||(e.gu=function(e,t,n){var r=ep(e);return r.tu(),new hb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:zb.bind(null,e),Jr:$b.bind(null,e),Yo:Gb.bind(null,e),Jo:Hb.bind(null,e)}),e.fu.push(function(){var t=Ve(je().mark((function t(n){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Fb(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Qd("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var rx=function(){function e(t,n,r,i,a){H(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new rp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return $(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new np(tp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ix(e,t){if($d("AsyncQueue","".concat(t,": ").concat(e)),qp(e))return new np(tp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ax=function(){function e(t){H(this,e),this.comparator=t?function(e,n){return t(e,n)||_p.comparator(e.key,n.key)}:function(e,t){return _p.comparator(e.key,t.key)},this.keyedMap=vy(),this.sortedSet=new Zp(this.comparator)}return $(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ox=function(){function e(){H(this,e),this.yu=new Zp(_p.comparator)}return $(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Xd():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ux=function(){function e(t,n,r,i,a,o,u,s){H(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return $(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ax.emptySet(n),a,r,i,!0,!1)}}]),e}(),sx=$((function e(){H(this,e),this.Iu=void 0,this.listeners=[]})),cx=$((function e(){H(this,e),this.queries=new fy((function(e){return xm(e)}),bm),this.onlineState="Unknown",this.Tu=new Set}));function lx(e,t){return fx.apply(this,arguments)}function fx(){return fx=Ve(je().mark((function e(t,n){var r,i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ep(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new sx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ix(e.t0,"Initialization of query '".concat(_m(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&mx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=Ve(je().mark((function e(t,n){var r,i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ep(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t){var n,r=ep(e),i=!1,a=J(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=J(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&mx(r)}function vx(e,t,n){var r=ep(e),i=r.queries.get(t);if(i){var a,o=J(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function mx(e){e.Tu.forEach((function(e){e.next()}))}var yx=function(){function e(t,n,r){H(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return $(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=J(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ux(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=ux.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),gx=function(){function e(t,n){H(this,e),this.payload=t,this.byteLength=n}return $(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),kx=function(){function e(t){H(this,e),this.wt=t}return $(e,[{key:"Wi",value:function(e){return Ky(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?Jy(this.wt,e.document,!1):qv.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return jy(e)}}]),e}(),wx=function(){function e(t,n,r){H(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bx(t)}return $(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=wp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new kx(this.wt),i=J(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=J(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||xy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ve(je().mark((function e(){var t,n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bw(this.localStore,new kx(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=J(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,zw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function bx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xx=$((function e(t){H(this,e),this.key=t})),_x=$((function e(t){H(this,e),this.key=t})),Ix=function(){function e(t,n){H(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=xy(),this.mutatedKeys=xy(),this.Lu=Tm(t),this.Uu=new ax(this.Lu)}return $(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new ox,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Im(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Mi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xd()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new ux(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new ox,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=xy(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new _x(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new xx(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=xy();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return ux.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Ex=$((function e(t,n,r){H(this,e),this.query=t,this.targetId=n,this.view=r})),Tx=$((function e(t){H(this,e),this.key=t,this.Xu=!1})),Sx=function(){function e(t,n,r,i,a,o){H(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new fy((function(e){return xm(e)}),bm),this.ec=new Map,this.nc=new Set,this.sc=new Zp(_p.comparator),this.ic=new Map,this.rc=new uw,this.oc={},this.uc=new Map,this.cc=Fk.Rn(),this.onlineState="Unknown",this.ac=void 0}return $(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=Ve(je().mark((function e(t,n){var r,i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b_(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Pw(r.localStore,km(n));case 8:return u=e.sent,r.isPrimaryClient&&wb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ax(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t,n,r){return Dx.apply(this,arguments)}function Dx(){return Dx=Ve(je().mark((function e(t,n,r,i){var a,o,u,s,c,l;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=Ve(je().mark((function e(t,n,r,i){var a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Fw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Yx(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Fw(t.localStore,n,!0);case 3:return a=e.sent,o=new Ix(n,a.ji),u=o.Ku(a.documents),s=Ty.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Yx(t,r,c.zu),l=new Ex(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Ox(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=Ve(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ep(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!bm(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Lw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),bb(r.remoteStore,i.targetId),$x(r,i.targetId)})).catch(Lp);case 9:e.next=14;break;case 11:return $x(r,i.targetId),e.next=14,Lw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Px(e,t,n){return Lx.apply(this,arguments)}function Lx(){return Lx=Ve(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x_(t),e.prev=1,e.next=4,function(e,t){var n,r,i=ep(e),a=yp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),xy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=dy(),s=xy();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=J(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Ym(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new ey(c.key,l,Bv(l.value.mapValue),Gm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:my(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Zp(pp)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,e_(i,a.changes);case 9:return e.next=11,Fb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ix(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Lx.apply(this,arguments)}function Mx(e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),e.prev=1,e.next=4,Dw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Zd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Zd(n.Xu):e.removedDocuments.size>0&&(Zd(n.Xu),n.Xu=!1))})),e.next=8,e_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Lp(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Fx.apply(this,arguments)}function Vx(e,t,n){var r=ep(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ep(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=J(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mx(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ux(e,t,n){return jx.apply(this,arguments)}function jx(){return jx=Ve(je().mark((function e(t,n,r){var i,a,o,u,s,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ep(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Zp(_p.comparator)).insert(o,qv.newNoDocument(o,gp.min())),s=xy().add(o),c=new Ey(gp.min(),new Map,new nv(pp),u,s),e.next=9,Mx(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),Zx(i),e.next=16;break;case 14:return e.next=16,Lw(i.localStore,n,!1).then((function(){return $x(i,n,r)})).catch(Lp);case 16:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Bx(e,t){return qx.apply(this,arguments)}function qx(){return qx=Ve(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),i=n.batch.batchId,e.prev=1,e.next=4,Nw(r.localStore,n);case 4:return a=e.sent,Qx(r,i,null),Hx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,e_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Lp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qx.apply(this,arguments)}function zx(e,t,n){return Kx.apply(this,arguments)}function Kx(){return Kx=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ep(t),e.prev=1,e.next=4,function(e,t){var n=ep(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Zd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Qx(i,n,r),Hx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,e_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Lp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Kx.apply(this,arguments)}function Gx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=Ve(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tb((r=ep(t)).remoteStore)||Qd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ep(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ix(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Wx.apply(this,arguments)}function Hx(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function Qx(e,t,n){var r=ep(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function $x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=J(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||Jx(e,t)}))}function Jx(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(bb(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),Zx(e))}function Yx(e,t,n){var r,i=J(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xx?(e.rc.addReference(a.key,t),Xx(e,a)):a instanceof _x?(Qd("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||Jx(e,a.key)):Xd()}}catch(o){i.e(o)}finally{i.f()}}function Xx(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Qd("SyncEngine","New document in limbo: "+n),e.nc.add(r),Zx(e))}function Zx(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new _p(wp.fromString(t)),r=e.cc.next();e.ic.set(r,new Tx(n)),e.sc=e.sc.insert(n,r),wb(e.remoteStore,new Kg(km(dm(n.path)),r,2,$p.ot))}}function e_(e,t,n){return t_.apply(this,arguments)}function t_(){return t_=Ve(je().mark((function e(t,n,r){var i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ep(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=_w.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=Ve(je().mark((function e(t,n){var r,i,a,o,u,s,c,l;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Fp.forEach(n,(function(t){return Fp.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Fp.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),qp(e.t0)){e.next=10;break}throw e.t0;case 10:Qd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=J(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),t_.apply(this,arguments)}function n_(e,t){return r_.apply(this,arguments)}function r_(){return r_=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ep(t)).currentUser.isEqual(n)){e.next=11;break}return Qd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new np(tp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,e_(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){var n=ep(e),r=n.ic.get(t);if(r&&r.Xu)return xy().add(r.key);var i=xy(),a=n.ec.get(t);if(!a)return i;var o,u=J(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=Ve(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),e.next=3,Fw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Yx(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t){return s_.apply(this,arguments)}function s_(){return s_=Ve(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),e.abrupt("return",Uw(r.localStore,n).then((function(e){return e_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t,n,r){return l_.apply(this,arguments)}function l_(){return l_=Ve(je().mark((function e(t,n,r,i){var a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ep(t),e.next=3,function(e,t){var n=ep(e),r=ep(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Fp.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Fb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Qx(a,n,i||null),Hx(a,n),function(e,t){ep(ep(e).mutationQueue).In(t)}(a.localStore,n)):Xd();case 11:return e.next=13,e_(a,o);case 13:e.next=16;break;case 15:Qd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t){return h_.apply(this,arguments)}function h_(){return h_=Ve(je().mark((function e(t,n){var r,i,a,o,u,s,c,l;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b_(r=ep(t)),x_(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,d_(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,Zb(r.remoteStore,!0);case 9:o=J(a);try{for(o.s();!(u=o.n()).done;)s=u.value,wb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return $x(r,t),Lw(r.localStore,t,!0)})),bb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,d_(r,c);case 21:return function(e){var t=ep(e);t.ic.forEach((function(e,n){bb(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Zp(_p.comparator)}(r),r.ac=!1,e.next=25,Zb(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(e,t,n){return p_.apply(this,arguments)}function p_(){return p_=Ve(je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ep(t),a=[],o=[],u=J(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,Pw(i.localStore,km(f[0]));case 11:l=e.sent,h=J(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,a_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Vw(i.localStore,c);case 36:return y=e.sent,e.next=39,Pw(i.localStore,y);case 39:return l=e.sent,e.next=42,Ax(i,v_(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),p_.apply(this,arguments)}function v_(e){return hm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function m_(e){var t=ep(e);return ep(ep(t.localStore).persistence).Ri()}function y_(e,t,n,r){return g_.apply(this,arguments)}function g_(){return g_=Ve(je().mark((function e(t,n,r,i){var a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ep(t)).ac){e.next=3;break}return e.abrupt("return",void Qd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Uw(a.localStore,Em(o[0]));case 10:return u=e.sent,s=Ey.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,e_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Lw(a.localStore,n,!0);case 17:return $x(a,n,i),e.abrupt("break",20);case 19:Xd();case 20:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(e,t,n){return w_.apply(this,arguments)}function w_(){return w_=Ve(je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=b_(t)).ac){e.next=45;break}a=J(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return Qd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Vw(i.localStore,u);case 12:return s=e.sent,e.next=15,Pw(i.localStore,s);case 15:return c=e.sent,e.next=18,Ax(i,v_(s),c.targetId,!1);case 18:wb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=J(r),e.prev=30,h=je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Lw(i.localStore,t,!1).then((function(){bb(i.remoteStore,t),$x(i,t)})).catch(Lp);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),w_.apply(this,arguments)}function b_(e){var t=ep(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=i_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ux.bind(null,t),t.Zu.Go=px.bind(null,t.eventManager),t.Zu.lc=vx.bind(null,t.eventManager),t}function x_(e){var t=ep(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zx.bind(null,t),t}function __(e,t,n){var r=ep(e);(function(){var e=Ve(je().mark((function e(t,n,r){var i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ep(e),r=jy(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(bx(i)),a=new wx(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,e_(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=ep(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Jd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var I_=function(){function e(){H(this,e),this.synchronizeTabs=!1}return $(e,[{key:"initialize",value:function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=sb(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Tw(this.persistence,new Iw,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new dw(vw.Os,this.wt)}},{key:"dc",value:function(e){return new eb}},{key:"terminate",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E_=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return $(n,[{key:"initialize",value:function(){var e=Ve(je().mark((function e(t){var r=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(ee(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,x_(this.yc.syncEngine);case 6:return e.next=8,Fb(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Tw(this.persistence,new Iw,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Kk(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new Qp(t,this.persistence);return new Hp(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Nk.withCacheSize(this.cacheSizeBytes):Nk.DEFAULT;return new kw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ob(),ub(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new eb}}]),n}(I_),T_=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return $(n,[{key:"initialize",value:function(){var e=Ve(je().mark((function e(t){var r,i=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(ee(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof Zw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:c_.bind(null,r),Mr:y_.bind(null,r),Or:k_.bind(null,r),Ri:m_.bind(null,r),Nr:u_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f_(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=ob();if(!Zw.V(t))throw new np(tp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(E_),S_=function(){function e(){H(this,e)}return $(e,[{key:"initialize",value:function(){var e=Ve(je().mark((function e(t,n){var r=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Vx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=n_.bind(null,this.syncEngine),e.next=12,Zb(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cx}},{key:"createDatastore",value:function(e){var t,n=sb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ab(t));return function(e,t,n,r){return new db(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Vx(o.syncEngine,e,0)},a=nb.V()?new nb:new tb,new vb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Sx(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ep(t),Qd("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,gb(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function C_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ve(je().mark((function r(){var i;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var N_=function(){function e(t){H(this,e),this.observer=t,this.muted=!1}return $(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):$d("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),A_=function(){function e(t,n){var r=this;H(this,e),this.Ec=t,this.wt=n,this.metadata=new rp,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return $(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=Ve(je().mark((function e(){var t,n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new gx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=Ve(je().mark((function e(){var t,n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=Ve(je().mark((function e(){var t,n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),D_=function(){function e(t){H(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return $(e,[{key:"lookup",value:function(){var e=Ve(je().mark((function e(t){var n,r=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new np(tp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ve(je().mark((function e(t,n){var r,i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),i=Hy(r.wt)+"/documents",a={documents:n.map((function(e){return zy(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Yy(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Zd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new oy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ve(je().mark((function e(){var t,n=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=_p.fromPath(t);n.mutations.push(new uy(r,n.precondition(r)))})),e.next=7,function(){var e=Ve(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ep(t),i=Hy(r.wt)+"/documents",a={writes:n.map((function(e){return Xy(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xd();t=gp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new np(tp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Gm.updateTime(t):Gm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gp.min()))throw new np(tp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gm.updateTime(t)}return Gm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),O_=function(){function e(t,n,r,i,a){H(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new cb(this.asyncQueue,"transaction_retry")}return $(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(Ve(je().mark((function t(){var n,r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new D_(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!mv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!cy(t)}return!1}}]),e}(),R_=function(){function e(t,n,r,i){var a=this;H(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Kd.UNAUTHENTICATED,this.clientId=dp.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Qd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return $(e,[{key:"getConfiguration",value:function(){var e=Ve(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new np(tp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new rp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ve(je().mark((function n(){var r;return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ix(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function P_(e,t){return L_.apply(this,arguments)}function L_(){return L_=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Qd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),L_.apply(this,arguments)}function M_(e,t){return F_.apply(this,arguments)}function F_(){return F_=Ve(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,V_(t);case 3:return r=e.sent,Qd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Yb(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Yb(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function V_(e){return U_.apply(this,arguments)}function U_(){return U_=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Qd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,P_(t,new I_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function j_(e){return B_.apply(this,arguments)}function B_(){return B_=Ve(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Qd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,M_(t,new S_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),B_.apply(this,arguments)}function q_(e){return V_(e).then((function(e){return e.persistence}))}function z_(e){return V_(e).then((function(e){return e.localStore}))}function K_(e){return j_(e).then((function(e){return e.remoteStore}))}function G_(e){return j_(e).then((function(e){return e.syncEngine}))}function W_(e){return H_.apply(this,arguments)}function H_(){return H_=Ve(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Cx.bind(null,n.syncEngine),r.onUnlisten=Ox.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function Q_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new rp;return e.asyncQueue.enqueueAndForget(Ve(je().mark((function i(){return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new N_({next:function(a){t.enqueueAndForget((function(){return hx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new np(tp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new np(tp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new yx(dm(n.path),a,{includeMetadataChanges:!0,Du:!0});return lx(e,o)},i.next=3,W_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new rp;return e.asyncQueue.enqueueAndForget(Ve(je().mark((function i(){return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new N_({next:function(n){t.enqueueAndForget((function(){return hx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new np(tp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new yx(n,a,{includeMetadataChanges:!0,Du:!0});return lx(e,o)},i.next=3,W_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var J_=new Map;function Y_(e,t,n){if(!n)throw new np(tp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function X_(e,t,n,r){if(!0===t&&!0===r)throw new np(tp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Z_(e){if(!_p.isDocumentKey(e))throw new np(tp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function eI(e){if(_p.isDocumentKey(e))throw new np(tp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function tI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Xd()}function nI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new np(tp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tI(e);throw new np(tp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function rI(e,t){if(t<=0)throw new np(tp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var iI=function(){function e(t){var n;if(H(this,e),void 0===t.host){if(void 0!==t.ssl)throw new np(tp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new np(tp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,X_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return $(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),aI=function(){function e(t,n,r){H(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iI({}),this._settingsFrozen=!1,t instanceof vv?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new np(tp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vv(e.options.projectId)}(t))}return $(e,[{key:"app",get:function(){if(!this._app)throw new np(tp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new np(tp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ap;switch(e.type){case"gapi":var t=e.client;return Zd(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new cp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new np(tp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=J_.get(e);t&&(Qd("ComponentProvider","Removing Datastore"),J_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function oI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=nI(e,aI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Jd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Kd.MOCK_USER;else{o=de(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new np(tp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Kd(s)}e._authCredentials=new op(new ip(o,u))}}var uI=function(){function e(t,n,r){H(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return $(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new cI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),sI=function(){function e(t,n,r){H(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return $(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),cI=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this,e,r,dm(i)))._path=i,a.type="collection",a}return $(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new uI(this.firestore,null,new _p(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(sI);function lI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Pe(e),Y_("collection","path",t),e instanceof aI){var a=wp.fromString.apply(wp,[t].concat(r));return eI(a),new cI(e,null,a)}if(!(e instanceof uI||e instanceof cI))throw new np(tp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wp.fromString.apply(wp,[t].concat(r)));return eI(o),new cI(e.firestore,null,o)}function fI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Pe(e),1===arguments.length&&(t=dp.I()),Y_("doc","path",t),e instanceof aI){var a=wp.fromString.apply(wp,[t].concat(r));return Z_(a),new uI(e,null,new _p(a))}if(!(e instanceof uI||e instanceof cI))throw new np(tp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wp.fromString.apply(wp,[t].concat(r)));return Z_(o),new uI(e.firestore,e instanceof cI?e.converter:null,new _p(o))}function hI(e,t){return e=Pe(e),t=Pe(t),(e instanceof uI||e instanceof cI)&&(t instanceof uI||t instanceof cI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function dI(e,t){return e=Pe(e),t=Pe(t),e instanceof sI&&t instanceof sI&&e.firestore===t.firestore&&bm(e._query,t._query)&&e.converter===t.converter}var pI=function(){function e(){var t=this;H(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new cb(this,"async_queue_retry"),this.Kc=function(){var e=ub();e&&Qd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=ub();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return $(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=ub();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new rp;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=Ve(je().mark((function e(){var t=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),qp(e.t0)){e.next=12;break}throw e.t0;case 12:Qd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw $d("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=rx.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&Xd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Ve(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=J(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=J(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function vI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=J(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var mI=function(){function e(){H(this,e),this._progressObserver={},this._taskCompletionResolver=new rp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return $(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),yI=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new pI,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return $(n,[{key:"_terminate",value:function(){return this._firestoreClient||kI(this),this._firestoreClient.terminate()}}]),n}(aI);function gI(e){return e._firestoreClient||kI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function kI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new pv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new R_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function wI(e,t,n){var r=new rp;return e.asyncQueue.enqueue(Ve(je().mark((function i(){var a;return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,P_(e,n);case 3:return i.next=5,M_(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===tp.FAILED_PRECONDITION||e.code===tp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Jd("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function bI(e){return function(e){return e.asyncQueue.enqueue(Ve(je().mark((function t(){var n,r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q_(e);case 2:return n=t.sent,t.next=5,K_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ep(e);return t.lu.delete(0),mb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(gI(e=nI(e,yI)))}function xI(e){return function(e){return e.asyncQueue.enqueue(Ve(je().mark((function t(){var n,r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q_(e);case 2:return n=t.sent,t.next=5,K_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ep(t)).lu.add(0),e.next=4,gb(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(gI(e=nI(e,yI)))}function _I(e,t){var n=gI(e=nI(e,yI)),r=new mI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new A_(e,t)}(function(e,t){if(e instanceof Uint8Array)return C_(e,t);if(e instanceof ArrayBuffer)return C_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,sb(t));e.asyncQueue.enqueueAndForget(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=__,t.next=3,G_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function II(e,t){return function(e,t){return e.asyncQueue.enqueue(Ve(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ep(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,z_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(gI(e=nI(e,yI)),t).then((function(t){return t?new sI(e,null,t.query):null}))}function EI(e){if(e._initialized||e._terminated)throw new np(tp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var TI=function(){function e(){H(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new np(tp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xp(n)}return $(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var SI=function(){function e(t){H(this,e),this._byteString=t}return $(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ov.fromBase64String(t))}catch(t){throw new np(tp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ov.fromUint8Array(t))}}]),e}(),CI=$((function e(t){H(this,e),this._methodName=t})),NI=function(){function e(t,n){if(H(this,e),!isFinite(t)||t<-90||t>90)throw new np(tp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new np(tp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return $(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return pp(this._lat,e._lat)||pp(this._long,e._long)}}]),e}(),AI=/^__.*__$/,DI=function(){function e(t,n,r){H(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return $(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ey(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zm(e,this.data,t,this.fieldTransforms)}}]),e}(),OI=function(){function e(t,n,r){H(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return $(e,[{key:"toMutation",value:function(e,t){return new ey(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function RI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xd()}}var PI=function(){function e(t,n,r,i,a,o){H(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return $(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return eE(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(RI(this.Zc)&&AI.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),LI=function(){function e(t,n,r){H(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||sb(t)}return $(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new PI({Zc:e,methodName:t,ca:n,path:xp.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function MI(e){var t=e._freezeSettings(),n=sb(e._databaseId);return new LI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function FI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);JI("Data must be an object, but it was:",o,r);var u,s,c=QI(r,o);if(a.merge)u=new av(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=J(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=YI(t,d,n);if(!o.contains(p))throw new np(tp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));tE(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new av(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new DI(new jv(c),u,s)}var VI=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CI);function UI(e,t,n){return new PI({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var jI=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"_toFieldTransform",value:function(e){return new zm(e.path,new Lm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CI),BI=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e)).ha=r,i}return $(n,[{key:"_toFieldTransform",value:function(e){var t=UI(this,e,!0),n=this.ha.map((function(e){return HI(e,t)})),r=new Mm(n);return new zm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CI),qI=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e)).ha=r,i}return $(n,[{key:"_toFieldTransform",value:function(e){var t=UI(this,e,!0),n=this.ha.map((function(e){return HI(e,t)})),r=new Vm(n);return new zm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CI),zI=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e)).la=r,i}return $(n,[{key:"_toFieldTransform",value:function(e){var t=new jm(e.wt,Am(e.wt,this.la));return new zm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CI);function KI(e,t,n,r){var i=e.aa(1,t,n);JI("Data must be an object, but it was:",i,r);var a=[],o=jv.empty();Yp(r,(function(e,r){var u=ZI(t,e,n);r=Pe(r);var s=i.ia(u);if(r instanceof VI)a.push(u);else{var c=HI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new av(a);return new OI(o,u,i.fieldTransforms)}function GI(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[YI(t,r,n)],s=[i];if(a.length%2!=0)throw new np(tp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(YI(t,a[c])),s.push(a[c+1]);for(var l=[],f=jv.empty(),h=u.length-1;h>=0;--h)if(!tE(l,u[h])){var d=u[h],p=s[h];p=Pe(p);var v=o.ia(d);if(p instanceof VI)l.push(d);else{var m=HI(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new av(l);return new OI(f,y,o.fieldTransforms)}function WI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return HI(n,e.aa(r?4:3,t))}function HI(e,t){if($I(e=Pe(e)))return JI("Unsupported field value:",t,e),QI(e,t);if(e instanceof CI)return function(e,t){if(!RI(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=J(e);try{for(a.s();!(n=a.n()).done;){var o=HI(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Pe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Am(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=yp.fromDate(e);return{timestampValue:Fy(t.wt,n)}}if(e instanceof yp){var r=new yp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fy(t.wt,r)}}if(e instanceof NI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof SI)return{bytesValue:Vy(t.wt,e._byteString)};if(e instanceof uI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:By(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(tI(e)))}(e,t)}function QI(e,t){var n={};return Xp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yp(e,(function(e,r){var i=HI(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $I(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yp||e instanceof NI||e instanceof SI||e instanceof uI||e instanceof CI)}function JI(e,t,n){if(!$I(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=tI(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function YI(e,t,n){if((t=Pe(t))instanceof TI)return t._internalPath;if("string"==typeof t)return ZI(e,t);throw eE("Field path arguments must be of type string or ",e,!1,void 0,n)}var XI=new RegExp("[~\\*/\\[\\]]");function ZI(e,t,n){if(t.search(XI)>=0)throw eE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ae(TI,Me(t.split(".")))._internalPath}catch(r){throw eE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function eE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new np(tp.INVALID_ARGUMENT,u+e+s)}function tE(e,t){return e.some((function(e){return e.isEqual(t)}))}var nE=function(){function e(t,n,r,i,a){H(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return $(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new uI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new rE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(iE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),rE=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"data",value:function(){return vn(ee(n.prototype),"data",this).call(this)}}]),n}(nE);function iE(e,t){return"string"==typeof t?ZI(e,t):t instanceof TI?t._internalPath:t._delegate._internalPath}var aE=function(){function e(t,n){H(this,e),this.hasPendingWrites=t,this.fromCache=n}return $(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),oE=function(e){Z(n,e);var t=ie(n);function n(e,r,i,a,o,u){var s;return H(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return $(n,[{key:"exists",value:function(){return vn(ee(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new uE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(iE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(nE),uE=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vn(ee(n.prototype),"data",this).call(this,e)}}]),n}(oE),sE=function(){function e(t,n,r,i){H(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new aE(i.hasPendingWrites,i.fromCache),this.query=r}return $(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new uE(n._firestore,n._userDataWriter,r.key,r,new aE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new np(tp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new uE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new uE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:cE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function cE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xd()}}function lE(e,t){return e instanceof oE&&t instanceof oE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sE&&t instanceof sE&&e._firestore===t._firestore&&dI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function fE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new np(tp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hE=$((function e(){H(this,e)}));function dE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var pE=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return $(n,[{key:"_apply",value:function(e){var t=MI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new np(tp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){EE(o,a);var s,c=[],l=J(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(IE(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=IE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||EE(o,a),u=WI(n,"where",o,"in"===a||"not-in"===a);var h=Yv.create(i,a,u);return function(e,t){if(t.ht()){var n=mm(e);if(null!==n&&!n.isEqual(t.field))throw new np(tp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=vm(e);null!==r&&TE(e,t.field,r)}var i=function(e,t){var n,r=J(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new np(tp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new np(tp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new sI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new fm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(hE);var vE=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return $(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new np(tp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new np(tp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new um(t,n);return function(e,t){if(null===vm(e)){var n=mm(e);null!==n&&TE(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new sI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new fm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(hE);var mE=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return $(n,[{key:"_apply",value:function(e){return new sI(e.firestore,e.converter,wm(e._query,this.ma,this.ga))}}]),n}(hE);var yE=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return $(n,[{key:"_apply",value:function(e){var t=_E(e,this.type,this.ya,this.pa);return new sI(e.firestore,e.converter,function(e,t){return new fm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(hE);function gE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yE("startAt",t,!0)}function kE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yE("startAfter",t,!1)}var wE=function(e){Z(n,e);var t=ie(n);function n(e,r,i){var a;return H(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return $(n,[{key:"_apply",value:function(e){var t=_E(e,this.type,this.ya,this.pa);return new sI(e.firestore,e.converter,function(e,t){return new fm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(hE);function bE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wE("endBefore",t,!1)}function xE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wE("endAt",t,!0)}function _E(e,t,n,r){if(n[0]=Pe(n[0]),n[0]instanceof nE)return function(e,t,n,r,i){if(!r)throw new np(tp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=J(gm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Cv(t,r.key));else{var c=r.data.field(s.field);if(fv(c))throw new np(tp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new np(tp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new om(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=MI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new np(tp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new np(tp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ym(e)&&-1!==c.indexOf("/"))throw new np(tp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(wp.fromString(c));if(!_p.isDocumentKey(l))throw new np(tp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new _p(l);u.push(Cv(t,f))}else{var h=WI(n,r,c);u.push(h)}}return new om(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function IE(e,t,n){if("string"==typeof(n=Pe(n))){if(""===n)throw new np(tp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ym(t)&&-1!==n.indexOf("/"))throw new np(tp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(wp.fromString(n));if(!_p.isDocumentKey(r))throw new np(tp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Cv(e,new _p(r))}if(n instanceof uI)return Cv(e,n._key);throw new np(tp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(tI(n),"."))}function EE(e,t){if(!Array.isArray(e)||0===e.length)throw new np(tp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new np(tp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function TE(e,t,n){if(!n.isEqual(t))throw new np(tp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var SE={maxAttempts:5},CE=function(){function e(){H(this,e)}return $(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(bv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Yp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new NI(cv(e.latitude),cv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=hv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=sv(e);return new yp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=wp.fromString(e);Zd(fg(n));var r=new vv(n.get(1),n.get(3)),i=new _p(n.popFirst(5));return r.isEqual(t)||$d("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function NE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var AE=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this)).firestore=e,r}return $(n,[{key:"convertBytes",value:function(e){return new SI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uI(this.firestore,null,t)}}]),n}(CE),DE=function(){function e(t,n){H(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=MI(t)}return $(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=OE(e,this._firestore),i=NE(r.converter,t,n),a=FI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=OE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Pe(t))||t instanceof TI?GI(this._dataReader,"WriteBatch.update",i._key,t,n,o):KI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=OE(e,this._firestore);return this._mutations=this._mutations.concat(new oy(t._key,Gm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new np(tp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function OE(e,t){if((e=Pe(e)).firestore!==t)throw new np(tp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var RE=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this)).firestore=e,r}return $(n,[{key:"convertBytes",value:function(e){return new SI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uI(this.firestore,null,t)}}]),n}(CE);function PE(e){e=nI(e,uI);var t=nI(e.firestore,yI),n=gI(t),r=new RE(t);return function(e,t){var n=new rp;return e.asyncQueue.enqueueAndForget(Ve(je().mark((function r(){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ve(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ep(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new np(tp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ix(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,z_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new oE(t,r,e._key,n,new aE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function LE(e){e=nI(e,sI);var t=nI(e.firestore,yI),n=gI(t),r=new RE(t);return function(e,t){var n=new rp;return e.asyncQueue.enqueueAndForget(Ve(je().mark((function r(){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ve(je().mark((function e(t,n,r){var i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fw(t,n,!0);case 3:i=e.sent,a=new Ix(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ix(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,z_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new sE(t,r,e,n)}))}function ME(e,t,n){e=nI(e,uI);var r=nI(e.firestore,yI),i=NE(e.converter,t,n);return jE(r,[FI(MI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gm.none())])}function FE(e,t,n){e=nI(e,uI);for(var r=nI(e.firestore,yI),i=MI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return jE(r,[("string"==typeof(t=Pe(t))||t instanceof TI?GI(i,"updateDoc",e._key,t,n,o):KI(i,"updateDoc",e._key,t)).toMutation(e._key,Gm.exists(!0))])}function VE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Pe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||vI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(vI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof uI)l=nI(e.firestore,yI),f=dm(e._key.path),c={next:function(t){n[s]&&n[s](BE(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=nI(e,sI);l=nI(p.firestore,yI),f=p._query;var v=new RE(l);c={next:function(e){n[s]&&n[s](new sE(l,v,p,e))},error:n[s+1],complete:n[s+2]},fE(e._query)}return function(e,t,n,r){var i=new N_(r),a=new yx(t,i,n);return e.asyncQueue.enqueueAndForget(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lx,t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hx,t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gI(l),f,h,c)}function UE(e,t){return function(e,t){var n=new N_(t);return e.asyncQueue.enqueueAndForget(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ep(e).Tu.add(t),t.next()},t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(Ve(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ep(e).Tu.delete(t)},t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gI(e=nI(e,yI)),vI(t)?t:{next:t})}function jE(e,t){return function(e,t){var n=new rp;return e.asyncQueue.enqueueAndForget(Ve(je().mark((function r(){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Px,r.next=3,G_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(gI(e),t)}function BE(e,t,n){var r=n.docs.get(t._key),i=new RE(e);return new oE(e,i,t._key,r,new aE(n.hasPendingWrites,n.fromCache),t.converter)}var qE=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e,r))._firestore=e,i}return $(n,[{key:"get",value:function(e){var t=this,r=OE(e,this._firestore),i=new RE(this._firestore);return vn(ee(n.prototype),"get",this).call(this,e).then((function(e){return new oE(t._firestore,i,r._key,e._document,new aE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){H(this,e),this._firestore=t,this._transaction=n,this._dataReader=MI(t)}return $(e,[{key:"get",value:function(e){var t=this,n=OE(e,this._firestore),r=new AE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Xd();var i=e[0];if(i.isFoundDocument())return new nE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new nE(t._firestore,r,n._key,null,n.converter);throw Xd()}))}},{key:"set",value:function(e,t,n){var r=OE(e,this._firestore),i=NE(r.converter,t,n),a=FI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=OE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Pe(t))||t instanceof TI?GI(this._dataReader,"Transaction.update",i._key,t,n,o):KI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=OE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zE(e,t,n){e=nI(e,yI);var r=Object.assign(Object.assign({},SE),n);return function(e){if(e.maxAttempts<1)throw new np(tp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new rp;return e.asyncQueue.enqueueAndForget(Ve(je().mark((function i(){var a;return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return j_(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new O_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(gI(e),(function(n){return t(new qE(e,n))}),r)}function KE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BI("arrayUnion",t)}function GE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Gd=e}(Mt),Nt(new Be("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new yI(i,new up(e.getProvider("auth-internal")),new fp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),qt(zd,"3.4.14",e),qt(zd,"3.4.14","esm2017")}();function WE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new np("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function HE(){if("undefined"===typeof Uint8Array)throw new np("unimplemented","Uint8Arrays are not available in this environment.")}function QE(){if("undefined"==typeof atob)throw new np("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $E=function(){function e(t){H(this,e),this._delegate=t}return $(e,[{key:"toBase64",value:function(){return QE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return HE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return QE(),new e(SI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return HE(),new e(SI.fromUint8Array(t))}}]),e}();function JE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=J(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var YE=function(){function e(){H(this,e)}return $(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){EI(e=nI(e,yI));var n=gI(e),r=e._freezeSettings(),i=new S_;return wI(n,i,new E_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){EI(e=nI(e,yI));var t=gI(e),n=e._freezeSettings(),r=new S_;return wI(t,r,new T_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new np(tp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new rp;return e._queue.enqueueAndForgetEvenWhileRestricted(Ve(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ve(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Up.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Up.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(xw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),XE=function(){function e(t,n,r){var i=this;H(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof vv||(this._appCompat=t)}return $(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Jd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return bI(this._delegate)}},{key:"disableNetwork",value:function(){return xI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&X_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new rp;return e.asyncQueue.enqueueAndForget(Ve(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Gx,n.next=3,G_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(gI(e=nI(e,yI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return UE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new np("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hT(this,lI(this._delegate,e))}catch(t){throw iT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rT(this,fI(this._delegate,e))}catch(t){throw iT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cT(this,function(e,t){if(e=nI(e,aI),Y_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new np(tp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new sI(e,null,function(e){return new fm(wp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw iT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return zE(this._delegate,(function(n){return e(new eT(t,n))}))}},{key:"batch",value:function(){var e=this;return gI(this._delegate),new tT(new DE(this._delegate,(function(t){return jE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return _I(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return II(this._delegate,e).then((function(e){return e?new cT(t,e):null}))}}]),e}(),ZE=function(e){Z(n,e);var t=ie(n);function n(e){var r;return H(this,n),(r=t.call(this)).firestore=e,r}return $(n,[{key:"convertBytes",value:function(e){return new $E(new SI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rT.forKey(t,this.firestore,null)}}]),n}(CE);var eT=function(){function e(t,n){H(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new ZE(t)}return $(e,[{key:"get",value:function(e){var t=this,n=dT(e);return this._delegate.get(n).then((function(e){return new uT(t._firestore,new oE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dT(e);return n?(WE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dT(e);return this._delegate.delete(t),this}}]),e}(),tT=function(){function e(t){H(this,e),this._delegate=t}return $(e,[{key:"set",value:function(e,t,n){var r=dT(e);return n?(WE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),nT=function(){function e(t,n,r){H(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return $(e,[{key:"fromFirestore",value:function(e,t){var n=new uE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new ZE(t),n),i.set(n,a)),a}}]),e}();nT.INSTANCES=new WeakMap;var rT=function(){function e(t,n){H(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ZE(t)}return $(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hT(this.firestore,lI(this._delegate,e))}catch(t){throw iT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Pe(e))instanceof uI&&hI(this._delegate,e)}},{key:"set",value:function(e,t){t=WE("DocumentReference.set",t);try{return t?ME(this._delegate,e,t):ME(this._delegate,e)}catch(n){throw iT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?FE(this._delegate,e):FE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw iT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return jE(nI(e.firestore,yI),[new oy(e._key,Gm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aT(n),a=oT(n,(function(t){return new uT(e.firestore,new oE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return VE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?PE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nI(e,uI);var t=nI(e.firestore,yI);return Q_(gI(t),e._key,{source:"server"}).then((function(n){return BE(t,e,n)}))}(this._delegate):function(e){e=nI(e,uI);var t=nI(e.firestore,yI);return Q_(gI(t),e._key).then((function(n){return BE(t,e,n)}))}(this._delegate),t.then((function(e){return new uT(n.firestore,new oE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new np("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new uI(n._delegate,r,new _p(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new uI(n._delegate,r,t))}}]),e}();function iT(e,t,n){return e.message=e.message.replace(t,n),e}function aT(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!JE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function oT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JE(e[0])?e[0]:JE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uT=function(){function e(t,n){H(this,e),this._firestore=t,this._delegate=n}return $(e,[{key:"ref",get:function(){return new rT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return lE(this._delegate,e._delegate)}}]),e}(),sT=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Xd()}(void 0!==t),t}}]),n}(uT),cT=function(){function e(t,n){H(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ZE(t)}return $(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,dE(this._delegate,function(e,t,n){var r=t,i=iE("where",e);return new pE(i,r,n)}(t,n,r)))}catch(i){throw iT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,dE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=iE("orderBy",e);return new vE(n,t)}(t,n)))}catch(r){throw iT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,dE(this._delegate,function(e){return rI("limit",e),new mE("limit",e,"F")}(t)))}catch(n){throw iT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,dE(this._delegate,function(e){return rI("limitToLast",e),new mE("limitToLast",e,"L")}(t)))}catch(n){throw iT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,dE(this._delegate,gE.apply(void 0,arguments)))}catch(t){throw iT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,dE(this._delegate,kE.apply(void 0,arguments)))}catch(t){throw iT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,dE(this._delegate,bE.apply(void 0,arguments)))}catch(t){throw iT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,dE(this._delegate,xE.apply(void 0,arguments)))}catch(t){throw iT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return dI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?LE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nI(e,sI);var t=nI(e.firestore,yI),n=gI(t),r=new RE(t);return $_(n,e._query,{source:"server"}).then((function(n){return new sE(t,r,e,n)}))}(this._delegate):function(e){e=nI(e,sI);var t=nI(e.firestore,yI),n=gI(t),r=new RE(t);return fE(e._query),$_(n,e._query).then((function(n){return new sE(t,r,e,n)}))}(this._delegate),t.then((function(e){return new fT(n.firestore,new sE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aT(n),a=oT(n,(function(t){return new fT(e.firestore,new sE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return VE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lT=function(){function e(t,n){H(this,e),this._firestore=t,this._delegate=n}return $(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fT=function(){function e(t,n){H(this,e),this._firestore=t,this._delegate=n}return $(e,[{key:"query",get:function(){return new cT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return lE(this._delegate,e._delegate)}}]),e}(),hT=function(e){Z(n,e);var t=ie(n);function n(e,r){var i;return H(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return $(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rT(this.firestore,void 0===e?fI(this._delegate):fI(this._delegate,e))}catch(t){throw iT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=nI(e.firestore,yI),r=fI(e),i=NE(e.converter,t);return jE(n,[FI(MI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return hI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(nT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cT);function dT(e){return nI(e,uI)}var pT=function(){function e(){H(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ae(TI,n)}return $(e,[{key:"isEqual",value:function(e){return(e=Pe(e))instanceof TI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(xp.keyField().canonicalString())}}]),e}(),vT=function(){function e(t){H(this,e),this._delegate=t}return $(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new jI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new VI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=KE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=GE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new zI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),mT={Firestore:XE,GeoPoint:NI,Timestamp:yp,Blob:$E,Transaction:eT,WriteBatch:tT,DocumentReference:rT,DocumentSnapshot:uT,Query:cT,QueryDocumentSnapshot:sT,QuerySnapshot:fT,CollectionReference:hT,FieldPath:pT,FieldValue:vT,setLogLevel:function(e){!function(e){Wd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Be("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},mT)))}(e,(function(e,t){return new XE(e,t,new YE)})),e.registerVersion("@firebase/firestore-compat","0.1.23")}(dn);dn.initializeApp({apiKey:"AIzaSyD8VgNZ_7f5wZGCQKsryDbh_EMGJbxHMW8",authDomain:"portfolio-a4b84.firebaseapp.com",projectId:"portfolio-a4b84",storageBucket:"portfolio-a4b84.appspot.com",messagingSenderId:"913526930072",appId:"1:913526930072:web:cc344d6a5dc959fd162eed"});var yT=dn,gT=n(184);function kT(){window.scrollTo({top:document.getElementById("projects").offsetTop-48,behavior:"smooth"})}function wT(){window.scrollTo({top:document.getElementById("contact").offsetTop,behavior:"smooth"})}var bT=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(""),2),c=u[0],l=u[1],f=s((0,t.useState)(""),2),h=f[0],d=f[1];return(0,gT.jsxs)("div",{className:"home",children:[(0,gT.jsxs)("section",{className:"home-hero",children:[(0,gT.jsxs)("section",{className:"home-hero-one",children:[(0,gT.jsx)("h1",{className:"home-hero-one-title font_sans-serif font_regular",children:"Oscar Lee"}),(0,gT.jsx)("h2",{className:"home-hero-one-subtitle font_sans-serif font_bold",children:"Front-end Developer"})]}),(0,gT.jsxs)("section",{className:"home-hero-two",children:[(0,gT.jsx)("section",{className:"home-hero-two-one",children:(0,gT.jsxs)("p",{className:"home-hero-two-one-paragraph font_sans-serif font_regular",children:["Front-end developer specializing in developing web pages and dynamic web applications. See my featured projects below, or ",(0,gT.jsx)("a",{href:G,download:!0,children:"download my resume here"}),"."]})}),(0,gT.jsxs)("section",{className:"home-hero-two-two",children:[(0,gT.jsx)("span",{className:"home-hero-two-two-span primary font_sans-serif font_medium",onClick:kT,children:"View projects"}),(0,gT.jsx)("span",{className:"home-hero-two-two-span secondary font_sans-serif font_medium",onClick:wT,children:"Contact me"})]})]})]}),(0,gT.jsx)("section",{className:"home-projects",id:"projects",children:(0,gT.jsxs)("ul",{className:"home-projects-list",children:[(0,gT.jsxs)("li",{className:"home-projects-list-item",children:[(0,gT.jsx)("img",{src:B,alt:"project one",className:"home-projects-list-item-image"}),(0,gT.jsx)("p",{className:"font_bold",children:"Dashboard"})]}),(0,gT.jsxs)("li",{className:"home-projects-list-item",children:[(0,gT.jsx)("img",{src:q,alt:"project two",className:"home-projects-list-item-image"}),(0,gT.jsx)("p",{className:"font_bold",children:"bnnr"})]}),(0,gT.jsxs)("li",{className:"home-projects-list-item",children:[(0,gT.jsx)("img",{src:z,alt:"project three",className:"home-projects-list-item-image"}),(0,gT.jsx)("p",{className:"font_bold",children:"ecom"})]}),(0,gT.jsxs)("li",{className:"home-projects-list-item",children:[(0,gT.jsx)("img",{src:K,alt:"project four",className:"home-projects-list-item-image"}),(0,gT.jsx)("p",{className:"font_bold",children:"auth"})]})]})}),(0,gT.jsxs)("section",{className:"home-contact",id:"contact",children:[(0,gT.jsx)("h2",{className:"home-contact-title font_medium",children:"Contact me"}),(0,gT.jsxs)("form",{className:"home-contact-form",onSubmit:function(e){e.preventDefault(),yT.firestore().collection("messages").add({firstName:n,lastName:a,email:c,message:h}).catch((function(e){alert(e.message)})),r(""),o(""),l(""),d("")},children:[(0,gT.jsxs)("div",{className:"home-contact-form-field",children:[(0,gT.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"First name"}),(0,gT.jsx)("input",{type:"text",placeholder:"John",value:n,onChange:function(e){return r(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,gT.jsxs)("div",{className:"home-contact-form-field",children:[(0,gT.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"Last name"}),(0,gT.jsx)("input",{type:"text",placeholder:"Doe",value:a,onChange:function(e){return o(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,gT.jsxs)("div",{className:"home-contact-form-field",children:[(0,gT.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"Email address"}),(0,gT.jsx)("input",{type:"email",placeholder:"you@company.com",value:c,onChange:function(e){return l(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,gT.jsxs)("div",{className:"home-contact-form-field",children:[(0,gT.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"Message"}),(0,gT.jsx)("textarea",{placeholder:"Lorem ipsum dolor sit amet",value:h,onChange:function(e){return d(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,gT.jsx)("button",{className:"home-contact-form-field-input font_medium",children:"Send message"})]})]}),(0,gT.jsxs)("section",{className:"home-footer",children:[(0,gT.jsx)("div",{className:"home-footer-one",children:(0,gT.jsxs)("ul",{className:"home-footer-one-list",children:[(0,gT.jsxs)("li",{children:["GitHub ",(0,gT.jsx)("span",{className:"font_medium",children:"@oscarlee1"})]}),(0,gT.jsxs)("li",{children:["Email ",(0,gT.jsx)("span",{className:"font_medium",children:"imoscarlee1@gmail.com"})]})]})}),(0,gT.jsxs)("div",{className:"home-footer-two",children:[(0,gT.jsx)("p",{children:"Oscar Lee"}),(0,gT.jsx)("p",{children:"\xa9 Oscar Lee 2022"})]})]})]})},xT=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"render",value:function(){return(0,gT.jsx)("div",{className:"projects",children:(0,gT.jsx)("h1",{className:"projects-title",children:"Projects"})})}}]),n}(t.Component),_T=xT,IT=function(e){Z(n,e);var t=ie(n);function n(){return H(this,n),t.apply(this,arguments)}return $(n,[{key:"render",value:function(){return(0,gT.jsx)("div",{children:(0,gT.jsx)("h1",{children:"NotFound"})})}}]),n}(t.Component),ET=IT;var TT=function(){return(0,gT.jsx)(j,{basename:"portfolio",children:(0,gT.jsxs)(E,{children:[(0,gT.jsx)(_,{path:"/",element:(0,gT.jsx)(bT,{})}),(0,gT.jsx)(_,{path:"/projects",element:(0,gT.jsx)(_T,{})}),(0,gT.jsx)(_,{path:"*",element:(0,gT.jsx)(ET,{})})]})})},ST=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,gT.jsx)(t.StrictMode,{children:(0,gT.jsx)(TT,{})}),document.getElementById("root")),ST()}()}();
//# sourceMappingURL=main.0f3f5cec.js.map