/*! For license information please see main.db4d9542.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},368:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(368),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,T=60114,S=60109,C=60110,N=60112,A=60113,D=60120,O=60115,R=60116,P=60121,L=60128,M=60129,F=60130,V=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;x=U("react.element"),_=U("react.portal"),I=U("react.fragment"),E=U("react.strict_mode"),T=U("react.profiler"),S=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),A=U("react.suspense"),D=U("react.suspense_list"),O=U("react.memo"),R=U("react.lazy"),P=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),V=U("react.legacy_hidden")}var j,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return H(e.type);case P:return H(e._render);case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function J(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=J(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=J(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function De(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Re(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Re,Fe=!1,Ve=!1;function Ue(){null===Ce&&null===Ne||(Le(),Oe())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(me){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,Ge=null,We=!1,He=null,Qe={onError:function(e){Ke=!0,Ge=e}};function Je(e,t,n,r,i,a,o,u,s){Ke=!1,Ge=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),At=St("animationstart"),Dt=St("transitionend"),Ot=new Map,Rt=new Map,Pt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Vt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?jt(10,t):e;case 10:return 0===(e=Bt(192&~t))?jt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Jt=!0;function $t(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Pe(i,e,t,n,r)}finally{(Fe=a)||Ue()}}function Yt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Jt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=mt(ut,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Ye(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=sn(mn),gn=sn(i({},mn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),_n=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),Dn=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Pn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Vn=null;f&&"documentMode"in document&&(Vn=document.documentMode);var Un=f&&"TextEvent"in window&&!Vn,jn=f&&(!Fn||Vn&&8<Vn&&11>=Vn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){De(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jn=null,$n=null;function Yn(e){Nr(e,0)}function Xn(e){if(Y(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Jn&&(Jn.detachEvent("onpropertychange",ar),$n=Jn=null)}function ar(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Qn(t,$n,e,Te(e)),e=Yn,Fe)e(t);else{Fe=!0;try{Re(e,t)}finally{Fe=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Jn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Pt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Rt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Je.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=Ge;Ke=!1,Ge=null,We||(We=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=He,We=!1,He=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Dr]||(e[Dr]=!0,u.forEach((function(t){Sr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Pr(a,e,i,t),o.add(u))}function Pr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ve)return e(t,n);Ve=!0;try{Me(e,t,n)}finally{Ve=!1,Ue()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Ot.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=On;break;case Ct:case Nt:case At:s=wn;break;case Dt:s=Rn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Dn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Dn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Vr(d))p++;for(d=0,v=h;v;v=Vr(v))d++;for(;0<p-d;)l=Vr(l),p--;for(;0<d-p;)h=Vr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Vr(l),h=Vr(h)}l=null}else l=null;null!==s&&Ur(o,u,s,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Zn;else if(Hn(u))if(er)m=cr;else{m=ur;var y=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=sr);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ie(u,"number",u.value)),y=r?ii(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(kr=y,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(y=Fr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Jr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Yr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Yr,Zr="__reactProps$"+Yr,ei="__reactContainer$"+Yr,ti="__reactEvents$"+Yr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Jr(e);null!==e;){if(n=e[Xr])return n;e=Jr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Vi=void 0!==Ni?Ni:function(){},Ui=null,ji=null,Bi=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Ki(){switch(Di()){case Oi:return 99;case Ri:return 98;case Pi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Oi;case 98:return Ri;case 97:return Pi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Gi(e),Ei(e,t)}function Hi(e,t,n){return e=Gi(e),Ti(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Si(e)}Ji()}function Ji(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Oi,Qi),n}finally{Bi=!1}}}var $i=b.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$s(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Ys(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ys(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$s(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return m(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Da=ci(Ca);function Oa(e){if(e===Ca)throw Error(o(174));return e}function Ra(e,t){switch(fi(Da,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Pa(){li(Na),li(Aa),li(Da)}function La(e){Oa(Da.current);var t=Oa(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Fa=ci(0);function Va(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,ja=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Ua=e);qa(Ua,n)}Ua=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Ua=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Wa(e){if(e!==Ua)return!1;if(!Ba)return Ga(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=ja;t;)qa(e,t),t=Qr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Ua?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){ja=Ua=null,Ba=!1}var Qa=[];function Ja(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=b.ReactCurrentDispatcher,Ya=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Ro:Po,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Lo,e=n(r,i)}while(ro)}if($a.current=Oo,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ru;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=$a.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Do.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function mo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Do.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ya.transition;Ya.transition=1;try{e(!1),t()}finally{Ya.transition=n}}))}function Do(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Oo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Do.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return mo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Vo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Vo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(yi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ma(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Yi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=mi(t,s=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Vo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Ra(e,t.containerInfo)}var Qo,Jo,$o,Yo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,t.lanes=33554432,e):((n=Js({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Yo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Js(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Vo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Va(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Va(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Pa(),li(pi),li(di),Ja(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Oa(Da.current);if(n=t.type,null!==e&&null!=t.stateNode)Jo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Na.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":$(r),re(r,u,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Ar(Tr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Da.current),Oa(Na.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Vu&&(Vu=3):(0!==Vu&&3!==Vu||(Vu=4),null===Ru||0===(134217727&Bu)&&0===(134217727&qu)||gs(Ru,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Pa(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Vu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Va(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Va(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pa(),li(pi),li(di),Ja(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Pa(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Jo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,Yu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function mu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function yu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?ye(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=b.ReactCurrentDispatcher,Du=b.ReactCurrentOwner,Ou=0,Ru=null,Pu=null,Lu=0,Mu=0,Fu=ci(0),Vu=0,Uu=null,ju=0,Bu=0,qu=0,zu=0,Ku=null,Gu=0,Wu=1/0;function Hu(){Wu=zi()+500}var Qu,Ju=null,$u=!1,Yu=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ou)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=ju),0!==$i.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ou)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ru&&(qu|=t,4===Vu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ms(e,n),0===Ou&&(Hu(),Qi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ms(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ms(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Vt(e,e===Ru?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ks.bind(null,e),null===Ui?(Ui=[n],ji=Ti(Oi,Ji)):Ui.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ys.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ys(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Vt(e,e===Ru?Lu:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=Ts();for(Ru===e&&Lu===r||(Hu(),Is(e,r));;)try{Ns();break}catch(s){Es(e,s)}if(na(),Au.current=a,Ou=i,null!==Pu?r=0:(Ru=null,Lu=0,r=Vu),0!==(ju&qu))Is(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Ut(e))&&(r=Ss(e,n))),1===r)throw t=Uu,Is(e,0),gs(e,n),ms(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Vt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Gr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ms(e,zi()),e.callbackNode===t?ys.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Ls(),e===Ru&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(ju&qu)&&(n=Ss(e,t=Vt(e,t)))}else n=Ss(e,t=Vt(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Ut(e))&&(n=Ss(e,t))),1===n)throw n=Uu,Is(e,0),gs(e,t),ms(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ms(e,zi()),null}function ws(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Qi())}}function bs(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,ju|=t}function _s(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Pa(),li(pi),li(di),Ja();break;case 5:Ma(r);break;case 4:Pa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Ru=e,Pu=Ws(e.current,null),Lu=Mu=ju=t,Vu=0,Uu=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Pu;try{if(na(),$a.current=Oo,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Du.current=null,null===n||null===n.return){Vu=1,Uu=t,Pu=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Bs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Vu&&(Vu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Ds(n)}catch(_){t=_,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function Ts(){var e=Au.current;return Au.current=Oo,null===e?Oo:e}function Ss(e,t){var n=Ou;Ou|=16;var r=Ts();for(Ru===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Ou=n,Au.current=r,null!==Pu)throw Error(o(261));return Ru=null,Lu=0,Vu}function Cs(){for(;null!==Pu;)As(Pu)}function Ns(){for(;null!==Pu&&!Ci();)As(Pu)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Ds(e):Pu=t,Du.current=null}function Ds(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Pu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Pu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Vu&&(Vu=5)}function Os(e){var t=Ki();return Wi(99,Rs.bind(null,e,t)),null}function Rs(e,t){do{Ls()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ru&&(Pu=Ru=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Du.current=null,Br=Jt,yr(u=mr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=u,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===u)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},Jt=!1,ls=null,fs=!1,Ju=r;do{try{Ps()}catch(T){if(null===Ju)throw Error(o(330));js(Ju,T),Ju=Ju.nextEffect}}while(null!==Ju);ls=null,Ju=r;do{try{for(u=e;null!==Ju;){var k=Ju.flags;if(16&k&&ge(Ju.stateNode,""),128&k){var w=Ju.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu(Ju),Ju.flags&=-3;break;case 6:xu(Ju),Ju.flags&=-3,Tu(Ju.alternate,Ju);break;case 1024:Ju.flags&=-1025;break;case 1028:Ju.flags&=-1025,Tu(Ju.alternate,Ju);break;case 4:Tu(Ju.alternate,Ju);break;case 8:Eu(u,s=Ju);var x=s.alternate;wu(s),null!==x&&wu(x)}Ju=Ju.nextEffect}}catch(T){if(null===Ju)throw Error(o(330));js(Ju,T),Ju=Ju.nextEffect}}while(null!==Ju);if(b=qr,w=mr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&yr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Jt=!!Br,qr=Br=null,e.current=n,Ju=r;do{try{for(k=e;null!==Ju;){var _=Ju.flags;if(36&_&&yu(k,Ju.alternate,Ju),128&_){w=void 0;var I=Ju.ref;if(null!==I){var E=Ju.stateNode;Ju.tag,w=E,"function"===typeof I?I(w):I.current=w}}Ju=Ju.nextEffect}}catch(T){if(null===Ju)throw Error(o(330));js(Ju,T),Ju=Ju.nextEffect}}while(null!==Ju);Ju=null,Vi(),Ou=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Ju=r;null!==Ju;)t=Ju.nextEffect,Ju.nextEffect=null,8&Ju.flags&&((_=Ju).sibling=null,_.stateNode=null),Ju=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(ms(e,zi()),$u)throw $u=!1,e=Yu,Yu=null,e;return 0!==(8&Ou)||Qi(),null}function Ps(){for(;null!==Ju;){var e=Ju.alternate;fs||null===ls||(0!==(8&Ju.flags)?et(Ju,ls)&&(fs=!0):13===Ju.tag&&Cu(e,Ju)&&et(Ju,ls)&&(fs=!0));var t=Ju.flags;0!==(256&t)&&mu(e,Ju),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),Ju=Ju.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Vs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Vs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Qi(),!0}function Us(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ms(e,t))}function js(e,t){if(3===e.tag)Us(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Us(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ms(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Lu&n)===n&&(4===Vu||3===Vu&&(62914560&Lu)===Lu&&500>zi()-Gu?Is(e,0):zu|=n),ms(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=ju),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ms(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=Ks(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case D:return(e=Ks(19,n,t,i)).elementType=D,e.lanes=a,e;case F:return Js(n,i,a,t);case V:return(e=Ks(24,n,t,i)).elementType=V,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case N:u=11;break e;case O:u=14;break e;case R:u=16,r=null;break e;case P:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Js(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function $s(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Ys(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:yi(t.type)&&bi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ma(t,r,u,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Vo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Ua=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Vo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Vo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Vo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Vo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Vo(e,t,r,n),t.child;case 14:return a=Yi(i=t.type,t.pendingProps),jo(e,t,i,a=Yi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));Y(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=ws,Pe=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Hu(),Qi())}},Le=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ms(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,De,Oe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ou=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(368);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(368),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function D(){var e=A.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,b.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,A=3,D=!1,O=!1,R=!1;function P(e){for(var t=_(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,x(T,t)}t=_(S)}}function L(e){if(R=!1,P(e),!O)if(null!==_(T))O=!0,n(M);else{var t=_(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,R&&(R=!1,i()),D=!0;var a=A;try{for(P(n),N=_(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(T)&&I(T),P(n)}else I(T);N=_(T)}if(null!==N)var s=!0;else{var c=_(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,D=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(S,e),null===_(T)&&e===_(S)&&(R?i():R=!0,r(L,o-u))):(e.sortIndex=s,x(T,e),O||D||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},839:function(e,t,n){"use strict";e.exports=n.p+"static/media/four.3b855ffdb712faab3e3a.jpeg"},415:function(e,t,n){"use strict";e.exports=n.p+"static/media/one.f752ea8a4de6344e65fe.jpeg"},214:function(e,t,n){"use strict";e.exports=n.p+"static/media/three.e7be4e6bea96001ad521.jpeg"},815:function(e,t,n){"use strict";e.exports=n.p+"static/media/two.99931066686b48ea0e66.jpeg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".9b9c0edf.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="portfolio:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/portfolio/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[o[c]]=0},r=self.webpackChunkportfolio=self.webpackChunkportfolio||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ae},SDK_VERSION:function(){return Gt},_DEFAULT_ENTRY_NAME:function(){return Ot},_addComponent:function(){return Mt},_addOrOverwriteComponent:function(){return Ft},_apps:function(){return Pt},_clearComponents:function(){return Bt},_components:function(){return Lt},_getProvider:function(){return Ut},_registerComponent:function(){return Vt},_removeServiceInstance:function(){return jt},deleteApp:function(){return Jt},getApp:function(){return Ht},getApps:function(){return Qt},initializeApp:function(){return Wt},onLog:function(){return Xt},registerVersion:function(){return Yt},setLogLevel:function(){return Zt}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var l,f=l||(l={});f.Pop="POP",f.Push="PUSH",f.Replace="REPLACE";var h=function(e){return e};function d(e){e.preventDefault(),e.returnValue=""}function p(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function v(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname;t=void 0===t?"/":t;var n=e.search;return n=void 0===n?"":n,e=void 0===(e=e.hash)?"":e,n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function y(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function g(e,t){if(!e)throw new Error(t)}var k=(0,t.createContext)(null);var w=(0,t.createContext)(null);var b=(0,t.createContext)({outlet:null,matches:[]});function x(e){return function(e){var n=(0,t.useContext)(b).outlet;if(n)return(0,t.createElement)(A.Provider,{value:e},n);return n}(e.context)}function _(e){g(!1)}function I(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?l.Pop:u,c=e.navigator,f=e.static,h=void 0!==f&&f;S()&&g(!1);var d=z(r),p=(0,t.useMemo)((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof o&&(o=y(o));var v=o,m=v.pathname,b=void 0===m?"/":m,x=v.search,_=void 0===x?"":x,I=v.hash,E=void 0===I?"":I,T=v.state,C=void 0===T?null:T,N=v.key,A=void 0===N?"default":N,D=(0,t.useMemo)((function(){var e=B(b,d);return null==e?null:{pathname:e,search:_,hash:E,state:C,key:A}}),[d,b,_,E,C,A]);return null==D?null:(0,t.createElement)(k.Provider,{value:p},(0,t.createElement)(w.Provider,{children:a,value:{location:D,navigationType:s}}))}function E(e){var n=e.children,r=e.location;return function(e,n){S()||g(!1);var r=(0,t.useContext)(b).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=C();if(n){var c,l="string"===typeof n?y(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||g(!1),u=l}else u=s;var f=u.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=B(("string"===typeof t?y(t):t).pathname||"/",n);if(null==r)return null;var i=R(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=F(i[o],r);return a}(e,{pathname:h});0;return V(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:q([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:q([o,e.pathnameBase])})})),r)}(O(n),r)}function T(e){S()||g(!1);var n=(0,t.useContext)(k),r=n.basename,i=n.navigator,a=D(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?y(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):q([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function S(){return null!=(0,t.useContext)(w)}function C(){return S()||g(!1),(0,t.useContext)(w).location}function N(){S()||g(!1);var e=(0,t.useContext)(k),n=e.basename,r=e.navigator,i=(0,t.useContext)(b).matches,a=C().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=j(e,JSON.parse(o),a);"/"!==n&&(i.pathname=q([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}var A=(0,t.createContext)(null);function D(e){var n=(0,t.useContext)(b).matches,r=C().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return j(e,JSON.parse(i),r)}),[e,i,r])}function O(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==_&&g(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=O(e.props.children)),n.push(r)}else n.push.apply(n,O(e.props.children))})),n}function R(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||g(!1),a.relativePath=a.relativePath.slice(r.length));var o=q([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&g(!1),R(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:M(o,e.index),routesMeta:u})})),t}var P=/^:\w+$/,L=function(e){return"*"===e};function M(e,t){var n=e.split("/"),r=n.length;return n.some(L)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!L(e)})).reduce((function(e,t){return e+(P.test(t)?3:""===t?1:10)}),r)}function F(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=U({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:q([i,l.pathname]),pathnameBase:q([i,l.pathnameBase]),route:f}),"/"!==l.pathnameBase&&(i=q([i,l.pathnameBase]))}return a}function V(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(b.Provider,{children:void 0!==i.route.element?i.route.element:(0,t.createElement)(x,null),value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function j(e,t,n){var r,i="string"===typeof e?y(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?y(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:K(a),hash:G(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var q=function(e){return e.join("/").replace(/\/\/+/g,"/")},z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},K=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},G=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function J(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){function t(){var e=o.location,t=u.state||{};return[t.idx,h({pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"})]}function n(e){return"string"===typeof e?e:m(e)}function r(e,t){return void 0===t&&(t=null),h(c({pathname:k.pathname,hash:"",search:""},"string"===typeof e?y(e):e,{state:t,key:v()}))}function i(e){f=e,e=t(),g=e[0],k=e[1],w.call({action:f,location:k})}function a(e){u.go(e)}void 0===e&&(e={});var o=void 0===(e=e.window)?document.defaultView:e,u=o.history,s=null;o.addEventListener("popstate",(function(){if(s)b.call(s),s=null;else{var e=l.Pop,n=t(),r=n[0];if(n=n[1],b.length){if(null!=r){var o=g-r;o&&(s={action:e,location:n,retry:function(){a(-1*o)}},a(o))}}else i(e)}}));var f=l.Pop,g=(e=t())[0],k=e[1],w=p(),b=p();return null==g&&(g=0,u.replaceState(c({},u.state,{idx:g}),"")),{get action(){return f},get location(){return k},createHref:n,push:function e(t,a){var s=l.Push,c=r(t,a);if(!b.length||(b.call({action:s,location:c,retry:function(){e(t,a)}}),0)){var f=[{usr:c.state,key:c.key,idx:g+1},n(c)];c=f[0],f=f[1];try{u.pushState(c,"",f)}catch(lp){o.location.assign(f)}i(s)}},replace:function e(t,a){var o=l.Replace,s=r(t,a);b.length&&(b.call({action:o,location:s,retry:function(){e(t,a)}}),1)||(s=[{usr:s.state,key:s.key,idx:g},n(s)],u.replaceState(s[0],"",s[1]),i(o))},go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(e){return w.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&o.addEventListener("beforeunload",d),function(){t(),b.length||o.removeEventListener("beforeunload",d)}}}}({window:i}));var o=a.current,u=s((0,t.useState)({action:o.action,location:o.location}),2),f=u[0],g=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(g)}),[o]),(0,t.createElement)(I,{basename:n,children:r,location:f.location,navigationType:f.action,navigator:o})}var $=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=H(e,Q),f=T(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=N(),s=C(),c=D(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||m(s)===m(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",W({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));var Y=n(415),X=n(815),Z=n(214),ee=n(839);function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&ue(e,t)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function he(e,t){if(t&&("object"===fe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function de(e){var t=le();return function(){var n,r=ce(e);if(t){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return he(this,n)}}function pe(e,t,n){return pe=le()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ue(i,n.prototype),i},pe.apply(null,arguments)}function ve(e){var t="function"===typeof Map?new Map:void 0;return ve=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return pe(e,arguments,ce(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ue(n,e)},ve(e)}var me=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(me(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ge=function(e){return function(e){var t=me(e);return ye.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ke=function(e){try{return ye.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function we(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=we(e[n],t[n]));return e}var be=function(){function e(){var t=this;ne(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ie(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function xe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(a)),""].join(".")}function _e(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Te(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Se(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ce(){var e=_e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ne(){return"object"===typeof indexedDB}var Ae=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(oe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(oe(a),De.prototype.create),a}return ie(n)}(ve(Error)),De=function(){function e(t,n,r){ne(this,e),this.service=t,this.serviceName=n,this.errors=r}return ie(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Oe(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ae(n,a,t);return o}}]),e}();function Oe(e,t){return e.replace(Re,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Re=/\{\$([^}]+)}/g;function Pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Le(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Me(u)&&Me(s)){if(!Le(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Me(e){return null!==e&&"object"===typeof e}function Fe(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ve(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ue(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function je(e,t){var n=new Be(e,t);return n.subscribe.bind(n)}var Be=function(){function e(t,n){var r=this;ne(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ie(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ae(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=qe),void 0===r.error&&(r.error=qe),void 0===r.complete&&(r.complete=qe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function qe(){}function ze(e){return e&&e._delegate?e._delegate:e}function Ke(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ge(e){return function(e){if(Array.isArray(e))return a(e)}(e)||Ke(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function He(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){We(a,r,i,o,u,"next",e)}function u(e){We(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Qe=n(757),Je=n.n(Qe),$e=function(){function e(t,n,r){ne(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ie(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ye="[DEFAULT]",Xe=function(){function e(t,n){ne(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ie(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new be;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ye})}catch(c){}var t,n=ae(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=He(Qe.mark((function e(){var t;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ge(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ge(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ae(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ye?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.component?this.component.multipleInstances?e:Ye:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ze,et,tt=function(){function e(t){ne(this,e),this.name=t,this.providers=new Map}return ie(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Xe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),nt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(et||(et={}));var rt={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},it=et.INFO,at=(te(Ze={},et.DEBUG,"log"),te(Ze,et.VERBOSE,"log"),te(Ze,et.INFO,"info"),te(Ze,et.WARN,"warn"),te(Ze,et.ERROR,"error"),Ze),ot=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=at[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ut=function(){function e(t){ne(this,e),this.name=t,this._logLevel=it,this._logHandler=ot,this._userLogHandler=null,nt.push(this)}return ie(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in et))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?rt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.DEBUG].concat(t)),this._logHandler.apply(this,[this,et.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.VERBOSE].concat(t)),this._logHandler.apply(this,[this,et.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.INFO].concat(t)),this._logHandler.apply(this,[this,et.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.WARN].concat(t)),this._logHandler.apply(this,[this,et.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.ERROR].concat(t)),this._logHandler.apply(this,[this,et.ERROR].concat(t))}}]),e}();function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt,ft;var ht=new WeakMap,dt=new WeakMap,pt=new WeakMap,vt=new WeakMap,mt=new WeakMap;var yt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return dt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function gt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ft||(ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(bt(this),n),wt(ht.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wt(e.apply(bt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[bt(this),t].concat(r));return pt.set(a,t.sort?t.sort():[t]),wt(a)}}function kt(e){return"function"===typeof e?gt(e):(e instanceof IDBTransaction&&function(e){if(!dt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));dt.set(e,t)}}(e),t=e,(lt||(lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,yt):e);var t}function wt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(wt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ht.set(t,e)})).catch((function(){})),mt.set(t,e),t}(e);if(vt.has(e))return vt.get(e);var t=kt(e);return t!==e&&(vt.set(e,t),mt.set(t,e)),t}var bt=function(e){return mt.get(e)};var xt,_t,It=["get","getKey","getAll","getAllKeys","count"],Et=["put","add","delete","clear"],Tt=new Map;function St(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Tt.get(t))return Tt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Et.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||It.includes(n))){var a=function(){var e=He(Qe.mark((function e(t){var a,o,u,s,c,l,f=arguments;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Tt.set(t,a),a}}}yt=function(e){return ct(ct({},e),{},{get:function(t,n,r){return St(t,n)||e.get(t,n,r)},has:function(t,n){return!!St(t,n)||e.has(t,n)}})}(yt);var Ct=function(){function e(t){ne(this,e),this.container=t}return ie(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Nt="@firebase/app",At="0.7.30",Dt=new ut("@firebase/app"),Ot="[DEFAULT]",Rt=(te(xt={},Nt,"fire-core"),te(xt,"@firebase/app-compat","fire-core-compat"),te(xt,"@firebase/analytics","fire-analytics"),te(xt,"@firebase/analytics-compat","fire-analytics-compat"),te(xt,"@firebase/app-check","fire-app-check"),te(xt,"@firebase/app-check-compat","fire-app-check-compat"),te(xt,"@firebase/auth","fire-auth"),te(xt,"@firebase/auth-compat","fire-auth-compat"),te(xt,"@firebase/database","fire-rtdb"),te(xt,"@firebase/database-compat","fire-rtdb-compat"),te(xt,"@firebase/functions","fire-fn"),te(xt,"@firebase/functions-compat","fire-fn-compat"),te(xt,"@firebase/installations","fire-iid"),te(xt,"@firebase/installations-compat","fire-iid-compat"),te(xt,"@firebase/messaging","fire-fcm"),te(xt,"@firebase/messaging-compat","fire-fcm-compat"),te(xt,"@firebase/performance","fire-perf"),te(xt,"@firebase/performance-compat","fire-perf-compat"),te(xt,"@firebase/remote-config","fire-rc"),te(xt,"@firebase/remote-config-compat","fire-rc-compat"),te(xt,"@firebase/storage","fire-gcs"),te(xt,"@firebase/storage-compat","fire-gcs-compat"),te(xt,"@firebase/firestore","fire-fst"),te(xt,"@firebase/firestore-compat","fire-fst-compat"),te(xt,"fire-js","fire-js"),te(xt,"firebase","fire-js-all"),xt),Pt=new Map,Lt=new Map;function Mt(e,t){try{e.container.addComponent(t)}catch(n){Dt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ft(e,t){e.container.addOrOverwriteComponent(t)}function Vt(e){var t=e.name;if(Lt.has(t))return Dt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Lt.set(t,e);var n,r=ae(Pt.values());try{for(r.s();!(n=r.n()).done;){Mt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ut(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot;Ut(e,t).clearInstance(n)}function Bt(){Lt.clear()}var qt=(te(_t={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(_t,"bad-app-name","Illegal App name: '{$appName}"),te(_t,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),te(_t,"app-deleted","Firebase App named '{$appName}' already deleted"),te(_t,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),te(_t,"invalid-log-argument","First argument to `onLog` must be null or a function."),te(_t,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),te(_t,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),te(_t,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),te(_t,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),_t),zt=new De("app","Firebase",qt),Kt=function(){function e(t,n,r){var i=this;ne(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $e("app",(function(){return i}),"PUBLIC"))}return ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw zt.create("app-deleted",{appName:this._name})}}]),e}(),Gt="9.9.2";function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw zt.create("bad-app-name",{appName:String(i)});var a=Pt.get(i);if(a){if(Le(e,a.options)&&Le(r,a.config))return a;throw zt.create("duplicate-app",{appName:i})}var o,u=new tt(i),s=ae(Lt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Kt(e,r,u);return Pt.set(i,l),l}function Ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=Pt.get(e);if(!t)throw zt.create("no-app",{appName:e});return t}function Qt(){return Array.from(Pt.values())}function Jt(e){return $t.apply(this,arguments)}function $t(){return($t=He(Qe.mark((function e(t){var n;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Pt.has(n)){e.next=6;break}return Pt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t,n){var r,i=null!==(r=Rt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Dt.warn(u.join(" "))}Vt(new $e("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Xt(e,t){if(null!==e&&"function"!==typeof e)throw zt.create("invalid-log-argument");!function(e,t){var n,r=ae(nt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=rt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:et[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Zt(e){var t;t=e,nt.forEach((function(e){e.setLogLevel(t)}))}var en="firebase-heartbeat-store",tn=null;function nn(){return tn||(tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=wt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(wt(u.result),e.oldVersion,e.newVersion,wt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(en)}}).catch((function(e){throw zt.create("idb-open",{originalErrorMessage:e.message})}))),tn}function rn(e){return an.apply(this,arguments)}function an(){return an=He(Qe.mark((function e(t){var n,r,i;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nn();case 3:return r=e.sent,e.abrupt("return",r.transaction(en).objectStore(en).get(sn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Ae?Dt.warn(e.t0.message):(i=zt.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Dt.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),an.apply(this,arguments)}function on(e,t){return un.apply(this,arguments)}function un(){return un=He(Qe.mark((function e(t,n){var r,i,a,o,u;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nn();case 3:return i=e.sent,a=i.transaction(en,"readwrite"),o=a.objectStore(en),e.next=8,o.put(n,sn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Ae?Dt.warn(e.t0.message):(u=zt.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Dt.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),un.apply(this,arguments)}function sn(e){return"".concat(e.name,"!").concat(e.options.appId)}var cn=function(){function e(t){var n=this;ne(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new pn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ie(e,[{key:"triggerHeartbeat",value:function(){var e=He(Qe.mark((function e(){var t,n,r;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ln(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=He(Qe.mark((function e(){var t,n,r,i,a;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ln(),n=fn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ge(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ln(){return(new Date).toISOString().substring(0,10)}function fn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ae(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),vn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),vn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var hn,dn,pn=function(){function e(t){ne(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ie(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=He(Qe.mark((function e(){return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=He(Qe.mark((function e(){var t;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,rn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=He(Qe.mark((function e(t){var n,r;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",on(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=He(Qe.mark((function e(t){var n,r;return Qe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",on(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ge(r.heartbeats),Ge(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vn(e){return ge(JSON.stringify({version:2,heartbeats:e})).length}hn="",Vt(new $e("platform-logger",(function(e){return new Ct(e)}),"PRIVATE")),Vt(new $e("heartbeat",(function(e){return new cn(e)}),"PRIVATE")),Yt(Nt,At,hn),Yt(Nt,At,"esm2017"),Yt("fire-js","");var mn=function(){function e(t,n){var r=this;ne(this,e),this._delegate=t,this.firebase=n,Mt(t,new $e("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Jt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Mt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ft(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),yn=(te(dn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(dn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),dn),gn=new De("app-compat","Firebase",yn);var kn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Wt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Pe(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Yt,setLogLevel:Zt,onLog:Xt,apps:null,SDK_VERSION:Gt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Vt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw gn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&we(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Pe(n,e=e||Ot))throw gn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(mn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){we(n,e)},createSubscribe:je,ErrorFactory:De,deepExtend:we}),n}(),wn=new ut("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){wn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var bn=self.firebase.SDK_VERSION;bn&&bn.indexOf("LITE")>=0&&wn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var xn=kn;!function(e){Yt("@firebase/app-compat","0.1.31",e)}();function _n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}function In(){return In="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_n(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},In.apply(this,arguments)}xn.registerVersion("firebase","9.9.2","app-compat");function En(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Tn;Object.create;var Sn="facebook.com",Cn="github.com",Nn="google.com",An="password",Dn="twitter.com",On="EMAIL_SIGNIN",Rn="PASSWORD_RESET",Pn="RECOVER_EMAIL",Ln="REVERT_SECOND_FACTOR_ADDITION",Mn="VERIFY_AND_CHANGE_EMAIL",Fn="VERIFY_EMAIL";function Vn(){return te({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Un=function(){var e;return te(e={},"admin-restricted-operation","This operation is restricted to administrators only."),te(e,"argument-error",""),te(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),te(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),te(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),te(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),te(e,"cordova-not-ready","Cordova framework is not ready."),te(e,"cors-unsupported","This browser is not supported."),te(e,"credential-already-in-use","This credential is already associated with a different user account."),te(e,"custom-token-mismatch","The custom token corresponds to a different audience."),te(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),te(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),te(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),te(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),te(e,"email-already-in-use","The email address is already in use by another account."),te(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),te(e,"expired-action-code","The action code has expired."),te(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),te(e,"internal-error","An internal AuthError has occurred."),te(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),te(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),te(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),te(e,"invalid-auth-event","An internal AuthError has occurred."),te(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),te(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),te(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),te(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),te(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),te(e,"invalid-email","The email address is badly formatted."),te(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),te(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),te(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),te(e,"invalid-credential","The supplied auth credential is malformed or has expired."),te(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),te(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),te(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),te(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),te(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),te(e,"wrong-password","The password is invalid or the user does not have a password."),te(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),te(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),te(e,"invalid-provider-id","The specified provider ID is invalid."),te(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),te(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),te(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),te(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),te(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),te(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),te(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),te(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),te(e,"missing-continue-uri","A continue URL must be provided in the request."),te(e,"missing-iframe-start","An internal AuthError has occurred."),te(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),te(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),te(e,"missing-multi-factor-info","No second factor identifier is provided."),te(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),te(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),te(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),te(e,"app-deleted","This instance of FirebaseApp has been deleted."),te(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),te(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),te(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),te(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),te(e,"no-auth-event","An internal AuthError has occurred."),te(e,"no-such-provider","User was not linked to an account with the given provider."),te(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),te(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),te(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),te(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),te(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),te(e,"provider-already-linked","User can only be linked to one identity for the given provider."),te(e,"quota-exceeded","The project's quota for this operation has been exceeded."),te(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),te(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),te(e,"rejected-credential","The request contains malformed or mismatching credentials."),te(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),te(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),te(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),te(e,"timeout","The operation has timed out."),te(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),te(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),te(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),te(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),te(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),te(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),te(e,"unverified-email","The operation requires a verified email."),te(e,"user-cancelled","The user did not grant your application the permissions it requested."),te(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),te(e,"user-disabled","The user account has been disabled by an administrator."),te(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),te(e,"user-signed-out",""),te(e,"weak-password","The password must be 6 characters long or more."),te(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),te(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},jn=Vn,Bn=new De("auth","Firebase",Vn()),qn=new ut("@firebase/auth");function zn(e){if(qn.logLevel<=et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];qn.error.apply(qn,["Auth (".concat(Gt,"): ").concat(e)].concat(n))}}function Kn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Qn.apply(void 0,[e].concat(n))}function Gn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qn.apply(void 0,[e].concat(n))}function Wn(e,t,n){var r=Object.assign(Object.assign({},jn()),te({},t,n));return new De("auth","Firebase",r).create(t,{appName:e.name})}function Hn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Kn(e,"argument-error"),Wn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ge(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ge(o)))}return Bn.create.apply(Bn,[e].concat(n))}function Jn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Qn.apply(void 0,[t].concat(r))}}function $n(e){var t="INTERNAL ASSERTION FAILED: "+e;throw zn(t),new Error(t)}function Yn(e,t){e||$n(t)}var Xn=new Map;function Zn(e){Yn(e instanceof Function,"Expected a class definition");var t=Xn.get(e);return t?(Yn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xn.set(e,t),t)}function er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tr(){return"http:"===nr()||"https:"===nr()}function nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var rr=function(){function e(t,n){ne(this,e),this.shortDelay=t,this.longDelay=n,Yn(n>t,"Short delay should be less than long delay!"),this.isMobile=Ie()||Se()}return ie(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tr()||Te()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ir(e,t){Yn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ar=function(){function e(){ne(this,e)}return ie(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void $n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void $n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void $n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),or=(te(Tn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),te(Tn,"MISSING_CUSTOM_TOKEN","internal-error"),te(Tn,"INVALID_IDENTIFIER","invalid-email"),te(Tn,"MISSING_CONTINUE_URI","internal-error"),te(Tn,"INVALID_PASSWORD","wrong-password"),te(Tn,"MISSING_PASSWORD","internal-error"),te(Tn,"EMAIL_EXISTS","email-already-in-use"),te(Tn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),te(Tn,"INVALID_IDP_RESPONSE","invalid-credential"),te(Tn,"INVALID_PENDING_TOKEN","invalid-credential"),te(Tn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),te(Tn,"MISSING_REQ_TYPE","internal-error"),te(Tn,"EMAIL_NOT_FOUND","user-not-found"),te(Tn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),te(Tn,"EXPIRED_OOB_CODE","expired-action-code"),te(Tn,"INVALID_OOB_CODE","invalid-action-code"),te(Tn,"MISSING_OOB_CODE","internal-error"),te(Tn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),te(Tn,"INVALID_ID_TOKEN","invalid-user-token"),te(Tn,"TOKEN_EXPIRED","user-token-expired"),te(Tn,"USER_NOT_FOUND","user-token-expired"),te(Tn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),te(Tn,"INVALID_CODE","invalid-verification-code"),te(Tn,"INVALID_SESSION_INFO","invalid-verification-id"),te(Tn,"INVALID_TEMPORARY_PROOF","invalid-credential"),te(Tn,"MISSING_SESSION_INFO","missing-verification-id"),te(Tn,"SESSION_EXPIRED","code-expired"),te(Tn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),te(Tn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),te(Tn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),te(Tn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),te(Tn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),te(Tn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),te(Tn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),te(Tn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),te(Tn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),te(Tn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),te(Tn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Tn),ur=new rr(3e4,6e4);function sr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function cr(e,t,n,r){return lr.apply(this,arguments)}function lr(){return lr=He(Je().mark((function e(t,n,r,i){var a,o=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",fr(t,a,He(Je().mark((function e(){var a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Fe(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ar.fetch()(vr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function fr(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=He(Je().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},or),n),e.prev=2,a=new mr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw yr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw yr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw yr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw yr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Wn(t,p,d);case 34:Kn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ae)){e.next=41;break}throw e.t0;case 41:Kn(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function dr(e,t,n,r){return pr.apply(this,arguments)}function pr(){return pr=He(Je().mark((function e(t,n,r,i){var a,o,u=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,cr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Kn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ir(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var mr=function(){function e(t){var n=this;ne(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Gn(n.auth,"network-request-failed"))}),ur.get())}))}return ie(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function yr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Gn(e,t,r);return i.customData._tokenResponse=n,i}function gr(e,t){return kr.apply(this,arguments)}function kr(){return(kr=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wr(e,t){return br.apply(this,arguments)}function br(){return(br=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Er(){return Er=He(Je().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ze(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Jn((a=Sr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ir(Tr(a.auth_time)),issuedAtTime:Ir(Tr(a.iat)),expirationTime:Ir(Tr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Tr(e){return 1e3*Number(e)}function Sr(e){var t,n=s(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return zn("JWT malformed, contained fewer than 3 sections"),null;try{var o=ke(i);return o?JSON.parse(o):(zn("Failed to decode base64 JWT payload"),null)}catch(u){return zn("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Cr(e,t){return Nr.apply(this,arguments)}function Nr(){return Nr=He(Je().mark((function e(t,n){var r=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ae&&Ar(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Nr.apply(this,arguments)}function Ar(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Dr=function(){function e(t){ne(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ie(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Or=function(){function e(t,n){ne(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ie(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ir(this.lastLoginAt),this.creationTime=Ir(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Rr(e){return Pr.apply(this,arguments)}function Pr(){return Pr=He(Je().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Cr(t,xr(r,{idToken:i}));case 6:Jn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Fr(o.providerUserInfo):[],s=Mr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Or(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Lr(){return(Lr=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ze(t),e.next=3,Rr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ge(n),Ge(t))}function Fr(e){return e.map((function(e){var t=e.providerId,n=En(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Vr(e,t){return Ur.apply(this,arguments)}function Ur(){return(Ur=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(t,{},He(Je().mark((function e(){var r,i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=vr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ar.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jr=function(){function e(){ne(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ie(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Jn(e.idToken,"internal-error"),Jn("undefined"!==typeof e.idToken,"internal-error"),Jn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Sr(e);return Jn(t,"internal-error"),Jn("undefined"!==typeof t.exp,"internal-error"),Jn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=He(Je().mark((function e(t){var n,r=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Jn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=He(Je().mark((function e(t,n){var r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return $n("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Jn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Jn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Jn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Br(e,t){Jn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var qr=function(){function e(t){ne(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=En(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ge(a.providerData):[],this.metadata=new Or(a.createdAt||void 0,a.lastLoginAt||void 0)}return ie(e,[{key:"getIdToken",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Jn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Er.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Lr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Jn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Jn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=He(Je().mark((function e(t){var n,r,i=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Rr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Cr(this,gr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Jn(k&&_,t,"internal-error");var I=jr.fromJSON(this.name,_);Jn("string"===typeof k,t,"internal-error"),Br(f,t.name),Br(h,t.name),Jn("boolean"===typeof w,t,"internal-error"),Jn("boolean"===typeof b,t,"internal-error"),Br(d,t.name),Br(p,t.name),Br(v,t.name),Br(m,t.name),Br(y,t.name),Br(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=He(Je().mark((function t(n,r){var i,a,o,u=arguments;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new jr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Rr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),zr=function(){function e(){ne(this,e),this.type="NONE",this.storage={}}return ie(e,[{key:"_isAvailable",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();zr.type="NONE";var Kr=zr;function Gr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Wr=function(){function e(t,n,r){ne(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Gr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Gr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ie(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?qr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=He(Je().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Zn(Kr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Zn(Kr),u=Gr(i,n.config.apiKey,n.name),s=null,c=ae(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=qr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Hr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Yr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zr(t))return"Blackberry";if(ei(t))return"Webos";if(Jr(t))return"Safari";if((t.includes("chrome/")||$r(t))&&!t.includes("edge/"))return"Chrome";if(Xr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/firefox\//i.test(e)}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/crios\//i.test(e)}function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/iemobile/i.test(e)}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/android/i.test(e)}function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/blackberry/i.test(e)}function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/webos/i.test(e)}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ni(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return ti(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ri(){return Ce()&&10===document.documentMode}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return ti(e)||Xr(e)||ei(e)||Zr(e)||/windows phone/i.test(e)||Yr(e)}function ai(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Hr(_e());break;case"Worker":t="".concat(Hr(_e()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Gt,"/").concat(r)}var oi=function(){function e(t){ne(this,e),this.auth=t,this.queue=[]}return ie(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=He(Je().mark((function e(t){var n,r,i,a,o,u,s,c;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=ae(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=ae(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ui=function(){function e(t,n,r){ne(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ci(this),this.idTokenSubscription=new ci(this),this.beforeStateQueue=new oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ie(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Zn(t)),this._initializationPromise=this.queue(He(Je().mark((function r(){var i,a;return Je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Wr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=He(Je().mark((function e(t){var n,r,i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Jn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ze(t):null)&&Jn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=He(Je().mark((function e(t){var n,r=this,i=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Jn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(He(Je().mark((function n(){return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Zn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new De("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Jn(n=t&&Zn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Wr.create(this,[Zn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=He(Je().mark((function e(t){var n=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Jn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Jn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ai(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=He(Je().mark((function e(){var t,n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function si(e){return ze(e)}var ci=function(){function e(t){var n=this;ne(this,e),this.auth=t,this.observer=null,this.addObserver=je((function(e){return n.observer=e}))}return ie(e,[{key:"next",get:function(){return Jn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function li(e,t,n){var r=si(e);Jn(r._canInitEmulator,r,"emulator-config-failed"),Jn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=fi(t),o=function(e){var t=fi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:hi(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:hi(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var di=function(){function e(t,n){ne(this,e),this.providerId=t,this.signInMethod=n}return ie(e,[{key:"toJSON",value:function(){return $n("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return $n("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return $n("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return $n("not implemented")}}]),e}();function pi(e,t){return vi.apply(this,arguments)}function vi(){return(vi=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:resetPassword",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){return bi.apply(this,arguments)}function bi(){return(bi=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPassword",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xi(e,t){return _i.apply(this,arguments)}function _i(){return(_i=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:sendOobCode",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e,t){return Ei.apply(this,arguments)}function Ei(){return(Ei=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ti(e,t){return Si.apply(this,arguments)}function Si(){return(Si=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return(Ni=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(e,t){return Di.apply(this,arguments)}function Di(){return(Di=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oi(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e,t){return Li.apply(this,arguments)}function Li(){return(Li=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mi=function(e){se(n,e);var t=de(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ne(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ie(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",wi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Oi(t,{email:this._email,oobCode:this._password}));case 5:Kn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",mi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Pi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Kn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(di);function Fi(e,t){return Vi.apply(this,arguments)}function Vi(){return(Vi=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithIdp",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ui=function(e){se(n,e);var t=de(n);function n(){var e;return ne(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ie(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Fi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fe(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=En(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(di);function ji(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:sendVerificationCode",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(){return(qi=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(){return(zi=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw yr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ki=te({},"USER_NOT_FOUND","user-not-found");function Gi(){return(Gi=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,r),Ki));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wi=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ie(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return qi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return zi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Gi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(di);var Hi=function(){function e(t){var n,r,i,a,o,u;ne(this,e);var s=Ve(Ue(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Jn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ie(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ve(Ue(e)).link,n=t?Ve(Ue(t)).deep_link_id:null,r=Ve(Ue(e)).deep_link_id;return(r?Ve(Ue(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Qi=function(){function e(){ne(this,e),this.providerId=e.PROVIDER_ID}return ie(e,null,[{key:"credential",value:function(e,t){return Mi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Hi.parseLink(t);return Jn(n,"argument-error"),Mi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Qi.PROVIDER_ID="password",Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ji=function(){function e(t){ne(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ie(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),$i=function(e){se(n,e);var t=de(n);function n(){var e;return ne(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ie(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ge(this.scopes)}}]),n}(Ji),Yi=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Jn(e.idToken||e.accessToken,"argument-error"),Ui._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Jn("providerId"in t&&"signInMethod"in t,"argument-error"),Ui._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}($i),Xi=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.call(this,"facebook.com")}return ie(n,null,[{key:"credential",value:function(e){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}($i);Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Xi.PROVIDER_ID="facebook.com";var Zi=function(e){se(n,e);var t=de(n);function n(){var e;return ne(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ie(n,null,[{key:"credential",value:function(e,t){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}($i);Zi.GOOGLE_SIGN_IN_METHOD="google.com",Zi.PROVIDER_ID="google.com";var ea=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.call(this,"github.com")}return ie(n,null,[{key:"credential",value:function(e){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}($i);ea.GITHUB_SIGN_IN_METHOD="github.com",ea.PROVIDER_ID="github.com";var ta=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ie(n,[{key:"_getIdTokenResponse",value:function(e){return Fi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(di),na=function(e){se(n,e);var t=de(n);function n(e){return ne(this,n),Jn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ie(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ta.fromJSON(e);return Jn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ta._create(r,n)}catch(i){return null}}}]),n}(Ji),ra=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.call(this,"twitter.com")}return ie(n,null,[{key:"credential",value:function(e,t){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}($i);function ia(e,t){return aa.apply(this,arguments)}function aa(){return(aa=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signUp",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ra.TWITTER_SIGN_IN_METHOD="twitter.com",ra.PROVIDER_ID="twitter.com";var oa=function(){function e(t){ne(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ie(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=He(Je().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,qr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ua(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=He(Je().mark((function t(n,r,i){var a;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ua(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ua(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function sa(){return sa=He(Je().mark((function e(t){var n,r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=si(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new oa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ia(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,oa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}var ca=function(e){se(n,e);var t=de(n);function n(e,r,i,a){var o,u;return ne(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(oe(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ie(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ae);function la(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ca._fromErrorAndOperation(e,n,t,r);throw n}))}function fa(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ha(e,t){return da.apply(this,arguments)}function da(){return da=He(Je().mark((function e(t,n){var r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze(t),e.next=3,ma(!0,r,n);case 3:return e.t0=wr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=fa(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function pa(e,t){return va.apply(this,arguments)}function va(){return va=He(Je().mark((function e(t,n){var r,i,a=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Cr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",oa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ma(e,t,n){return ya.apply(this,arguments)}function ya(){return(ya=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rr(n);case 2:i=fa(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Jn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(e,t){return ka.apply(this,arguments)}function ka(){return ka=He(Je().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Cr(t,la(a,o,n,t),r);case 6:return Jn((u=e.sent).idToken,a,"internal-error"),Jn(s=Sr(u.idToken),a,"internal-error"),c=s.sub,Jn(t.uid===c,a,"user-mismatch"),e.abrupt("return",oa._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Kn(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ka.apply(this,arguments)}function wa(e,t){return ba.apply(this,arguments)}function ba(){return ba=He(Je().mark((function e(t,n){var r,i,a,o,u=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,la(t,i,n);case 4:return a=e.sent,e.next=7,oa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function xa(e,t){return _a.apply(this,arguments)}function _a(){return(_a=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(si(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e,t){return Ea.apply(this,arguments)}function Ea(){return(Ea=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze(t),e.next=3,ma(!1,r,n.providerId);case 3:return e.abrupt("return",pa(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(ze(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t){return Na.apply(this,arguments)}function Na(){return(Na=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithCustomToken",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(){return(Aa=He(Je().mark((function e(t,n){var r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=si(t),e.next=3,Ca(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,oa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Da=function(){function e(t,n){ne(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ie(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Oa._fromServerResponse(e,t):Kn(e,"internal-error")}}]),e}(),Oa=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ie(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Da);function Ra(e,t,n){var r;Jn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Jn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Jn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Jn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Pa(){return(Pa=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ra(i,a,r),e.next=5,Ti(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(){return(La=He(Je().mark((function e(t,n,r){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pi(ze(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(){return(Ma=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(ze(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e,t){return Va.apply(this,arguments)}function Va(){return(Va=He(Je().mark((function e(t,n){var r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze(t),e.next=3,pi(r,{oobCode:n});case 3:i=e.sent,Jn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Jn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Jn(i.mfaInfo,r,"internal-error");case 13:Jn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Da._fromServerResponse(si(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ua(){return(Ua=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa(ze(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ja(e,t,n){return Ba.apply(this,arguments)}function Ba(){return(Ba=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),e.next=3,ia(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,oa._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qa(){return(qa=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),a={requestType:"EMAIL_SIGNIN",email:n},Jn(r.handleCodeInApp,i,"argument-error"),r&&Ra(i,a,r),e.next=6,Ci(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(){return(za=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),Jn((a=Qi.credentialWithLink(n,r||er()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",xa(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ka(e,t){return Ga.apply(this,arguments)}function Ga(){return(Ga=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:createAuthUri",sr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(){return(Wa=He(Je().mark((function e(t,n){var r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tr()?er():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ka(ze(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ha(){return(Ha=He(Je().mark((function e(t,n){var r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ra(r.auth,a,n),e.next=8,Ii(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qa(){return(Qa=He(Je().mark((function e(t,n,r){var i,a,o,u;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ra(i.auth,o,r),e.next=8,Ai(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ja(e,t){return $a.apply(this,arguments)}function $a(){return($a=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(){return(Ya=He(Je().mark((function e(t,n){var r,i,a,o,u,s,c;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ze(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Cr(a,Ja(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e,t,n){return Za.apply(this,arguments)}function Za(){return(Za=He(Je().mark((function e(t,n,r){var i,a,o,u;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Cr(t,mi(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eo=ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ne(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),to=function(e){se(n,e);var t=de(n);function n(e,r,i,a){var o;return ne(this,n),(o=t.call(this,e,r,i)).username=a,o}return ie(n)}(eo),no=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"facebook.com",r)}return ie(n)}(eo),ro=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ie(n)}(to),io=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"google.com",r)}return ie(n)}(eo),ao=function(e){se(n,e);var t=de(n);function n(e,r,i){return ne(this,n),t.call(this,e,"twitter.com",r,i)}return ie(n)}(to);function oo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Sr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new eo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new no(a,i);case"github.com":return new ro(a,i);case"google.com":return new io(a,i);case"twitter.com":return new ao(a,i,e.screenName||null);case"custom":case"anonymous":return new eo(a,null);default:return new eo(a,r,i)}}(n)}var uo=function(){function e(t,n){ne(this,e),this.type=t,this.credential=n}return ie(e,[{key:"toJSON",value:function(){return{multiFactorSession:te({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),so=function(){function e(t,n,r){ne(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ie(e,[{key:"resolveSignIn",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=si(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Da._fromServerResponse(r,e)}));Jn(i.mfaPendingCredential,r,"internal-error");var o=uo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=He(Je().mark((function e(t){var a,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,oa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Jn(n.user,r,"internal-error"),e.abrupt("return",oa._forOperation(n.user,n.operationType,u));case 17:Kn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function co(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:start",sr(e,t))}var lo=function(){function e(t){var n=this;ne(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Da._fromServerResponse(t.auth,e)})))}))}return ie(e,[{key:"getSession",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=uo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=He(Je().mark((function e(t,n){var r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Cr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=He(Je().mark((function e(t){var n,r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Cr(this.user,cr(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",sr(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),fo=new WeakMap;var ho="__sak",po=function(){function e(t,n){ne(this,e),this.storageRetriever=t,this.type=n}return ie(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ho,"1"),this.storage.removeItem(ho),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var vo=function(e){se(n,e);var t=de(n);function n(){var e;return ne(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=_e();return Jr(e)||ti(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ii(),e._shouldAllowMigration=!0,e}return ie(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ri()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=He(Je().mark((function e(t,r){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(ce(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=He(Je().mark((function e(t){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(ce(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(ce(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(po);vo.type="LOCAL";var mo=vo,yo=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ie(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(po);yo.type="SESSION";var go=yo;function ko(e){return Promise.all(e.map(function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var wo=function(){function e(t){ne(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ie(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=He(Je().mark((function e(t){var n,r,i,a,o,u,s,c;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ko(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function bo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wo.receivers=[];var xo=function(){function e(t){ne(this,e),this.target=t,this.handlers=new Set}return ie(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=He(Je().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=bo("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function _o(){return window}function Io(){return"undefined"!==typeof _o().WorkerGlobalScope&&"function"===typeof _o().importScripts}function Eo(){return To.apply(this,arguments)}function To(){return(To=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function So(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Co="firebaseLocalStorageDb",No="firebaseLocalStorage",Ao="fbase_key",Do=function(){function e(t){ne(this,e),this.request=t}return ie(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Oo(e,t){return e.transaction([No],t?"readwrite":"readonly").objectStore(No)}function Ro(){var e=indexedDB.deleteDatabase(Co);return new Do(e).toPromise()}function Po(){var e=indexedDB.open(Co,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(No,{keyPath:Ao})}catch(r){n(r)}})),e.addEventListener("success",He(Je().mark((function n(){var r;return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(No)){n.next=12;break}return r.close(),n.next=5,Ro();case 5:return n.t0=t,n.next=8,Po();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Lo(e,t,n){return Mo.apply(this,arguments)}function Mo(){return Mo=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oo(t,!0).put((te(i={},Ao,n),te(i,"value",r),i)),e.abrupt("return",new Do(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oo(t,!1).get(n),e.next=3,new Do(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}function Uo(e,t){var n=Oo(e,!0).delete(t);return new Do(n).toPromise()}var jo=function(){function e(){ne(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ie(e,[{key:"_openDb",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Po();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=He(Je().mark((function e(){var t=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=wo._getInstance(Io()?self:null),this.receiver._subscribe("keyChanged",function(){var e=He(Je().mark((function e(n,r){var i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=He(Je().mark((function e(){var t,n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new xo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&So()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Po();case 5:return t=e.sent,e.next=8,Lo(t,ho,"1");case 8:return e.next=10,Uo(t,ho);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=He(Je().mark((function e(t,n){var r=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Lo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Fo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=He(Je().mark((function e(t){var n=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Uo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=He(Je().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Oo(e,!1).getAll();return new Do(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ae(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();jo.type="LOCAL";var Bo=jo;function qo(e,t){return cr(e,"POST","/v2/accounts/mfaSignIn:start",sr(e,t))}function zo(e){return Ko.apply(this,arguments)}function Ko(){return(Ko=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Gn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Wo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ho=1e12,Qo=function(){function e(t){ne(this,e),this.auth=t,this.counter=Ho,this._widgets=new Map}return ie(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Jo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Ho;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Ho;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Ho,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Jo=function(){function e(t,n,r){var i=this;ne(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Jn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ie(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var $o=Wo("rcb"),Yo=new rr(3e4,6e4),Xo="https://www.google.com/recaptcha/api.js?",Zo=function(){function e(){var t;ne(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=_o().grecaptcha)||void 0===t?void 0:t.render)}return ie(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Jn(eu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(_o().grecaptcha):new Promise((function(r,i){var a=_o().setTimeout((function(){i(Gn(e,"network-request-failed"))}),Yo.get());_o()[$o]=function(){_o().clearTimeout(a),delete _o()[$o];var o=_o().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Gn(e,"internal-error"))},Go("".concat(Xo,"?").concat(Fe({onload:$o,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Gn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=_o().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function eu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var tu=function(){function e(){ne(this,e)}return ie(e,[{key:"load",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Qo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),nu="recaptcha",ru={theme:"light",type:"image"},iu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ru),r=arguments.length>2?arguments[2]:void 0;ne(this,e),this.parameters=n,this.type=nu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=si(r),this.isInvisible="invisible"===this.parameters.size,Jn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Jn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tu:new Zo,this.validateStartingState()}return ie(e,[{key:"verify",value:function(){var e=He(Je().mark((function e(){var t,n,r,i=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Jn(!this.parameters.sitekey,this.auth,"argument-error"),Jn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Jn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=_o()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Jn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=He(Je().mark((function e(){var t,n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn(tr()&&!Io(),this.auth,"internal-error"),e.next=3,au();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,zo(this.auth);case 8:Jn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Jn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function au(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ou=function(){function e(t,n){ne(this,e),this.verificationId=t,this.onConfirmation=n}return ie(e,[{key:"confirm",value:function(e){var t=Wi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function uu(){return(uu=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),e.next=3,fu(i,n,ze(r));case 3:return a=e.sent,e.abrupt("return",new ou(a,(function(e){return xa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function su(e,t,n){return cu.apply(this,arguments)}function cu(){return(cu=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),e.next=3,ma(!1,i,"phone");case 3:return e.next=5,fu(i.auth,n,ze(r));case 5:return a=e.sent,e.abrupt("return",new ou(a,(function(e){return Ia(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lu(){return(lu=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),e.next=3,fu(i.auth,n,ze(r));case 3:return a=e.sent,e.abrupt("return",new ou(a,(function(e){return Ta(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fu(e,t,n){return hu.apply(this,arguments)}function hu(){return hu=He(Je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Jn("string"===typeof a,t,"argument-error"),Jn(r.type===nu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Jn("enroll"===u.type,t,"internal-error"),e.next=13,co(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Jn("signin"===u.type,t,"internal-error"),Jn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,qo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ji(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),hu.apply(this,arguments)}function du(){return(du=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa(ze(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pu=function(){function e(t){ne(this,e),this.providerId=e.PROVIDER_ID,this.auth=si(t)}return ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return fu(this.auth,e,ze(t))}}],[{key:"credential",value:function(e,t){return Wi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Wi._fromTokenResponse(n,r):null}}]),e}();function vu(e,t){return t?Zn(t):(Jn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}pu.PROVIDER_ID="phone",pu.PHONE_SIGN_IN_METHOD="phone";var mu=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ie(n,[{key:"_getIdTokenResponse",value:function(e){return Fi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Fi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Fi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(di);function yu(e){return wa(e.auth,new mu(e),e.bypassAuthState)}function gu(e){var t=e.auth,n=e.user;return Jn(n,t,"internal-error"),ga(n,new mu(e),e.bypassAuthState)}function ku(e){return wu.apply(this,arguments)}function wu(){return(wu=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Jn(r=t.user,n,"internal-error"),e.abrupt("return",pa(r,new mu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ne(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ie(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=He(Je().mark((function t(n,r){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=He(Je().mark((function e(t){var n,r,i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yu;case"linkViaPopup":case"linkViaRedirect":return ku;case"reauthViaPopup":case"reauthViaRedirect":return gu;default:Kn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),xu=new rr(2e3,1e4);function _u(e,t,n){return Iu.apply(this,arguments)}function Iu(){return(Iu=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),Hn(t,n,Ji),a=vu(i,r),o=new Cu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eu(){return(Eu=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hn((i=ze(t)).auth,n,Ji),a=vu(i.auth,r),o=new Cu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(e,t,n){return Su.apply(this,arguments)}function Su(){return(Su=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hn((i=ze(t)).auth,n,Ji),a=vu(i.auth,r),o=new Cu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cu=function(e){se(n,e);var t=de(n);function n(e,r,i,a,o){var u;return ne(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=oe(u),u}return ie(n,[{key:"executeNotNull",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Jn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=He(Je().mark((function e(){var t,n=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yn(1===this.filter.length,"Popup operations only handle one event"),t=bo(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Gn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Gn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Gn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,xu.get())}()}}]),n}(bu);Cu.currentPopupAction=null;var Nu=new Map,Au=function(e){se(n,e);var t=de(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ne(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ie(n,[{key:"execute",value:function(){var e=He(Je().mark((function e(){var t,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Nu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Du(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,In(ce(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Nu.set(this.auth._key(),t);case 21:return this.bypassAuthState||Nu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=He(Je().mark((function e(t){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",In(ce(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",In(ce(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(bu);function Du(e,t){return Ou.apply(this,arguments)}function Ou(){return(Ou=He(Je().mark((function e(t,n){var r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(n),i=Mu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mu(t)._set(Fu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t){Nu.set(e._key(),t)}function Mu(e){return Zn(e._redirectPersistence)}function Fu(e){return Gr("pendingRedirect",e.config.apiKey,e.name)}function Vu(e,t,n){return function(e,t,n){return Uu.apply(this,arguments)}(e,t,n)}function Uu(){return(Uu=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),Hn(t,n,Ji),a=vu(i,r),e.next=5,Ru(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ju(e,t,n){return function(e,t,n){return Bu.apply(this,arguments)}(e,t,n)}function Bu(){return(Bu=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hn((i=ze(t)).auth,n,Ji),a=vu(i.auth,r),e.next=5,Ru(a,i.auth);case 5:return e.next=7,Qu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e,t,n){return function(e,t,n){return zu.apply(this,arguments)}(e,t,n)}function zu(){return(zu=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hn((i=ze(t)).auth,n,Ji),a=vu(i.auth,r),e.next=5,ma(!1,i,n.providerId);case 5:return e.next=7,Ru(a,i.auth);case 7:return e.next=9,Qu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si(t)._initializationPromise;case 2:return e.abrupt("return",Wu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t){return Hu.apply(this,arguments)}function Hu(){return Hu=He(Je().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=si(t),a=vu(i,n),o=new Au(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Qu(e){return Ju.apply(this,arguments)}function Ju(){return(Ju=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bo("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $u=function(){function e(t){ne(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ie(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Xu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Yu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Yu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Xu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Zu(e){return es.apply(this,arguments)}function es(){return es=He(Je().mark((function e(t){var n,r=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",cr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}var ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ns=/^https?/;function rs(){return(rs=He(Je().mark((function e(t){var n,r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Zu(t);case 4:n=e.sent,r=n.authorizedDomains,i=ae(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!is(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Kn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function is(e){var t=er(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ns.test(r))return!1;if(ts.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var as=new rr(3e4,6e4);function os(){var e=_o().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ge(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var us=null;function ss(e){return us=us||function(e){return new Promise((function(t,n){var r,i,a;function o(){os(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){os(),n(Gn(e,"network-request-failed"))},timeout:as.get()})}if(null===(i=null===(r=_o().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=_o().gapi)||void 0===a?void 0:a.load)){var u=Wo("iframefcb");return _o()[u]=function(){gapi.load?o():n(Gn(e,"network-request-failed"))},Go("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw us=null,e}))}(e),us}var cs=new rr(5e3,15e3),ls={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hs(e){var t=e.config;Jn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ir(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Gt},i=fs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Fe(r).slice(1))}function ds(e){return ps.apply(this,arguments)}function ps(){return ps=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ss(t);case 2:return n=e.sent,Jn(r=_o().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:hs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ls,dontclear:!0},(function(e){return new Promise(function(){var n=He(Je().mark((function n(r,i){var a,o,u;return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){_o().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Gn(t,"network-request-failed"),o=_o().setTimeout((function(){i(a)}),cs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}var vs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ms="_blank",ys="http://localhost",gs=function(){function e(t){ne(this,e),this.window=t,this.associatedEvent=null}return ie(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ks(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},vs),{width:r.toString(),height:i.toString(),top:a,left:o}),l=_e().toLowerCase();n&&(u=$r(l)?ms:n),Qr(l)&&(t=t||ys,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ni(l)&&"_self"!==u)return ws(t||"",u),new gs(null);var h=window.open(t||"",u,f);Jn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new gs(h)}function ws(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var bs="__/auth/handler",xs="emulator/auth/handler";function _s(e,t,n,r,i,a){Jn(e.config.authDomain,e,"auth-domain-config-required"),Jn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Gt,eventId:i};if(t instanceof Ji){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof $i){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(bs);return ir(t,xs)}(e),"?").concat(Fe(p).slice(1))}var Is="webStorageSupport",Es=function(){function e(){ne(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=go,this._completeRedirectFn=Wu,this._overrideRedirectResult=Lu}return ie(e,[{key:"_openPopup",value:function(){var e=He(Je().mark((function e(t,n,r,i){var a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=_s(t,n,r,er(),i),e.abrupt("return",ks(t,o,bo()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=He(Je().mark((function e(t,n,r,i){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=_s(t,n,r,er(),i),_o().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Yn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ds(t);case 2:return n=e.sent,r=new $u(t),n.register("authEvent",(function(e){return Jn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Is,{type:Is},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Kn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return rs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ii()||Jr()||ti()}}]),e}(),Ts=Es,Ss=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this,"phone")).credential=e,r}return ie(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:finalize",sr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return cr(e,"POST","/v2/accounts/mfaSignIn:finalize",sr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){ne(this,e),this.factorId=t}return ie(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return $n("unexpected MultiFactorSessionType")}}}]),e}()),Cs=function(){function e(){ne(this,e)}return ie(e,null,[{key:"assertion",value:function(e){return Ss._fromCredential(e)}}]),e}();Cs.FACTOR_ID="phone";var Ns,As="@firebase/auth",Ds="0.20.5",Os=function(){function e(t){ne(this,e),this.auth=t,this.internalListeners=new Map}return ie(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Jn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Rs(){return window}Ns="Browser",Vt(new $e("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Jn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Jn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Ns,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ai(Ns)},i=new ui(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Vt(new $e("auth-internal",(function(e){return function(e){return new Os(e)}(si(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(As,Ds,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ns)),Yt(As,Ds,"esm2017");function Ps(e,t,n){return Ls.apply(this,arguments)}function Ls(){return Ls=He(Je().mark((function e(t,n,r){var i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Rs(),o=a.BuildInfo,Yn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Bs(n.sessionId);case 4:return u=e.sent,s={},ti()?s.ibi=o.packageName:Xr()?s.apn=o.packageName:Kn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",_s(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}function Ms(){return(Ms=He(Je().mark((function e(t){var n,r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rs(),r=n.BuildInfo,i={},ti()?i.iosBundleId=r.packageName:Xr()?i.androidPackageName=r.packageName:Kn(t,"operation-not-supported-in-this-environment"),e.next=5,Zu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e){var t=Rs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Vs(e,t,n){return Us.apply(this,arguments)}function Us(){return Us=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Gn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Xr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Us.apply(this,arguments)}function js(e){var t,n,r,i,a,o,u,s,c,l,f=Rs();Jn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Jn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Jn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Jn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Jn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Bs(e){return qs.apply(this,arguments)}function qs(){return(qs=He(Je().mark((function e(t){var n,r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zs(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e){if(Yn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ks=function(e){se(n,e);var t=de(n);function n(){var e;return ne(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ie(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),In(ce(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}($u);function Gs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:$s(),postBody:null,tenantId:e.tenantId,error:Gn(e,"no-auth-event")}}function Ws(e,t){return Ys()._set(Xs(e),t)}function Hs(e){return Qs.apply(this,arguments)}function Qs(){return(Qs=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ys()._get(Xs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ys()._remove(Xs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Js(e,t){var n,r,i=function(e){var t=Zs(e),n=t.link?decodeURIComponent(t.link):void 0,r=Zs(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Zs(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Zs(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Gn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function $s(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ys(){return Zn(mo)}function Xs(e){return Gr("authEvent",e.config.apiKey,e.name)}function Zs(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||Ke(t)||o(t)||u();r[0];return Ve(r.slice(1).join("?"))}var ec=function(){function e(){ne(this,e),this._redirectPersistence=go,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wu,this._overrideRedirectResult=Lu}return ie(e,[{key:"_initialize",value:function(){var e=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ks(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Kn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=He(Je().mark((function e(t,n,r,i){var a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return js(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Nu.clear(),e.next=10,this._originValidation(t);case 10:return o=Gs(t,r,i),e.next=13,Ws(t,o);case 13:return e.next=15,Ps(t,o,n);case 15:return u=e.sent,e.next=18,Fs(u);case 18:return s=e.sent,e.abrupt("return",Vs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ms.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Rs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(He(Je().mark((function n(){return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Hs(e);case 2:t.onEvent(nc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=He(Je().mark((function n(r){var i,a;return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Hs(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Js(i,r.url)),t.onEvent(a||nc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Rs().handleOpenURL=function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),tc=ec;function nc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Gn("no-auth-event")}}function rc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return!("file:"!==rc()&&"ionic:"!==rc()&&"capacitor:"!==rc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ac(){return Ce()&&11===(null===document||void 0===document?void 0:document.documentMode)}function oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return/Edge\/\d+/.test(e)}function uc(){try{var e=self.localStorage,t=bo();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e();return ac()||oc(e)}()||Ne()}catch(n){return sc()&&Ne()}return!1}function sc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function cc(){return("http:"===rc()||"https:"===rc()||Te()||ic())&&!(Se()||Ee())&&uc()&&!sc()}function lc(){return ic()&&"undefined"!==typeof document}function fc(){return hc.apply(this,arguments)}function hc(){return(hc=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dc={LOCAL:"local",NONE:"none",SESSION:"session"},pc=Jn,vc="persistence";function mc(e,t){pc(Object.values(dc).includes(t),e,"invalid-persistence-type"),Se()?pc(t!==dc.SESSION,e,"unsupported-persistence-type"):Ee()?pc(t===dc.NONE,e,"unsupported-persistence-type"):sc()?pc(t===dc.NONE||t===dc.LOCAL&&Ne(),e,"unsupported-persistence-type"):pc(t===dc.NONE||uc(),e,"unsupported-persistence-type")}function yc(e){return gc.apply(this,arguments)}function gc(){return(gc=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=kc(),r=Gr(vc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var wc=Jn,bc=function(){function e(){ne(this,e),this.browserResolver=Zn(Ts),this.cordovaResolver=Zn(tc),this.underlyingResolver=null,this._redirectPersistence=go,this._completeRedirectFn=Wu,this._overrideRedirectResult=Lu}return ie(e,[{key:"_initialize",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=He(Je().mark((function e(t,n,r,i){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=He(Je().mark((function e(t,n,r,i){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return lc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return wc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xc(e){return e.unwrap()}function _c(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Cc(e,function(e,t){var n,r=ze(e),i=t;return Jn(t.customData.operationType,r,"argument-error"),Jn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),so._fromError(r,i)}(e,t));else if(i){var a=Ic(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Ic(e){var t=(e instanceof Ae?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ae)&&"temporaryProof"in t&&"phoneNumber"in t)return pu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===An)return null;switch(r){case Nn:n=Zi;break;case Sn:n=Xi;break;case Cn:n=ea;break;case Dn:n=ra;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ta._create(r,u):Ui._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Yi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ae?n.credentialFromError(e):n.credentialFromResult(e)}function Ec(e,t){return t.catch((function(t){throw t instanceof Ae&&_c(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ic(t)),additionalUserInfo:oo(e),user:Nc.getOrCreate(r)}}))}function Tc(e,t){return Sc.apply(this,arguments)}function Sc(){return(Sc=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ec(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cc=function(){function e(t,n){ne(this,e),this.resolver=n,this.auth=t.wrapped()}return ie(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ec(xc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Nc=function(){function e(t){ne(this,e),this._delegate=t,this.multiFactor=function(e){var t=ze(e);return fo.has(t)||fo.set(t,lo._fromUser(t)),fo.get(t)}(t)}return ie(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ec(this.auth,Ia(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this.auth,su(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ec(this.auth,Tu(this._delegate,t,bc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yc(si(this.auth));case 2:return e.abrupt("return",qu(this._delegate,t,bc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ec(this.auth,Ta(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Tc(this.auth,function(e,t,n){return lu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ec(this.auth,function(e,t,n){return Eu.apply(this,arguments)}(this._delegate,e,bc))}},{key:"reauthenticateWithRedirect",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yc(si(this.auth));case 2:return e.abrupt("return",ju(this._delegate,t,bc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ha.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Xa(ze(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Xa(ze(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return du.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ya.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Qa.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Nc.USER_MAP=new WeakMap;var Ac=Jn,Dc=function(){function e(t,n){if(ne(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ac(r,"invalid-api-key",{appName:t.name}),Ac(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?bc:void 0;this._delegate=n.initialize({options:{persistence:Rc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Un),this.linkUnderlyingAuth()}return ie(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Nc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){li(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ma.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Fa(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return La.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ec(this._delegate,ja(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Wa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Hi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ac(cc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ku(this._delegate,bc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ec(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){si(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Oc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Oc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return qa.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Pa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mc(this._delegate,t),e.t0=t,e.next=e.t0===dc.SESSION?4:e.t0===dc.LOCAL?6:e.t0===dc.NONE?11:13;break;case 4:return n=go,e.abrupt("break",14);case 6:return e.next=8,Zn(Bo)._isAvailable();case 8:return r=e.sent,n=r?Bo:mo,e.abrupt("break",14);case 11:return n=Kr,e.abrupt("break",14);case 13:return e.abrupt("return",Kn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ec(this._delegate,function(e){return sa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ec(this._delegate,xa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ec(this._delegate,function(e,t){return Aa.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ec(this._delegate,function(e,t,n){return xa(ze(e),Qi.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ec(this._delegate,function(e,t,n){return za.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Tc(this._delegate,function(e,t,n){return uu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ac(cc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ec(this._delegate,_u(this._delegate,t,bc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ac(cc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,yc(this._delegate);case 3:return e.abrupt("return",Vu(this._delegate,t,bc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ua.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Oc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Nc.getOrCreate(e))},error:t,complete:n}}function Rc(e,t){var n=function(e,t){var n=kc();if(!n)return[];var r=Gr(vc,e,t);switch(n.getItem(r)){case dc.NONE:return[Kr];case dc.LOCAL:return[Bo,go];case dc.SESSION:return[go];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Bo)||n.push(Bo),"undefined"!==typeof window)for(var r=0,i=[mo,go];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Kr)||n.push(Kr),n}Dc.Persistence=dc;var Pc=function(){function e(){ne(this,e),this.providerId="phone",this._delegate=new pu(xc(xn.auth()))}return ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return pu.credential(e,t)}}]),e}();Pc.PHONE_SIGN_IN_METHOD=pu.PHONE_SIGN_IN_METHOD,Pc.PROVIDER_ID=pu.PROVIDER_ID;var Lc,Mc=Jn,Fc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xn.app();ne(this,e),Mc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new iu(t,n,i.auth()),this.type=this._delegate.type}return ie(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Lc=xn).INTERNAL.registerComponent(new $e("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Dc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:On,PASSWORD_RESET:Rn,RECOVER_EMAIL:Pn,REVERT_SECOND_FACTOR_ADDITION:Ln,VERIFY_AND_CHANGE_EMAIL:Mn,VERIFY_EMAIL:Fn}},EmailAuthProvider:Qi,FacebookAuthProvider:Xi,GithubAuthProvider:ea,GoogleAuthProvider:Zi,OAuthProvider:Yi,SAMLAuthProvider:na,PhoneAuthProvider:Pc,PhoneMultiFactorGenerator:Cs,RecaptchaVerifier:Fc,TwitterAuthProvider:ra,Auth:Dc,AuthCredential:di,Error:Ae}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Lc.registerVersion("@firebase/auth-compat","0.2.18");var Vc,Uc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},jc={},Bc=Bc||{},qc=Uc||self;function zc(){}function Kc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Wc="closure_uid_"+(1e9*Math.random()>>>0),Hc=0;function Qc(e,t,n){return e.call.apply(e.bind,arguments)}function Jc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $c(e,t,n){return($c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qc:Jc).apply(null,arguments)}function Yc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Zc(){this.s=this.s,this.o=this.o}var el={};Zc.prototype.s=!1,Zc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Wc)&&e[Wc]||(e[Wc]=++Hc)}(this);delete el[e]}},Zc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},nl=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function rl(e){return Array.prototype.concat.apply([],arguments)}function il(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function al(e){return/^[\s\xa0]*$/.test(e)}var ol,ul=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function sl(e,t){return-1!=e.indexOf(t)}function cl(e,t){return e<t?-1:e>t?1:0}e:{var ll=qc.navigator;if(ll){var fl=ll.userAgent;if(fl){ol=fl;break e}}ol=""}function hl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function dl(e){var t={};for(var n in e)t[n]=e[n];return t}var pl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<pl.length;a++)n=pl[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ml(e){return ml[" "](e),e}ml[" "]=zc;var yl,gl=sl(ol,"Opera"),kl=sl(ol,"Trident")||sl(ol,"MSIE"),wl=sl(ol,"Edge"),bl=wl||kl,xl=sl(ol,"Gecko")&&!(sl(ol.toLowerCase(),"webkit")&&!sl(ol,"Edge"))&&!(sl(ol,"Trident")||sl(ol,"MSIE"))&&!sl(ol,"Edge"),_l=sl(ol.toLowerCase(),"webkit")&&!sl(ol,"Edge");function Il(){var e=qc.document;return e?e.documentMode:void 0}e:{var El="",Tl=function(){var e=ol;return xl?/rv:([^\);]+)(\)|;)/.exec(e):wl?/Edge\/([\d\.]+)/.exec(e):kl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):_l?/WebKit\/(\S+)/.exec(e):gl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Tl&&(El=Tl?Tl[1]:""),kl){var Sl=Il();if(null!=Sl&&Sl>parseFloat(El)){yl=String(Sl);break e}}yl=El}var Cl,Nl={};function Al(){return function(e){var t=Nl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ul(String(yl)).split("."),n=ul("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=cl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||cl(0==a[2].length,0==o[2].length)||cl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(qc.document&&kl){var Dl=Il();Cl=Dl||(parseInt(yl,10)||void 0)}else Cl=void 0;var Ol=Cl,Rl=function(){if(!qc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qc.addEventListener("test",zc,t),qc.removeEventListener("test",zc,t)}catch(n){}return e}();function Pl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ll(e,t){if(Pl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xl){e:{try{ml(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ml[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ll.Z.h.call(this)}}Pl.prototype.h=function(){this.defaultPrevented=!0},Xc(Ll,Pl);var Ml={2:"touch",3:"pen",4:"mouse"};Ll.prototype.h=function(){Ll.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Fl="closure_listenable_"+(1e6*Math.random()|0),Vl=0;function Ul(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Vl,this.ca=this.fa=!1}function jl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Bl(e){this.src=e,this.g={},this.h=0}function ql(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=tl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(jl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function zl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Bl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=zl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ul(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Kl="closure_lm_"+(1e6*Math.random()|0),Gl={};function Wl(e,t,n,r,i){if(r&&r.once)return Ql(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wl(e,t[a],n,r,i);return null}return n=tf(n),e&&e[Fl]?e.N(t,n,Gc(r)?!!r.capture:!!r,i):Hl(e,t,n,!1,r,i)}function Hl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Gc(i)?!!i.capture:!!i,u=Zl(e);if(u||(e[Kl]=u=new Bl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Xl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Rl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Yl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ql(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ql(e,t[a],n,r,i);return null}return n=tf(n),e&&e[Fl]?e.O(t,n,Gc(r)?!!r.capture:!!r,i):Hl(e,t,n,!0,r,i)}function Jl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Jl(e,t[a],n,r,i);else r=Gc(r)?!!r.capture:!!r,n=tf(n),e&&e[Fl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=zl(a=e.g[t],n,r,i))&&(jl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Zl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zl(t,n,r,i)),(n=-1<e?t[e]:null)&&$l(n))}function $l(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Fl])ql(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Yl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zl(t))?(ql(n,e),0==n.h&&(n.src=null,t[Kl]=null)):jl(e)}}}function Yl(e){return e in Gl?Gl[e]:Gl[e]="on"+e}function Xl(e,t){if(e.ca)e=!0;else{t=new Ll(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&$l(e),e=n.call(r,t)}return e}function Zl(e){return(e=e[Kl])instanceof Bl?e:null}var ef="__closure_events_fn_"+(1e9*Math.random()>>>0);function tf(e){return"function"===typeof e?e:(e[ef]||(e[ef]=function(t){return e.handleEvent(t)}),e[ef])}function nf(){Zc.call(this),this.i=new Bl(this),this.P=this,this.I=null}function rf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Pl(t,e);else if(t instanceof Pl)t.target=t.target||e;else{var i=t;vl(t=new Pl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=af(o,r,!0,t)&&i}if(i=af(o=t.g=e,r,!0,t)&&i,i=af(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=af(o=t.g=n[a],r,!1,t)&&i}function af(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ql(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Xc(nf,Zc),nf.prototype[Fl]=!0,nf.prototype.removeEventListener=function(e,t,n,r){Jl(this,e,t,n,r)},nf.prototype.M=function(){if(nf.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jl(n[r]);delete t.g[e],t.h--}}this.I=null},nf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},nf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var of=qc.JSON.stringify;function uf(){var e=vf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var sf,cf=function(){function e(){ne(this,e),this.h=this.g=null}return ie(e,[{key:"add",value:function(e,t){var n=lf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),lf=new(function(){function e(t,n){ne(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ie(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ff}),(function(e){return e.reset()})),ff=function(){function e(){ne(this,e),this.next=this.g=this.h=null}return ie(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function hf(e){qc.setTimeout((function(){throw e}),0)}function df(e,t){sf||function(){var e=qc.Promise.resolve(void 0);sf=function(){e.then(mf)}}(),pf||(sf(),pf=!0),vf.add(e,t)}var pf=!1,vf=new cf;function mf(){for(var e;e=uf();){try{e.h.call(e.g)}catch(n){hf(n)}var t=lf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}pf=!1}function yf(e,t){nf.call(this),this.h=e||1,this.g=t||qc,this.j=$c(this.kb,this),this.l=Date.now()}function gf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function kf(e,t,n){if("function"===typeof e)n&&(e=$c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$c(e.handleEvent,e)}return 2147483647<Number(t)?-1:qc.setTimeout(e,t||0)}function wf(e){e.g=kf((function(){e.g=null,e.i&&(e.i=!1,wf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xc(yf,nf),(Vc=yf.prototype).da=!1,Vc.S=null,Vc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),rf(this,"tick"),this.da&&(gf(this),this.start()))}},Vc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vc.M=function(){yf.Z.M.call(this),gf(this),delete this.g};var bf=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ie(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:wf(this)}},{key:"M",value:function(){In(ce(n.prototype),"M",this).call(this),this.g&&(qc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Zc);function xf(e){Zc.call(this),this.h=e,this.g={}}Xc(xf,Zc);var _f=[];function If(e,t,n,r){Array.isArray(n)||(n&&(_f[0]=n.toString()),n=_f);for(var i=0;i<n.length;i++){var a=Wl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ef(e){hl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$l(e)}),e),e.g={}}function Tf(){this.g=!0}function Sf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return of(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}xf.prototype.M=function(){xf.Z.M.call(this),Ef(this)},xf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tf.prototype.Aa=function(){this.g=!1},Tf.prototype.info=function(){};var Cf={},Nf=null;function Af(){return Nf=Nf||new nf}function Df(e){Pl.call(this,Cf.Ma,e)}function Of(e){var t=Af();rf(t,new Df(t,e))}function Rf(e,t){Pl.call(this,Cf.STAT_EVENT,e),this.stat=t}function Pf(e){var t=Af();rf(t,new Rf(t,e))}function Lf(e,t){Pl.call(this,Cf.Na,e),this.size=t}function Mf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qc.setTimeout((function(){e()}),t)}Cf.Ma="serverreachability",Xc(Df,Pl),Cf.STAT_EVENT="statevent",Xc(Rf,Pl),Cf.Na="timingevent",Xc(Lf,Pl);var Ff={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Uf(){}function jf(e){return e.h||(e.h=e.i())}function Bf(){}Uf.prototype.h=null;var qf,zf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kf(){Pl.call(this,"d")}function Gf(){Pl.call(this,"c")}function Wf(){}function Hf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new xf(this),this.P=Jf,e=bl?125:void 0,this.W=new yf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Qf}function Qf(){this.i=null,this.g="",this.h=!1}Xc(Kf,Pl),Xc(Gf,Pl),Xc(Wf,Uf),Wf.prototype.g=function(){return new XMLHttpRequest},Wf.prototype.i=function(){return{}},qf=new Wf;var Jf=45e3,$f={},Yf={};function Xf(e,t,n){e.K=1,e.v=bh(vh(t)),e.s=n,e.U=!0,Zf(e,null)}function Zf(e,t){e.F=Date.now(),rh(e),e.A=vh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ph(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Qf,e.g=Md(e.l,n?t:null,!e.s),0<e.O&&(e.L=new bf($c(e.Ia,e,e.g),e.O)),If(e.V,e.g,"readystatechange",e.gb),t=e.H?dl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Of(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function eh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function th(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=nh(e,n))==Yf){4==t&&(e.o=4,Pf(14),i=!1),Sf(e.j,e.m,null,"[Incomplete Response]");break}if(r==$f){e.o=4,Pf(15),Sf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Sf(e.j,e.m,r,null),sh(e,r)}eh(e)&&r!=Yf&&r!=$f&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Pf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Cd(t),t.L=!0,Pf(11))):(Sf(e.j,e.m,n,"[Invalid Chunked Response]"),uh(e),oh(e))}function nh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Yf:(n=Number(t.substring(n,r)),isNaN(n)?$f:(r+=1)+n>t.length?Yf:(t=t.substr(r,n),e.C=r+n,t))}function rh(e){e.Y=Date.now()+e.P,ih(e,e.P)}function ih(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Mf($c(e.eb,e),t)}function ah(e){e.B&&(qc.clearTimeout(e.B),e.B=null)}function oh(e){0==e.l.G||e.I||Dd(e.l,e)}function uh(e){ah(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,gf(e.W),Ef(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function sh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||qh(n.i,e)))if(n.I=e.N,!e.J&&qh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ad(n),kd(n)}Sd(n),Pf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Mf($c(n.ab,n),6e3));if(1>=Bh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Rd(n,11)}else if((e.J||n.g==e)&&Ad(n),!al(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(sl(l,"spdy")||sl(l,"quic")||sl(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(zh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,wh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ld(r,r.H?r.la:null,r.W),d.J){Kh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ah(p),rh(p)),r.g=d}else Td(r);0<n.l.length&&xd(n)}else"stop"!=a[0]&&"close"!=a[0]||Rd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Rd(n,7):gd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Of(4)}catch(a){}}function ch(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kc(e)||"string"===typeof e)nl(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Kc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Kc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function lh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof lh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function fh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];hh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)hh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function hh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Vc=Hf.prototype).setTimeout=function(e){this.P=e},Vc.gb=function(e){e=e.target;var t=this.L;t&&3==dd(e)?t.l():this.Ia(e)},Vc.Ia=function(e){try{if(e==this.g)e:{var t=dd(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||bl||this.g&&(this.h.h||this.g.ga()||pd(this.g)))){this.I||4!=t||7==n||Of(8==n||0>=r?3:2),ah(this);var i=this.g.ba();this.N=i;t:if(eh(this)){var a=pd(this.g);e="";var o=a.length,u=4==dd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){uh(this),oh(this);var s="";break t}this.h.i=new qc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!al(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Pf(12),uh(this),oh(this);break e}Sf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sh(this,i)}this.U?(th(this,t,s),bl&&this.i&&3==t&&(If(this.V,this.W,"tick",this.fb),this.W.start())):(Sf(this.j,this.m,s,null),sh(this,s)),4==t&&uh(this),this.i&&!this.I&&(4==t?Dd(this.l,this):(this.i=!1,rh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Pf(12)):(this.o=0,Pf(13)),uh(this),oh(this)}}}catch(t){}},Vc.fb=function(){if(this.g){var e=dd(this.g),t=this.g.ga();this.C<t.length&&(ah(this),th(this,e,t),this.i&&4!=e&&rh(this))}},Vc.cancel=function(){this.I=!0,uh(this)},Vc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Of(3),Pf(17)),uh(this),this.o=2,oh(this)):ih(this,this.Y-e)},(Vc=lh.prototype).R=function(){fh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Vc.T=function(){return fh(this),this.g.concat()},Vc.get=function(e,t){return hh(this.h,e)?this.h[e]:t},Vc.set=function(e,t){hh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Vc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var dh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ph(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ph){this.g=void 0!==t?t:e.g,mh(this,e.j),this.s=e.s,yh(this,e.i),gh(this,e.m),this.l=e.l,t=e.h;var n=new Ah;n.i=t.i,t.g&&(n.g=new lh(t.g),n.h=t.h),kh(this,n),this.o=e.o}else e&&(n=String(e).match(dh))?(this.g=!!t,mh(this,n[1]||"",!0),this.s=xh(n[2]||""),yh(this,n[3]||"",!0),gh(this,n[4]),this.l=xh(n[5]||"",!0),kh(this,n[6]||"",!0),this.o=xh(n[7]||"")):(this.g=!!t,this.h=new Ah(null,this.g))}function vh(e){return new ph(e)}function mh(e,t,n){e.j=n?xh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yh(e,t,n){e.i=n?xh(t,!0):t}function gh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function kh(e,t,n){t instanceof Ah?(e.h=t,function(e,t){t&&!e.j&&(Dh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Oh(this,t),Ph(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=_h(t,Ch)),e.h=new Ah(t,e.g))}function wh(e,t,n){e.h.set(t,n)}function bh(e){return wh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _h(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ih),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ih(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ph.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_h(t,Eh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(_h(t,Eh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(_h(n,"/"==n.charAt(0)?Sh:Th,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",_h(n,Nh)),e.join("")};var Eh=/[#\/\?@]/g,Th=/[#\?:]/g,Sh=/[#\?]/g,Ch=/[#\?@]/g,Nh=/#/g;function Ah(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dh(e){e.g||(e.g=new lh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Oh(e,t){Dh(e),t=Lh(e,t),hh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,hh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&fh(e)))}function Rh(e,t){return Dh(e),t=Lh(e,t),hh(e.g.h,t)}function Ph(e,t,n){Oh(e,t),0<n.length&&(e.i=null,e.g.set(Lh(e,t),il(n)),e.h+=n.length)}function Lh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vc=Ah.prototype).add=function(e,t){Dh(this),this.i=null,e=Lh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vc.forEach=function(e,t){Dh(this),this.g.forEach((function(n,r){nl(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Vc.T=function(){Dh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Vc.R=function(e){Dh(this);var t=[];if("string"===typeof e)Rh(this,e)&&(t=rl(t,this.g.get(Lh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=rl(t,e[n])}return t},Vc.set=function(e,t){return Dh(this),this.i=null,Rh(this,e=Lh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Vc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Mh=ie((function e(t,n){ne(this,e),this.h=t,this.g=n}));function Fh(e){this.l=e||Uh,qc.PerformanceNavigationTiming?e=0<(e=qc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qc.g&&qc.g.Ea&&qc.g.Ea()&&qc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vh,Uh=10;function jh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Bh(e){return e.h?1:e.g?e.g.size:0}function qh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function zh(e,t){e.g?e.g.add(t):e.h=t}function Kh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ae(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return il(e.i)}function Wh(){}function Hh(){this.g=new Wh}function Qh(e,t,n){var r=n||"";try{ch(e,(function(e,n){var i=e;Gc(e)&&(i=of(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function $h(e){this.l=e.$b||null,this.j=e.ib||!1}function Yh(e,t){nf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Xh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fh.prototype.cancel=function(){if(this.i=Gh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ae(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Wh.prototype.stringify=function(e){return qc.JSON.stringify(e,void 0)},Wh.prototype.parse=function(e){return qc.JSON.parse(e,void 0)},Xc($h,Uf),$h.prototype.g=function(){return new Yh(this.l,this.j)},$h.prototype.i=(Vh={},function(){return Vh}),Xc(Yh,nf);var Xh=0;function Zh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ed(e){e.readyState=4,e.l=null,e.j=null,e.A=null,td(e)}function td(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vc=Yh.prototype).open=function(e,t){if(this.readyState!=Xh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,td(this)},Vc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||qc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Vc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ed(this)),this.readyState=Xh},Vc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,td(this)),this.g&&(this.readyState=3,td(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof qc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Vc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ed(this):td(this),3==this.readyState&&Zh(this)}},Vc.Ua=function(e){this.g&&(this.response=this.responseText=e,ed(this))},Vc.Ta=function(e){this.g&&(this.response=e,ed(this))},Vc.ha=function(){this.g&&ed(this)},Vc.setRequestHeader=function(e,t){this.v.append(e,t)},Vc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Yh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nd=qc.JSON.parse;function rd(e){nf.call(this),this.headers=new lh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=id,this.K=this.L=!1}Xc(rd,nf);var id="",ad=/^https?$/i,od=["POST","PUT"];function ud(e){return"content-type"==e.toLowerCase()}function sd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,cd(e),fd(e)}function cd(e){e.D||(e.D=!0,rf(e,"complete"),rf(e,"error"))}function ld(e){if(e.h&&"undefined"!=typeof Bc&&(!e.C[1]||4!=dd(e)||2!=e.ba()))if(e.v&&4==dd(e))kf(e.Fa,0,e);else if(rf(e,"readystatechange"),4==dd(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(dh)[1]||null;if(!a&&qc.self&&qc.self.location){var o=qc.self.location.protocol;a=o.substr(0,o.length-1)}i=!ad.test(a?a.toLowerCase():"")}t=i}if(t)rf(e,"complete"),rf(e,"success");else{e.m=6;try{var u=2<dd(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",cd(e)}}finally{fd(e)}}}function fd(e,t){if(e.g){hd(e);var n=e.g,r=e.C[0]?zc:null;e.g=null,e.C=null,t||rf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function hd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(qc.clearTimeout(e.A),e.A=null)}function dd(e){return e.g?e.g.readyState:0}function pd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case id:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function vd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return hl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wh(e,t,n))}function md(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function yd(e){this.za=0,this.l=[],this.h=new Tf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=md("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=md("baseRetryDelayMs",5e3,e),this.$a=md("retryDelaySeedMs",1e4,e),this.Ya=md("forwardChannelMaxRetries",2,e),this.ra=md("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Fh(e&&e.concurrentRequestLimit),this.Ca=new Hh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function gd(e){if(wd(e),3==e.G){var t=e.V++,n=vh(e.F);wh(n,"SID",e.J),wh(n,"RID",t),wh(n,"TYPE","terminate"),Id(e,n),(t=new Hf(e,e.h,t,void 0)).K=2,t.v=bh(vh(n)),n=!1,qc.navigator&&qc.navigator.sendBeacon&&(n=qc.navigator.sendBeacon(t.v.toString(),"")),!n&&qc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Md(t.l,null),t.g.ea(t.v)),t.F=Date.now(),rh(t)}Pd(e)}function kd(e){e.g&&(Cd(e),e.g.cancel(),e.g=null)}function wd(e){kd(e),e.u&&(qc.clearTimeout(e.u),e.u=null),Ad(e),e.i.cancel(),e.m&&("number"===typeof e.m&&qc.clearTimeout(e.m),e.m=null)}function bd(e,t){e.l.push(new Mh(e.Za++,t)),3==e.G&&xd(e)}function xd(e){jh(e.i)||e.m||(e.m=!0,df(e.Ha,e),e.C=0)}function _d(e,t){var n;n=t?t.m:e.V++;var r=vh(e.F);wh(r,"SID",e.J),wh(r,"RID",n),wh(r,"AID",e.U),Id(e,r),e.o&&e.s&&vd(r,e.o,e.s),n=new Hf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ed(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),zh(e.i,n),Xf(n,r,t)}function Id(e,t){e.j&&ch({},(function(e,n){wh(t,n,e)}))}function Ed(e,t,n){n=Math.min(e.l.length,n);var r=e.j?$c(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Qh(l,o,"req"+c+"_")}catch(lp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Td(e){e.g||e.u||(e.Y=1,df(e.Ga,e),e.A=0)}function Sd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Mf($c(e.Ga,e),Od(e,e.A)),e.A++,!0)}function Cd(e){null!=e.B&&(qc.clearTimeout(e.B),e.B=null)}function Nd(e){e.g=new Hf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=vh(e.oa);wh(t,"RID","rpc"),wh(t,"SID",e.J),wh(t,"CI",e.N?"0":"1"),wh(t,"AID",e.U),Id(e,t),wh(t,"TYPE","xmlhttp"),e.o&&e.s&&vd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=bh(vh(t)),n.s=null,n.U=!0,Zf(n,e)}function Ad(e){null!=e.v&&(qc.clearTimeout(e.v),e.v=null)}function Dd(e,t){var n=null;if(e.g==t){Ad(e),Cd(e),e.g=null;var r=2}else{if(!qh(e.i,t))return;n=t.D,Kh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;rf(r=Af(),new Lf(r,n,t,i)),xd(e)}else Td(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Bh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Mf($c(e.Ha,e,t),Od(e,e.C)),e.C++,!0))}(e,t)||2==r&&Sd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Rd(e,5);break;case 4:Rd(e,10);break;case 3:Rd(e,6);break;default:Rd(e,2)}}function Od(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Rd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=$c(e.jb,e);n||(n=new ph("//www.google.com/images/cleardot.gif"),qc.location&&"http"==qc.location.protocol||mh(n,"https"),bh(n)),function(e,t){var n=new Tf;if(qc.Image){var r=new Image;r.onload=Yc(Jh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Yc(Jh,n,r,"TestLoadImage: error",!1,t),r.onabort=Yc(Jh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Yc(Jh,n,r,"TestLoadImage: timeout",!1,t),qc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Pf(2);e.G=0,e.j&&e.j.va(t),Pd(e),wd(e)}function Pd(e){e.G=0,e.I=-1,e.j&&(0==Gh(e.i).length&&0==e.l.length||(e.i.i.length=0,il(e.l),e.l.length=0),e.j.ua())}function Ld(e,t,n){var r=function(e){return e instanceof ph?vh(e):new ph(e,void 0)}(n);if(""!=r.i)t&&yh(r,t+"."+r.i),gh(r,r.m);else{var i=qc.location;r=function(e,t,n,r){var i=new ph(null,void 0);return e&&mh(i,e),t&&yh(i,t),n&&gh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&hl(e.aa,(function(e,t){wh(r,t,e)})),t=e.D,n=e.sa,t&&n&&wh(r,t,n),wh(r,"VER",e.ma),Id(e,r),r}function Md(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new rd(new $h({ib:!0})):new rd(e.qa)).L=e.H,t}function Fd(){}function Vd(){if(kl&&!(10<=Number(Ol)))throw Error("Environmental error: no available transport.")}function Ud(e,t){nf.call(this),this.g=new yd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!al(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!al(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new qd(this)}function jd(e){Kf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Bd(){Gf.call(this),this.status=1}function qd(e){this.g=e}(Vc=rd.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qf.g(),this.C=this.u?jf(this.u):jf(qf),this.g.onreadystatechange=$c(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void sd(this,a)}e=n||"";var i=new lh(this.headers);r&&ch(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ud,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=qc.FormData&&e instanceof qc.FormData,!(0<=tl(od,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hd(this),0<this.B&&((this.K=function(e){return kl&&Al()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$c(this.pa,this)):this.A=kf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){sd(this,a)}},Vc.pa=function(){"undefined"!=typeof Bc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rf(this,"timeout"),this.abort(8))},Vc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,rf(this,"complete"),rf(this,"abort"),fd(this))},Vc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fd(this,!0)),rd.Z.M.call(this)},Vc.Fa=function(){this.s||(this.F||this.v||this.l?ld(this):this.cb())},Vc.cb=function(){ld(this)},Vc.ba=function(){try{return 2<dd(this)?this.g.status:-1}catch(Vh){return-1}},Vc.ga=function(){try{return this.g?this.g.responseText:""}catch(Vh){return""}},Vc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nd(t)}},Vc.Da=function(){return this.m},Vc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vc=yd.prototype).ma=8,Vc.G=1,Vc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Vc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Hf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?vl(n=dl(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ed(this,t,r),wh(i=vh(this.F),"RID",e),wh(i,"CVER",22),this.D&&wh(i,"X-HTTP-Session-Id",this.D),Id(this,i),this.o&&n&&vd(i,this.o,n),zh(this.i,t),this.Ra&&wh(i,"TYPE","init"),this.ja?(wh(i,"$req",r),wh(i,"SID","null"),t.$=!0,Xf(t,i,null)):Xf(t,i,r),this.G=2}}else 3==this.G&&(e?_d(this,e):0==this.l.length||jh(this.i)||_d(this))},Vc.Ga=function(){if(this.u=null,Nd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Mf($c(this.bb,this),e)}},Vc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Pf(10),kd(this),Nd(this))},Vc.ab=function(){null!=this.v&&(this.v=null,kd(this),Sd(this),Pf(19))},Vc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Pf(2)):(this.h.info("Failed to ping google.com"),Pf(1))},(Vc=Fd.prototype).xa=function(){},Vc.wa=function(){},Vc.va=function(){},Vc.ua=function(){},Vc.Oa=function(){},Vd.prototype.g=function(e,t){return new Ud(e,t)},Xc(Ud,nf),Ud.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),df($c(e.hb,e,t))),Pf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ld(e,null,e.W),xd(e)},Ud.prototype.close=function(){gd(this.g)},Ud.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,bd(this.g,t)}else this.v?((t={}).__data__=of(e),bd(this.g,t)):bd(this.g,e)},Ud.prototype.M=function(){this.g.j=null,delete this.j,gd(this.g),delete this.g,Ud.Z.M.call(this)},Xc(jd,Kf),Xc(Bd,Gf),Xc(qd,Fd),qd.prototype.xa=function(){rf(this.g,"a")},qd.prototype.wa=function(e){rf(this.g,new jd(e))},qd.prototype.va=function(e){rf(this.g,new Bd(e))},qd.prototype.ua=function(){rf(this.g,"b")},Vd.prototype.createWebChannel=Vd.prototype.g,Ud.prototype.send=Ud.prototype.u,Ud.prototype.open=Ud.prototype.m,Ud.prototype.close=Ud.prototype.close,Ff.NO_ERROR=0,Ff.TIMEOUT=8,Ff.HTTP_ERROR=6,Vf.COMPLETE="complete",Bf.EventType=zf,zf.OPEN="a",zf.CLOSE="b",zf.ERROR="c",zf.MESSAGE="d",nf.prototype.listen=nf.prototype.N,rd.prototype.listenOnce=rd.prototype.O,rd.prototype.getLastError=rd.prototype.La,rd.prototype.getLastErrorCode=rd.prototype.Da,rd.prototype.getStatus=rd.prototype.ba,rd.prototype.getResponseJson=rd.prototype.Qa,rd.prototype.getResponseText=rd.prototype.ga,rd.prototype.send=rd.prototype.ea;var zd=jc.createWebChannelTransport=function(){return new Vd},Kd=jc.getStatEventTarget=function(){return Af()},Gd=jc.ErrorCode=Ff,Wd=jc.EventType=Vf,Hd=jc.Event=Cf,Qd=jc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Jd=jc.FetchXmlHttpFactory=$h,$d=jc.WebChannel=Bf,Yd=jc.XhrIo=rd,Xd="@firebase/firestore",Zd=function(){function e(t){ne(this,e),this.uid=t}return ie(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Zd.UNAUTHENTICATED=new Zd(null),Zd.GOOGLE_CREDENTIALS=new Zd("google-credentials-uid"),Zd.FIRST_PARTY=new Zd("first-party-uid"),Zd.MOCK_USER=new Zd("mock-user");var ep="9.9.2",tp=new ut("@firebase/firestore");function np(){return tp.logLevel}function rp(e){if(tp.logLevel<=et.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(op);tp.debug.apply(tp,["Firestore (".concat(ep,"): ").concat(e)].concat(Ge(i)))}}function ip(e){if(tp.logLevel<=et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(op);tp.error.apply(tp,["Firestore (".concat(ep,"): ").concat(e)].concat(Ge(i)))}}function ap(e){if(tp.logLevel<=et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(op);tp.warn.apply(tp,["Firestore (".concat(ep,"): ").concat(e)].concat(Ge(i)))}}function op(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function up(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ep,") INTERNAL ASSERTION FAILED: ")+e;throw ip(t),new Error(t)}function sp(e,t){e||up()}function cp(e,t){return e}var lp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fp=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ie(n)}(Ae),hp=ie((function e(){var t=this;ne(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),dp=ie((function e(t,n){ne(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),pp=function(){function e(){ne(this,e)}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vp=function(){function e(t){ne(this,e),this.token=t,this.changeListener=null}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),mp=function(){function e(t){ne(this,e),this.t=t,this.currentUser=Zd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ie(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new hp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new hp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){rp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(rp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(rp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(sp("string"==typeof n.accessToken),new dp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return sp(null===e||"string"==typeof e),new Zd(e)}}]),e}(),yp=ie((function e(t,n,r){ne(this,e),this.type="FirstParty",this.user=Zd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),gp=function(){function e(t,n,r){ne(this,e),this.h=t,this.l=n,this.m=r}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(new yp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),kp=ie((function e(t){ne(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wp=function(){function e(t){ne(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ie(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&rp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,rp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){rp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):rp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(sp("string"==typeof t.token),e.p=t.token,new kp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function bp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var xp=function(){function e(){ne(this,e)}return ie(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=bp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function _p(e,t){return e<t?-1:e>t?1:0}function Ip(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ep(e){return e+"\0"}var Tp=function(){function e(t,n){if(ne(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fp(lp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fp(lp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fp(lp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fp(lp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ie(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?_p(this.nanoseconds,e.nanoseconds):_p(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Sp=function(){function e(t){ne(this,e),this.timestamp=t}return ie(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Tp(0,0))}},{key:"max",value:function(){return new e(new Tp(253402300799,999999999))}}]),e}(),Cp=function(){function e(t,n,r){ne(this,e),void 0===n?n=0:n>t.length&&up(),void 0===r?r=t.length-n:r>t.length-n&&up(),this.segments=t,this.offset=n,this.len=r}return ie(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Np=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new fp(lp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ge(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cp),Ap=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dp=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ap.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fp(lp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new fp(lp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new fp(lp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new fp(lp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cp),Op=function(){function e(t){ne(this,e),this.path=t}return ie(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Np.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Np.fromString(t))}},{key:"fromName",value:function(t){return new e(Np.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Np.emptyPath())}},{key:"comparator",value:function(e,t){return Np.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Np(t.slice()))}}]),e}(),Rp=ie((function e(t,n,r,i){ne(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Pp(e){return e.fields.find((function(e){return 2===e.kind}))}function Lp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Rp.UNKNOWN_ID=-1;var Mp=ie((function e(t,n){ne(this,e),this.fieldPath=t,this.kind=n}));var Fp=function(){function e(t,n){ne(this,e),this.sequenceNumber=t,this.offset=n}return ie(e,null,[{key:"empty",value:function(){return new e(0,jp.min())}}]),e}();function Vp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Sp.fromTimestamp(1e9===r?new Tp(n+1,0):new Tp(n,r));return new jp(i,Op.empty(),t)}function Up(e){return new jp(e.readTime,e.key,-1)}var jp=function(){function e(t,n,r){ne(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ie(e,null,[{key:"min",value:function(){return new e(Sp.min(),Op.empty(),-1)}},{key:"max",value:function(){return new e(Sp.max(),Op.empty(),-1)}}]),e}();function Bp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Op.comparator(e.documentKey,t.documentKey))?n:_p(e.largestBatchId,t.largestBatchId)}var qp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zp=function(){function e(){ne(this,e),this.onCommittedListeners=[]}return ie(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Kp(e){return Gp.apply(this,arguments)}function Gp(){return Gp=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===lp.FAILED_PRECONDITION&&t.message===qp){e.next=2;break}throw t;case 2:rp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}var Wp=function(){function e(t){var n=this;ne(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ie(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&up(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ae(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Hp=function(){function e(t,n){var r=this;ne(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new hp,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new $p(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=tv(e.target.error);r.T.reject(new $p(t,n))}}return ie(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(rp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Xp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new $p(n,t)}}}]),e}(),Qp=function(){function e(t,n,r){ne(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(_e())&&ip("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ie(e,[{key:"k",value:function(){var e=He(Je().mark((function e(t){var n=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return rp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $p(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fp(lp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fp(lp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new $p(t,n))},i.onupgradeneeded=function(e){rp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.M(t,i.transaction,e.oldVersion,n.version).next((function(){rp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.O&&(this.db.onversionchange=function(e){return n.O(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.O=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=He(Je().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Je().mark((function e(){var n,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Hp.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Wp.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,rp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return rp("SimpleDb","Removing database:",e),Zp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Ne())return!1;if(e.S())return!0;var t=_e(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Jp=function(){function e(t){ne(this,e),this.$=t,this.B=!1,this.L=null}return ie(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Zp(this.$.delete())}}]),e}(),$p=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,lp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ie(n)}(fp);function Yp(e){return"IndexedDbTransactionError"===e.name}var Xp=function(){function e(t){ne(this,e),this.store=t}return ie(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(rp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zp(n)}},{key:"add",value:function(e){return rp("SimpleDb","ADD",this.store.name,e,e),Zp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Zp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),rp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return rp("SimpleDb","DELETE",this.store.name,e),Zp(this.store.delete(e))}},{key:"count",value:function(){return rp("SimpleDb","COUNT",this.store.name),Zp(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Wp((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Wp((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){rp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Wp((function(n,r){t.onerror=function(e){var t=tv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Wp((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Jp(i),o=t(i.primaryKey,i.value,a);if(o instanceof Wp){var u=o.catch((function(e){return a.done(),Wp.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Wp.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Zp(e){return new Wp((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tv(e.target.error);n(t)}}))}var ev=!1;function tv(e){var t=Qp.v(_e());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ev||(ev=!0,setTimeout((function(){throw r}),0)),r}}return e}var nv=function(){function e(t,n){ne(this,e),this.asyncQueue=t,this.X=n,this.task=null}return ie(e,[{key:"start",value:function(){this.Z(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;rp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=rp,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Yp(e.t4)){e.next=17;break}rp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Kp(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),rv=function(){function e(t,n){ne(this,e),this.localStore=t,this.persistence=n}return ie(e,[{key:"tt",value:function(){var e=He(Je().mark((function e(){var t,n=this,r=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Wp.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return rp("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return rp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Up(t);Bp(r,n)>0&&(n=r)})),new jp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),iv=function(){function e(t,n){var r=this;ne(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ie(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function av(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ov(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}iv.ot=-1;var sv=function(){function e(t,n){ne(this,e),this.comparator=t,this.root=n||lv.EMPTY}return ie(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,lv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,lv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new cv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new cv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new cv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new cv(this.root,e,this.comparator,!0)}}]),e}(),cv=function(){function e(t,n,r,i){ne(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ie(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),lv=function(){function e(t,n,r,i,a){ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ie(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw up();if(this.right.isRed())throw up();var e=this.left.check();if(e!==this.right.check())throw up();return e+(this.isRed()?0:1)}}]),e}();lv.EMPTY=null,lv.RED=!0,lv.BLACK=!1,lv.EMPTY=new(function(){function e(){ne(this,e),this.size=0}return ie(e,[{key:"key",get:function(){throw up()}},{key:"value",get:function(){throw up()}},{key:"color",get:function(){throw up()}},{key:"left",get:function(){throw up()}},{key:"right",get:function(){throw up()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new lv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var fv=function(){function e(t){ne(this,e),this.comparator=t,this.data=new sv(this.comparator)}return ie(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new hv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new hv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),hv=function(){function e(t){ne(this,e),this.iter=t}return ie(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function dv(e){return e.hasNext()?e.getNext():void 0}var pv=function(){function e(t){ne(this,e),this.fields=t,t.sort(Dp.comparator)}return ie(e,[{key:"unionWith",value:function(t){var n,r=new fv(Dp.comparator),i=ae(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=ae(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ae(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ip(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var vv=function(e){function t(e){ne(this,t),this.binaryString=e}return ie(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return _p(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();vv.EMPTY_BYTE_STRING=new vv("");var mv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yv(e){if(sp(!!e),"string"==typeof e){var t=0,n=mv.exec(e);if(sp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:gv(e.seconds),nanos:gv(e.nanos)}}function gv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kv(e){return"string"==typeof e?vv.fromBase64String(e):vv.fromUint8Array(e)}function wv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bv(e){var t=e.mapValue.fields.__previous_value__;return wv(t)?bv(t):t}function xv(e){var t=yv(e.mapValue.fields.__local_write_time__.timestampValue);return new Tp(t.seconds,t.nanos)}var _v=ie((function e(t,n,r,i,a,o,u,s){ne(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Iv=function(){function e(t,n){ne(this,e),this.projectId=t,this.database=n||"(default)"}return ie(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ev(e){return null==e}function Tv(e){return 0===e&&1/e==-1/0}function Sv(e){return"number"==typeof e&&Number.isInteger(e)&&!Tv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Cv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nv={nullValue:"NULL_VALUE"};function Av(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wv(e)?4:Kv(e)?9007199254740991:10:up()}function Dv(e,t){if(e===t)return!0;var n=Av(e);if(n!==Av(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xv(e).isEqual(xv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=yv(e.timestampValue),r=yv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kv(e.bytesValue).isEqual(kv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gv(e.geoPointValue.latitude)===gv(t.geoPointValue.latitude)&&gv(e.geoPointValue.longitude)===gv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gv(e.integerValue)===gv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=gv(e.doubleValue),r=gv(t.doubleValue);return n===r?Tv(n)===Tv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ip(e.arrayValue.values||[],t.arrayValue.values||[],Dv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(av(n)!==av(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dv(n[i],r[i])))return!1;return!0}(e,t);default:return up()}}function Ov(e,t){return void 0!==(e.values||[]).find((function(e){return Dv(e,t)}))}function Rv(e,t){if(e===t)return 0;var n=Av(e),r=Av(t);if(n!==r)return _p(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _p(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=gv(e.integerValue||e.doubleValue),r=gv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pv(e.timestampValue,t.timestampValue);case 4:return Pv(xv(e),xv(t));case 5:return _p(e.stringValue,t.stringValue);case 6:return function(e,t){var n=kv(e),r=kv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=_p(n[i],r[i]);if(0!==a)return a}return _p(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=_p(gv(e.latitude),gv(t.latitude));return 0!==n?n:_p(gv(e.longitude),gv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Rv(n[i],r[i]);if(a)return a}return _p(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Cv.mapValue&&t===Cv.mapValue)return 0;if(e===Cv.mapValue)return 1;if(t===Cv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=_p(r[o],a[o]);if(0!==u)return u;var s=Rv(n[r[o]],i[a[o]]);if(0!==s)return s}return _p(r.length,a.length)}(e.mapValue,t.mapValue);default:throw up()}}function Pv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return _p(e,t);var n=yv(e),r=yv(t),i=_p(n.seconds,r.seconds);return 0!==i?i:_p(n.nanos,r.nanos)}function Lv(e){return Mv(e)}function Mv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=yv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?kv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Op.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ae(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Mv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ae(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Mv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):up();var t,n}function Fv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Vv(e){return!!e&&"integerValue"in e}function Uv(e){return!!e&&"arrayValue"in e}function jv(e){return!!e&&"nullValue"in e}function Bv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qv(e){return!!e&&"mapValue"in e}function zv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ov(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=zv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=zv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Kv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gv(e){return"nullValue"in e?Nv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Fv(Iv.empty(),Op.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:up()}function Wv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Fv(Iv.empty(),Op.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Cv:up()}function Hv(e,t){var n=Rv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Qv(e,t){var n=Rv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Jv=function(){function e(t){ne(this,e),this.value=t}return ie(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!qv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zv(t)}},{key:"setAll",value:function(e){var t=this,n=Dp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=zv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());qv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Dv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];qv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ov(t,(function(t,n){return e[t]=n}));var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(zv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function $v(e){var t=[];return ov(e.fields,(function(e,n){var r=new Dp([e]);if(qv(n)){var i=$v(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ae(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new pv(t)}var Yv=function(){function e(t,n,r,i,a,o){ne(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ie(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Jv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Jv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Sp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Sp.min(),Sp.min(),Jv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Sp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Sp.min(),Jv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Sp.min(),Jv.empty(),2)}}]),e}(),Xv=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ne(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function Zv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Xv(e,t,n,r,i,a,o)}function em(e){var t=cp(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Lv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ev(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Lv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Lv(e)})).join(",")),t.ut=n}return t.ut}function tm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ym(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Dv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!km(e.startAt,t.startAt)&&km(e.endAt,t.endAt)}function nm(e){return Op.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function rm(e,t){return e.filters.filter((function(e){return e instanceof om&&e.field.isEqual(t)}))}function im(e,t,n){var r,i=Nv,a=!0,o=ae(rm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Nv,c=!0;switch(u.op){case"<":case"<=":s=Gv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Nv}Hv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Hv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function am(e,t,n){var r,i=Cv,a=!0,o=ae(rm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Cv,c=!0;switch(u.op){case">=":case">":s=Wv(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Cv}Qv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Qv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var om=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Rv(t,this.value)):null!==t&&Av(this.value)===Av(t)&&this.at(Rv(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return up()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new um(e,t,r):"array-contains"===t?new fm(e,r):"in"===t?new hm(e,r):"not-in"===t?new dm(e,r):"array-contains-any"===t?new pm(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new sm(e,n):new cm(e,n)}}]),n}(function(){return ie((function e(){ne(this,e)}))}()),um=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,i)).key=Op.fromName(i.referenceValue),a}return ie(n,[{key:"matches",value:function(e){var t=Op.comparator(e.key,this.key);return this.at(t)}}]),n}(om),sm=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,"in",r)).keys=lm("in",r),i}return ie(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(om),cm=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,"not-in",r)).keys=lm("not-in",r),i}return ie(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(om);function lm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Op.fromName(e.referenceValue)}))}var fm=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"array-contains",r)}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Uv(t)&&Ov(t.arrayValue,this.value)}}]),n}(om),hm=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"in",r)}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ov(this.value.arrayValue,t)}}]),n}(om),dm=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"not-in",r)}return ie(n,[{key:"matches",value:function(e){if(Ov(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ov(this.value.arrayValue,t)}}]),n}(om),pm=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"array-contains-any",r)}return ie(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Uv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ov(t.value.arrayValue,e)}))}}]),n}(om),vm=ie((function e(t,n){ne(this,e),this.position=t,this.inclusive=n})),mm=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ne(this,e),this.field=t,this.dir=n}));function ym(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function gm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Op.comparator(Op.fromName(o.referenceValue),n.key):Rv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function km(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Dv(e.position[n],t.position[n]))return!1;return!0}var wm=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ne(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function bm(e,t,n,r,i,a,o,u){return new wm(e,t,n,r,i,a,o,u)}function xm(e){return new wm(e)}function _m(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Im(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Em(e){var t,n=ae(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Tm(e){return null!==e.collectionGroup}function Sm(e){var t=cp(e);if(null===t.lt){t.lt=[];var n=Em(t),r=Im(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new mm(n)),t.lt.push(new mm(Dp.keyField(),"asc"));else{var i,a=!1,o=ae(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new mm(Dp.keyField(),s))}}}return t.lt}function Cm(e){var t=cp(e);if(!t.ft)if("F"===t.limitType)t.ft=Zv(t.path,t.collectionGroup,Sm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ae(Sm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new mm(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new vm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new vm(t.startAt.position,t.startAt.inclusive):null;t.ft=Zv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Nm(e,t,n){return new wm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Am(e,t){return tm(Cm(e),Cm(t))&&e.limitType===t.limitType}function Dm(e){return"".concat(em(Cm(e)),"|lt:").concat(e.limitType)}function Om(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Lv(t.value));var t})).join(", "),"]")),Ev(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Lv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Lv(e)})).join(",")),"Target(".concat(t,")")}(Cm(e)),"; limitType=").concat(e.limitType,")")}function Rm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Op.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ae(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ae(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=gm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Sm(e),t))&&!(e.endAt&&!function(e,t,n){var r=gm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Sm(e),t))}(e,t)}function Pm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Lm(e){return function(t,n){var r,i=!1,a=ae(Sm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Mm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Mm(e,t,n){var r=e.field.isKeyField()?Op.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Rv(r,i):up()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return up()}}function Fm(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tv(t)?"-0":t}}function Vm(e){return{integerValue:""+e}}function Um(e,t){return Sv(t)?Vm(t):Fm(e,t)}var jm=ie((function e(){ne(this,e),this._=void 0}));function Bm(e,t,n){return e instanceof Km?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Gm?Wm(e,t):e instanceof Hm?Qm(e,t):function(e,t){var n=zm(e,t),r=$m(n)+$m(e._t);return Vv(n)&&Vv(e._t)?Vm(r):Fm(e.wt,r)}(e,t)}function qm(e,t,n){return e instanceof Gm?Wm(e,t):e instanceof Hm?Qm(e,t):n}function zm(e,t){return e instanceof Jm?Vv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Km=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n)}(jm),Gm=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).elements=e,r}return ie(n)}(jm);function Wm(e,t){var n,r=Ym(t),i=ae(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Dv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Hm=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).elements=e,r}return ie(n)}(jm);function Qm(e,t){var n,r=Ym(t),i=ae(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Dv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Jm=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ie(n)}(jm);function $m(e){return gv(e.integerValue||e.doubleValue)}function Ym(e){return Uv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Xm=ie((function e(t,n){ne(this,e),this.field=t,this.transform=n}));var Zm=ie((function e(t,n){ne(this,e),this.version=t,this.transformResults=n})),ey=function(){function e(t,n){ne(this,e),this.updateTime=t,this.exists=n}return ie(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ty(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ny=ie((function e(){ne(this,e)}));function ry(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vy(e.key,ey.none()):new sy(e.key,e.data,ey.none());var n,r=e.data,i=Jv.empty(),a=new fv(Dp.comparator),o=ae(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new cy(e.key,i,new pv(a.toArray()),ey.none())}function iy(e,t,n){e instanceof sy?function(e,t,n){var r=e.value.clone(),i=fy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cy?function(e,t,n){if(ty(e.precondition,t)){var r=fy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ly(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ay(e,t,n,r){return e instanceof sy?function(e,t,n,r){if(!ty(e.precondition,t))return n;var i=e.value.clone(),a=hy(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cy?function(e,t,n,r){if(!ty(e.precondition,t))return n;var i=hy(e.fieldTransforms,r,t),a=t.data;return a.setAll(ly(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ty(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function oy(e,t){var n,r=null,i=ae(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=zm(a.transform,o||null);null!=u&&(null===r&&(r=Jv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function uy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ip(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Gm&&t instanceof Gm||e instanceof Hm&&t instanceof Hm?Ip(e.elements,t.elements,Dv):e instanceof Jm&&t instanceof Jm?Dv(e._t,t._t):e instanceof Km&&t instanceof Km}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var sy=function(e){se(n,e);var t=de(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ne(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),cy=function(e){se(n,e);var t=de(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ne(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ie(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ny);function ly(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function fy(e,t,n){var r=new Map;sp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,qm(o,u,n[i]))}return r}function hy(e,t,n){var r,i=new Map,a=ae(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Bm(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var dy,py,vy=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),my=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),yy=ie((function e(t){ne(this,e),this.count=t}));function gy(e){switch(e){default:return up();case lp.CANCELLED:case lp.UNKNOWN:case lp.DEADLINE_EXCEEDED:case lp.RESOURCE_EXHAUSTED:case lp.INTERNAL:case lp.UNAVAILABLE:case lp.UNAUTHENTICATED:return!1;case lp.INVALID_ARGUMENT:case lp.NOT_FOUND:case lp.ALREADY_EXISTS:case lp.PERMISSION_DENIED:case lp.FAILED_PRECONDITION:case lp.ABORTED:case lp.OUT_OF_RANGE:case lp.UNIMPLEMENTED:case lp.DATA_LOSS:return!0}}function ky(e){if(void 0===e)return ip("GRPC error has no .code"),lp.UNKNOWN;switch(e){case dy.OK:return lp.OK;case dy.CANCELLED:return lp.CANCELLED;case dy.UNKNOWN:return lp.UNKNOWN;case dy.DEADLINE_EXCEEDED:return lp.DEADLINE_EXCEEDED;case dy.RESOURCE_EXHAUSTED:return lp.RESOURCE_EXHAUSTED;case dy.INTERNAL:return lp.INTERNAL;case dy.UNAVAILABLE:return lp.UNAVAILABLE;case dy.UNAUTHENTICATED:return lp.UNAUTHENTICATED;case dy.INVALID_ARGUMENT:return lp.INVALID_ARGUMENT;case dy.NOT_FOUND:return lp.NOT_FOUND;case dy.ALREADY_EXISTS:return lp.ALREADY_EXISTS;case dy.PERMISSION_DENIED:return lp.PERMISSION_DENIED;case dy.FAILED_PRECONDITION:return lp.FAILED_PRECONDITION;case dy.ABORTED:return lp.ABORTED;case dy.OUT_OF_RANGE:return lp.OUT_OF_RANGE;case dy.UNIMPLEMENTED:return lp.UNIMPLEMENTED;case dy.DATA_LOSS:return lp.DATA_LOSS;default:return up()}}(py=dy||(dy={}))[py.OK=0]="OK",py[py.CANCELLED=1]="CANCELLED",py[py.UNKNOWN=2]="UNKNOWN",py[py.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",py[py.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",py[py.NOT_FOUND=5]="NOT_FOUND",py[py.ALREADY_EXISTS=6]="ALREADY_EXISTS",py[py.PERMISSION_DENIED=7]="PERMISSION_DENIED",py[py.UNAUTHENTICATED=16]="UNAUTHENTICATED",py[py.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",py[py.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",py[py.ABORTED=10]="ABORTED",py[py.OUT_OF_RANGE=11]="OUT_OF_RANGE",py[py.UNIMPLEMENTED=12]="UNIMPLEMENTED",py[py.INTERNAL=13]="INTERNAL",py[py.UNAVAILABLE=14]="UNAVAILABLE",py[py.DATA_LOSS=15]="DATA_LOSS";var wy=function(){function e(t,n){ne(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ie(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ov(this.inner,(function(t,n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return uv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),by=new sv(Op.comparator);function xy(){return by}var _y=new sv(Op.comparator);function Iy(){for(var e=_y,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Ey(e){var t=_y;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ty(){return Cy()}function Sy(){return Cy()}function Cy(){return new wy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ny=new sv(Op.comparator),Ay=new fv(Op.comparator);function Dy(){for(var e=Ay,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Oy=new fv(_p);function Ry(){return Oy}var Py=function(){function e(t,n,r,i,a){ne(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ie(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ly.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Sp.min(),r,Ry(),xy(),Dy())}}]),e}(),Ly=function(){function e(t,n,r,i,a){ne(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ie(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(vv.EMPTY_BYTE_STRING,n,Dy(),Dy(),Dy())}}]),e}(),My=ie((function e(t,n,r,i){ne(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),Fy=ie((function e(t,n){ne(this,e),this.targetId=t,this.It=n})),Vy=ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ne(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Uy=function(){function e(){ne(this,e),this.Tt=0,this.Et=qy(),this.At=vv.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ie(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Dy(),t=Dy(),n=Dy();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:up()}})),new Ly(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=qy()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),jy=function(){function e(t){ne(this,e),this.Ot=t,this.Ft=new Map,this.$t=xy(),this.Bt=By(),this.Lt=new fv(_p)}return ie(e,[{key:"Ut",value:function(e){var t,n=ae(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=ae(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:up()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(nm(i))if(0===n){var a=new Op(i.path);this.Kt(t,a,Yv.newNoDocument(a,Sp.min()))}else sp(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&nm(a.target)){var o=new Op(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Yv.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Dy();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Py(e,n,this.Lt,this.$t,r);return this.$t=xy(),this.Bt=By(),this.Lt=new fv(_p),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Uy,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new fv(_p),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||rp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Uy),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function By(){return new sv(Op.comparator)}function qy(){return new sv(Op.comparator)}var zy={asc:"ASCENDING",desc:"DESCENDING"},Ky={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gy=ie((function e(t,n){ne(this,e),this.databaseId=t,this.dt=n}));function Wy(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hy(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Qy(e,t){return Wy(e,t.toTimestamp())}function Jy(e){return sp(!!e),Sp.fromTimestamp(function(e){var t=yv(e);return new Tp(t.seconds,t.nanos)}(e))}function $y(e,t){return function(e){return new Np(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Yy(e){var t=Np.fromString(e);return sp(wg(t)),t}function Xy(e,t){return $y(e.databaseId,t.path)}function Zy(e,t){var n=Yy(t);if(n.get(1)!==e.databaseId.projectId)throw new fp(lp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fp(lp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Op(rg(n))}function eg(e,t){return $y(e.databaseId,t)}function tg(e){var t=Yy(e);return 4===t.length?Np.emptyPath():rg(t)}function ng(e){return new Np(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rg(e){return sp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ig(e,t,n){return{name:Xy(e,t),fields:n.value.mapValue.fields}}function ag(e,t,n){var r=Zy(e,t.name),i=Jy(t.updateTime),a=new Jv({mapValue:{fields:t.fields}}),o=Yv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function og(e,t){return"found"in t?function(e,t){sp(!!t.found),t.found.name,t.found.updateTime;var n=Zy(e,t.found.name),r=Jy(t.found.updateTime),i=new Jv({mapValue:{fields:t.found.fields}});return Yv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){sp(!!t.missing),sp(!!t.readTime);var n=Zy(e,t.missing),r=Jy(t.readTime);return Yv.newNoDocument(n,r)}(e,t):up()}function ug(e,t){var n;if(t instanceof sy)n={update:ig(e,t.key,t.value)};else if(t instanceof vy)n={delete:Xy(e,t.key)};else if(t instanceof cy)n={update:ig(e,t.key,t.data),updateMask:kg(t.fieldMask)};else{if(!(t instanceof my))return up();n={verify:Xy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Km)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jm)return{fieldPath:t.field.canonicalString(),increment:n._t};throw up()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:up()}(e,t.precondition)),n}function sg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ey.updateTime(Jy(e.updateTime)):void 0!==e.exists?ey.exists(e.exists):ey.none()}(t.currentDocument):ey.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)sp("REQUEST_TIME"===t.setToServerValue),n=new Km;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Gm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Hm(i)}else"increment"in t?n=new Jm(e,t.increment):up();var a=Dp.fromServerFormat(t.fieldPath);return new Xm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Zy(e,t.update.name),a=new Jv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new pv(t.map((function(e){return Dp.fromServerFormat(e)})))}(t.updateMask);return new cy(i,a,o,n,r)}return new sy(i,a,n,r)}if(t.delete){var u=Zy(e,t.delete);return new vy(u,n)}if(t.verify){var s=Zy(e,t.verify);return new my(s,n)}return up()}function cg(e,t){return{documents:[eg(e,t.path)]}}function lg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=eg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=eg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Bv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NAN"}};if(jv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Bv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NOT_NAN"}};if(jv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vg(e.field),op:pg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:vg(e.field),direction:dg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||Ev(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function fg(e){var t=tg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){sp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=hg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new mm(mg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ev(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new vm(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new vm(n,t)}(n.endAt)),bm(t,i,u,o,s,"F",c,l)}function hg(e){return e?void 0!==e.unaryFilter?[gg(e)]:void 0!==e.fieldFilter?[yg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return hg(e)})).reduce((function(e,t){return e.concat(t)})):up():[]}function dg(e){return zy[e]}function pg(e){return Ky[e]}function vg(e){return{fieldPath:e.canonicalString()}}function mg(e){return Dp.fromServerFormat(e.fieldPath)}function yg(e){return om.create(mg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return up()}}(e.fieldFilter.op),e.fieldFilter.value)}function gg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=mg(e.unaryFilter.field);return om.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=mg(e.unaryFilter.field);return om.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=mg(e.unaryFilter.field);return om.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=mg(e.unaryFilter.field);return om.create(i,"!=",{nullValue:"NULL_VALUE"});default:return up()}}function kg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function wg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function bg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=_g(t)),t=xg(e.get(n),t);return _g(t)}function xg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function _g(e){return e+"\x01\x01"}function Ig(e){var t=e.length;if(sp(t>=2),2===t)return sp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Np.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&up(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:up()}a=o+2}return new Np(r)}var Eg=["userId","batchId"];function Tg(e,t){return[e,bg(t)]}function Sg(e,t,n){return[e,bg(t),n]}var Cg={},Ng=["prefixPath","collectionGroup","readTime","documentId"],Ag=["prefixPath","collectionGroup","documentId"],Dg=["collectionGroup","readTime","prefixPath","documentId"],Og=["canonicalId","targetId"],Rg=["targetId","path"],Pg=["path","targetId"],Lg=["collectionId","parent"],Mg=["indexId","uid"],Fg=["uid","sequenceNumber"],Vg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ug=["indexId","uid","orderedDocumentKey"],jg=["userId","collectionPath","documentId"],Bg=["userId","collectionPath","largestBatchId"],qg=["userId","collectionGroup","largestBatchId"],zg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Kg=[].concat(Ge(zg),["documentOverlays"]),Gg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wg=Gg,Hg=[].concat(Wg,["indexConfiguration","indexState","indexEntries"]),Qg=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return ie(n)}(zp);function Jg(e,t){var n=cp(e);return Qp.N(n.ee,t)}var $g=function(){function e(t,n,r,i){ne(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ie(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&iy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ae(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ay(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=ae(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=ay(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Sy();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ry(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Sp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Dy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ip(this.mutations,e.mutations,(function(e,t){return uy(e,t)}))&&Ip(this.baseMutations,e.baseMutations,(function(e,t){return uy(e,t)}))}}]),e}(),Yg=function(){function e(t,n,r,i){ne(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ie(e,null,[{key:"from",value:function(t,n,r){sp(t.mutations.length===r.length);for(var i=Ny,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Xg=function(){function e(t,n){ne(this,e),this.largestBatchId=t,this.mutation=n}return ie(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Zg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Sp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vv.EMPTY_BYTE_STRING;ne(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ie(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ek=ie((function e(t){ne(this,e),this.ne=t}));function tk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Xy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Wy(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rk(t.version)};else{if(!t.isUnknownDocument())return up();r.unknownDocument={path:n.path.toArray(),version:rk(t.version)}}return r}function nk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ik(e){var t=new Tp(e.seconds,e.nanoseconds);return Sp.fromTimestamp(t)}function ak(e,t){for(var n=(t.baseMutations||[]).map((function(t){return sg(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return sg(e.ne,t)})),u=Tp.fromMillis(t.localWriteTimeMs);return new $g(t.batchId,u,n,o)}function ok(e){var t,n,r=ik(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ik(e.lastLimboFreeSnapshotVersion):Sp.min();return void 0!==e.query.documents?(sp(1===(n=e.query).documents.length),t=Cm(xm(tg(n.documents[0])))):t=function(e){return Cm(fg(e))}(e.query),new Zg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,vv.fromBase64String(e.resumeToken))}function uk(e,t){var n,r=rk(t.snapshotVersion),i=rk(t.lastLimboFreeSnapshotVersion);n=nm(t.target)?cg(e.ne,t.target):lg(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:em(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function sk(e){var t=fg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nm(t,t.limit,"L"):t}function ck(e,t){return new Xg(t.largestBatchId,sg(e.ne,t.overlayMutation))}function lk(e,t){var n=t.path.lastSegment();return[e,bg(t.path.popLast()),n]}function fk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:rk(r.readTime),documentKey:bg(r.documentKey.path),largestBatchId:r.largestBatchId}}var hk=function(){function e(){ne(this,e)}return ie(e,[{key:"getBundleMetadata",value:function(e,t){return dk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ik(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return dk(e).put({bundleId:(n=t).id,createTime:rk(Jy(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return pk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:sk(t.bundledQuery),readTime:ik(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return pk(e).put(function(e){return{name:e.name,readTime:rk(Jy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function dk(e){return Jg(e,"bundles")}function pk(e){return Jg(e,"namedQueries")}var vk=function(){function e(t,n){ne(this,e),this.wt=t,this.userId=n}return ie(e,[{key:"getOverlay",value:function(e,t){var n=this;return mk(e).get(lk(this.userId,t)).next((function(e){return e?ck(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ty();return Wp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Xg(t,a);i.push(r.ie(e,o))})),Wp.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(bg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(mk(e).W("collectionPathOverlayIndex",i))})),Wp.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Ty(),a=bg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return mk(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ck(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Ty(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mk(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ck(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return mk(e).put(function(e,t,n){var r=s(lk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ug(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function mk(e){return Jg(e,"documentOverlays")}var yk=function(){function e(){ne(this,e)}return ie(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(gv(e.integerValue));else if("doubleValue"in e){var n=gv(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Tv(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(kv(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Kv(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):up()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Op.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function gk(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function kk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=gk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}yk.ye=new yk;var wk=function(){function e(){ne(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ie(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=kk(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=kk(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Me",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),bk=function(){function e(t){ne(this,e),this.Oe=t}return ie(e,[{key:"de",value:function(e){this.Oe.pe(e)}},{key:"he",value:function(e){this.Oe.be(e)}},{key:"ae",value:function(e){this.Oe.ve(e)}},{key:"ue",value:function(){this.Oe.Ce()}}]),e}(),xk=function(){function e(t){ne(this,e),this.Oe=t}return ie(e,[{key:"de",value:function(e){this.Oe.Ee(e)}},{key:"he",value:function(e){this.Oe.Pe(e)}},{key:"ae",value:function(e){this.Oe.De(e)}},{key:"ue",value:function(){this.Oe.Ne()}}]),e}(),_k=function(){function e(){ne(this,e),this.Oe=new wk,this.Fe=new bk(this.Oe),this.$e=new xk(this.Oe)}return ie(e,[{key:"seed",value:function(e){this.Oe.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Me",value:function(){return this.Oe.Me()}},{key:"reset",value:function(){this.Oe.reset()}}]),e}(),Ik=function(){function e(t,n,r,i){ne(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ie(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ek(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Tk(e.arrayValue,t.arrayValue))?n:0!==(n=Tk(e.directionalValue,t.directionalValue))?n:Op.comparator(e.documentKey,t.documentKey)}function Tk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Sk=function(){function e(t){ne(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=ae(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ie(e,[{key:"Ge",value:function(e){var t=Pp(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Lp(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=ae(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Ck=function(){function e(){ne(this,e),this.ze=new Nk}return ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Wp.resolve()}},{key:"getCollectionParents",value:function(e,t){return Wp.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Wp.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Wp.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Wp.resolve(null)}},{key:"getIndexType",value:function(e,t){return Wp.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Wp.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Wp.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Wp.resolve(jp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Wp.resolve(jp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Wp.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Wp.resolve()}}]),e}(),Nk=function(){function e(){ne(this,e),this.index={}}return ie(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fv(Np.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new fv(Np.comparator)).toArray()}}]),e}(),Ak=new Uint8Array(0),Dk=function(){function e(t,n){ne(this,e),this.user=t,this.databaseId=n,this.He=new Nk,this.Je=new wy((function(e){return em(e)}),(function(e,t){return tm(e,t)})),this.uid=t.uid||""}return ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:bg(i)};return Ok(e).put(a)}return Wp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ep(t),""],!1,!0);return Ok(e).K(r).next((function(e){var r,i=ae(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ig(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Pk(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Lk(e);return a.next((function(e){o.put(fk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Pk(e),r=Lk(e),i=Rk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Rk(e),i=!0,a=new Map;return Wp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Dy(),o=[];return Wp.forEach(a,(function(i,a){var u;rp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(em(t)));var s=function(e,t){var n=Pp(t);if(void 0===n)return null;var r,i=ae(rm(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ae(Lp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ae(rm(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ae(Lp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?im(e,o.fieldPath,e.startAt):am(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vm(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=ae(Lp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?am(e,o.fieldPath,e.endAt):im(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vm(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Wp.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Op.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Wp.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):Ak,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,Ge(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new Ik(e,Op.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Ik(e,Op.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Sk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Wp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new fv(Dp.comparator),r=!1,i=ae(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=ae(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new _k,i=ae(Lp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);yk.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Me()}},{key:"nn",value:function(e){var t=new _k;return yk.ye.re(e,t.Be(0)),t.Me()}},{key:"un",value:function(e,t){var n=new _k;return yk.ye.re(Fv(this.databaseId,t),n.Be(function(e){var t=Lp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Me()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new _k);var i,a=0,o=ae(Lp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ae(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Uv(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);yk.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Me();return t}},{key:"an",value:function(e,t,n){var r,i=Ge(e),a=[],o=ae(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ae(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new _k;f.seed(l.Me()),yk.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof om&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Pk(e),i=Lk(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Wp.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fp(t.sequenceNumber,new jp(ik(t.readTime),new Op(Ig(t.documentKey)),t.largestBatchId)):Fp.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Mp(Dp.fromServerFormat(n),r)}));return new Rp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:_p(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Pk(e),a=Lk(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Wp.forEach(t,(function(t){return a.put(fk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Wp.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Wp.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Wp.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Wp.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Rk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Rk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Rk(e),i=new fv(Ek);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Ik(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new fv(Ek),r=this.on(t,e);if(null==r)return n;var i=Pp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Uv(a)){var o,u=ae(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Ik(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Ik(t.indexId,e.key,Ak,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;rp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=dv(a),s=dv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=dv(o)):l?(i(u),u=dv(a)):(u=dv(a),s=dv(o))}}(r,i,Ek,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Wp.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Lk(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Ek(e,t)})).filter((function(e,t,n){return!t||0!==Ek(e,n[t-1])}));var r=[];r.push(e);var i,a=ae(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ek(o,e),s=Ek(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Ak,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Ak,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Mk)}},{key:"getMinOffset",value:function(e,t){var n=this;return Wp.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||up()}))})).next(Mk)}}]),e}();function Ok(e){return Jg(e,"collectionParents")}function Rk(e){return Jg(e,"indexEntries")}function Pk(e){return Jg(e,"indexConfiguration")}function Lk(e){return Jg(e,"indexState")}function Mk(e){sp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Bp(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jp(t.readTime,t.documentKey,n)}var Fk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vk=function(){function e(t,n,r){ne(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ie(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Uk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){sp(1===u)})));var c,l=[],f=ae(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Sg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Wp.waitFor(a).next((function(){return l}))}function jk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw up();t=e.noDocument}return JSON.stringify(t).length}Vk.DEFAULT_COLLECTION_PERCENTILE=10,Vk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vk.DEFAULT=new Vk(41943040,Vk.DEFAULT_COLLECTION_PERCENTILE,Vk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vk.DISABLED=new Vk(-1,0,0);var Bk=function(){function e(t,n,r,i){ne(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return ie(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zk(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Kk(e),o=zk(e);return o.add({}).next((function(u){sp("number"==typeof u);var s,c=new $g(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ug(e.ne,t)})),i=n.mutations.map((function(t){return ug(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new fv((function(e,t){return _p(e.canonicalString(),t.canonicalString())})),d=ae(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Sg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Cg))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Wp.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return zk(e).get(t).next((function(e){return e?(sp(e.userId===n.userId),ak(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Wp.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return zk(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(sp(t.batchId>=r),a=ak(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zk(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zk(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return ak(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Tg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Kk(e).J({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=Ig(l);if(c===n.userId&&t.path.isEqual(h))return zk(e).get(f).next((function(e){if(!e)throw up();sp(e.userId===n.userId),a.push(ak(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fv(_p),i=[];return t.forEach((function(t){var a=Tg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Kk(e).J({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=Ig(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Wp.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Tg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new fv(_p);return Kk(e).J({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=Ig(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(zk(e).get(t).next((function(e){if(null===e)throw up();sp(e.userId===n.userId),r.push(ak(n.wt,e))})))})),Wp.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Uk(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Wp.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Wp.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Kk(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ig(e[1]);i.push(a)}else r.done()})).next((function(){sp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return qk(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Gk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return sp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function qk(e,t,n){var r=Tg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Kk(e).J({range:a,H:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function zk(e){return Jg(e,"mutations")}function Kk(e){return Jg(e,"documentMutations")}function Gk(e){return Jg(e,"mutationQueues")}var Wk=function(){function e(t){ne(this,e),this.En=t}return ie(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Hk=function(){function e(t,n){ne(this,e),this.referenceDelegate=t,this.wt=n}return ie(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new Wk(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Sp.fromTimestamp(new Tp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Qk(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return sp(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Qk(e).J((function(o,u){var s=ok(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Wp.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Qk(e).J((function(e,n){var r=ok(n);t(r)}))}},{key:"bn",value:function(e){return Jk(e).get("targetGlobalKey").next((function(e){return sp(null!==e),e}))}},{key:"Pn",value:function(e,t){return Jk(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Qk(e).put(uk(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=em(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qk(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ok(n);tm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=$k(e);return t.forEach((function(t){var o=bg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Wp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=$k(e);return Wp.forEach(t,(function(t){var a=bg(t.path);return Wp.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=$k(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=$k(e),i=Dy();return r.J({range:n,H:!0},(function(e,t,n){var r=Ig(e[1]),a=new Op(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=bg(t.path),r=IDBKeyRange.bound([n],[Ep(n)],!1,!0),i=0;return $k(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Qk(e).get(t).next((function(e){return e?ok(e):null}))}}]),e}();function Qk(e){return Jg(e,"targets")}function Jk(e){return Jg(e,"targetGlobal")}function $k(e){return Jg(e,"targetDocuments")}function Yk(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=_p(r,o);return 0===c?_p(i,u):c}var Xk=function(){function e(t){ne(this,e),this.Sn=t,this.buffer=new fv(Yk),this.Dn=0}return ie(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Yk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Zk=function(){function e(t,n,r){ne(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return ie(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;rp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Yp(e.t0)){e.next=12;break}rp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Kp(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ew=function(){function e(t,n){ne(this,e),this.Mn=t,this.params=n}return ie(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.On(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Wp.resolve(iv.ot);var r=new Xk(t);return this.Mn.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.Mn.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(rp("LruGarbageCollector","Garbage collection skipped; disabled"),Wp.resolve(Fk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(rp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Fk):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(rp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),np()<=et.DEBUG&&rp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Wp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),tw=function(){function e(t,n){ne(this,e),this.db=t,this.garbageCollector=function(e,t){return new ew(e,t)}(this,n)}return ie(e,[{key:"On",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return nw(e,n)}},{key:"removeReference",value:function(e,t,n){return nw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return nw(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Gk(e).Y((function(r){return qk(e,r,t).next((function(e){return e&&(n=!0),Wp.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Sp.min()),$k(e).delete([0,bg(o.path)])}))}));i.push(s)}})).next((function(){return Wp.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return nw(e,t)}},{key:"Ln",value:function(e,t){var n,r=$k(e),i=iv.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==iv.ot&&t(new Op(Ig(n)),i),i=c,n=u):i=iv.ot})).next((function(){i!==iv.ot&&t(new Op(Ig(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function nw(e,t){return $k(e).put(function(e,t){return{targetId:0,path:bg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var rw=function(){function e(){ne(this,e),this.changes=new wy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ie(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Yv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Wp.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),iw=function(){function e(t){ne(this,e),this.wt=t}return ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return sw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return sw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],nk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Yv.newInvalidDocument(t);return sw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cw(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Yv.newInvalidDocument(t)};return sw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cw(t))},(function(e,i){r={document:n.Kn(t,i),size:jk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=xy();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=xy(),i=new sv(Op.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,jk(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Wp.resolve();var r=new fv(fw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(cw(r.first()),cw(r.last())),a=r.getIterator(),o=a.getNext();return sw(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Op.fromSegments([].concat(Ge(t.prefixPath),[t.collectionGroup,t.documentId]));o&&fw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(cw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),nk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sw(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=xy(),i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Op.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=xy(),o=lw(t,n),u=lw(t,jp.max());return sw(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Op.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ow(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return uw(e).get("remoteDocumentGlobalKey").next((function(e){return sp(!!e),e}))}},{key:"qn",value:function(e,t){return uw(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=ag(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Op.fromSegments(t.noDocument.path),i=ik(t.noDocument.readTime);n=Yv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return up();var a=Op.fromSegments(t.unknownDocument.path),o=ik(t.unknownDocument.version);n=Yv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Tp(e[0],e[1]);return Sp.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Sp.min()))return n}return Yv.newInvalidDocument(e)}}]),e}();function aw(e){return new iw(e)}var ow=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new wy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new fv((function(e,t){return _p(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=tk(t.zn.wt,o);i=i.add(a.path.popLast());var c=jk(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=tk(t.zn.wt,o.convertToNoDocument(Sp.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Wp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(rw);function uw(e){return Jg(e,"remoteDocumentGlobal")}function sw(e){return Jg(e,"remoteDocumentsV14")}function cw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function lw(e,t){var n=t.documentKey.path.toArray();return[e,nk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=_p(n[a],r[a]))return i;return(i=_p(n.length,r.length))||((i=_p(n[n.length-2],r[r.length-2]))||_p(n[n.length-1],r[r.length-1]))}var hw=ie((function e(t,n){ne(this,e),this.overlayedDocument=t,this.mutatedFields=n})),dw=function(){function e(t,n,r,i){ne(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ie(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&ay(r.mutation,e,pv.empty(),Tp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Dy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dy(),i=Ty();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Iy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ty();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Dy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=xy(),a=Cy(),o=Cy();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof cy)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),ay(o.mutation,t,o.mutation.getFieldMask(),Tp.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new hw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Cy(),i=new sv((function(e,t){return e-t})),a=Dy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=ae(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||pv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Dy()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Sy();c.forEach((function(e){if(!a.has(e)){var n=ry(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Wp.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Op.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Wp.resolve(Ty()),u=-1,s=a;return o.next((function(t){return Wp.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Wp.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Dy())})).next((function(e){return{batchId:u,changes:Ey(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Op(t)).next((function(e){var t=Iy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Iy();return this.indexManager.getCollectionParents(e,i).next((function(o){return Wp.forEach(o,(function(o){var u=function(e,t){return new wm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Yv.newInvalidDocument(n)))}));var n=Iy();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&ay(a.mutation,i,pv.empty(),Tp.now()),Rm(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Wp.resolve(Yv.newInvalidDocument(t))}}]),e}(),pw=function(){function e(t){ne(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ie(e,[{key:"getBundleMetadata",value:function(e,t){return Wp.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Jy(n.createTime)}),Wp.resolve()}},{key:"getNamedQuery",value:function(e,t){return Wp.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:sk(e.bundledQuery),readTime:Jy(e.readTime)}}(t)),Wp.resolve()}}]),e}(),vw=function(){function e(){ne(this,e),this.overlays=new sv(Op.comparator),this.Xn=new Map}return ie(e,[{key:"getOverlay",value:function(e,t){return Wp.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ty();return Wp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Wp.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Wp.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ty(),i=t.length+1,a=new Op(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Wp.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new sv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ty(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ty(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Wp.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Xg(t,n));var a=this.Xn.get(t);void 0===a&&(a=Dy(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),mw=function(){function e(){ne(this,e),this.Zn=new fv(yw.ts),this.es=new fv(yw.ns)}return ie(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new yw(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new yw(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Op(new Np([])),r=new yw(n,e),i=new yw(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Op(new Np([])),n=new yw(t,e),r=new yw(t,e+1),i=Dy();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new yw(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),yw=function(){function e(t,n){ne(this,e),this.key=t,this.ls=n}return ie(e,null,[{key:"ts",value:function(e,t){return Op.comparator(e.key,t.key)||_p(e.ls,t.ls)}},{key:"ns",value:function(e,t){return _p(e.ls,t.ls)||Op.comparator(e.key,t.key)}}]),e}(),gw=function(){function e(t,n){ne(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new fv(yw.ts)}return ie(e,[{key:"checkEmpty",value:function(e){return Wp.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new $g(i,t,n,r);this.mutationQueue.push(a);var o,u=ae(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new yw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Wp.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Wp.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Wp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Wp.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Wp.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new yw(t,0),i=new yw(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Wp.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fv(_p);return t.forEach((function(e){var t=new yw(e,0),i=new yw(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Wp.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Op.isDocumentKey(i)||(i=i.child(""));var a=new yw(new Op(i),0),o=new fv(_p);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Wp.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;sp(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Wp.forEach(t.mutations,(function(i){var a=new yw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new yw(t,0),r=this.ds.firstAfterOrEqual(n);return Wp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Wp.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),kw=function(){function e(t){ne(this,e),this.ps=t,this.docs=new sv(Op.comparator),this.size=0}return ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Wp.resolve(n?n.document.mutableCopy():Yv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=xy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Yv.newInvalidDocument(e))})),Wp.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=xy(),i=new Op(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Bp(Up(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Wp.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){up()}},{key:"Is",value:function(e,t){return Wp.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ww(this)}},{key:"getSize",value:function(e){return Wp.resolve(this.size)}}]),e}(),ww=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).zn=e,r}return ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Wp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(rw),bw=function(){function e(t){ne(this,e),this.persistence=t,this.Ts=new wy((function(e){return em(e)}),tm),this.lastRemoteSnapshotVersion=Sp.min(),this.highestTargetId=0,this.Es=0,this.As=new mw,this.targetCount=0,this.Rs=Wk.An()}return ie(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Wp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Wp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Wp.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Wp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Wp.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Wk(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Wp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Wp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Wp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Wp.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Wp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Wp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Wp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Wp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Wp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Wp.resolve(n)}},{key:"containsKey",value:function(e,t){return Wp.resolve(this.As.containsKey(t))}}]),e}(),xw=function(){function e(t,n){var r=this;ne(this,e),this.bs={},this.overlays={},this.Ps=new iv(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new bw(this),this.indexManager=new Ck,this.remoteDocumentCache=new kw((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new ek(n),this.Ds=new pw(this.wt)}return ie(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new vw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new gw(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;rp("MemoryPersistence","Starting transaction:",e);var i=new _w(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Wp.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),_w=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ie(n)}(zp),Iw=function(){function e(t){ne(this,e),this.persistence=t,this.ks=new mw,this.Ms=null}return ie(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw up()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Wp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Wp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Wp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wp.forEach(this.Fs,(function(r){var i=Op.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Sp.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Wp.or([function(){return Wp.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}(),Ew=function(){function e(t){ne(this,e),this.wt=t}return ie(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Hp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eg,{unique:!0}),e.createObjectStore("documentMutations")}(e),Tw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Wp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Tw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Wp.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:jg});t.createIndex("collectionPathOverlayIndex",Bg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",qg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ng});t.createIndex("documentKeyIndex",Ag),t.createIndex("collectionGroupIndex",Dg)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Mg}).createIndex("sequenceNumberIndex",Fg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Vg}).createIndex("documentKeyIndex",Ug,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=jk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Wp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Wp.forEach(r,(function(r){sp(r.userId===n.userId);var i=ak(t.wt,r);return Uk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new Np(n),o=function(e){return[0,bg(e)]}(a);r.push(t.get(o).next((function(n){return n?Wp.resolve():function(n){return t.put({targetId:0,path:bg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Wp.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Lg});var n=t.store("collectionParents"),r=new Nk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:bg(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Np(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Ig(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=ok(r),a=uk(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Op(Np.fromString(i.document.name).popFirst(5)):i.noDocument?Op.fromSegments(i.noDocument.path):i.unknownDocument?Op.fromSegments(i.unknownDocument.path):up()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Wp.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=aw(this.wt),a=new xw(Iw.Os,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Dy();ak(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Wp.forEach(r,(function(e,r){var o=new Zd(r),u=vk.se(n.wt,o),s=a.getIndexManager(o),c=Bk.se(o,n.wt,s,a.referenceDelegate);return new dw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Qg(t,iv.ot),e).next()}))}))}}]),e}();function Tw(e){e.createObjectStore("targetDocuments",{keyPath:Rg}).createIndex("documentTargetsIndex",Pg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Og,{unique:!0}),e.createObjectStore("targetGlobal")}var Sw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Cw=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(ne(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new fp(lp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tw(this,i),this.ei=n+"main",this.wt=new ek(s),this.ni=new Qp(this.ei,this.Hs,new Ew(this.wt)),this.Vs=new Hk(this.referenceDelegate,this.wt),this.remoteDocumentCache=aw(this.wt),this.Ds=new hk,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&ip("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ie(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fp(lp.FAILED_PRECONDITION,Sw);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new iv(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=He(Je().mark((function n(r){return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=He(Je().mark((function t(n){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Aw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Yp(t))return rp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return rp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return Nw(e).get("owner").next((function(e){return Wp.resolve(t.di(e))}))}},{key:"_i",value:function(e){return Aw(e).delete(this.clientId)}},{key:"wi",value:function(){var e=He(Je().mark((function e(){var t,n,r,i,a=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Jg(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Wp.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=ae(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Wp.resolve(!0):Nw(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new fp(lp.FAILED_PRECONDITION,Sw);return!1}}return!(!t.networkEnabled||!t.inForeground)||Aw(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&rp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=He(Je().mark((function e(){var t=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Qg(e,iv.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Aw(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Bk.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Dk(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return vk.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;rp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?Hg:14===i?Wg:13===i?Gg:12===i?Kg:11===i?zg:void up();return this.ni.runTransaction(e,o,u,(function(i){return a=new Qg(i,r.Ps?r.Ps.next():iv.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw ip("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new fp(lp.FAILED_PRECONDITION,qp);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return Nw(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fp(lp.FAILED_PRECONDITION,Sw)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nw(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=Nw(e);return n.get("owner").next((function(e){return t.di(e)?(rp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Wp.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ip("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return rp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ip("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Xc){ip("Failed to set zombie client id.",Xc)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Xc){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Qp.V()}}]),e}();function Nw(e){return Jg(e,"owner")}function Aw(e){return Jg(e,"clientMetadata")}function Dw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ow=function(){function e(t,n,r,i){ne(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ie(e,null,[{key:"Vi",value:function(t,n){var r,i=Dy(),a=Dy(),o=ae(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Rw=function(){function e(){ne(this,e),this.Si=!1}return ie(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(_m(t))return Wp.resolve(null);var r=Cm(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Nm(t,null,"F"),r=Cm(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Dy.apply(void 0,Ge(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,Nm(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return _m(t)||r.isEqual(Sp.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(np()<=et.DEBUG&&rp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Om(t)),i.Oi(e,o,t,Vp(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new fv(Lm(e));return t.forEach((function(t,r){Rm(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return np()<=et.DEBUG&&rp("QueryEngine","Using full collection scan to execute query:",Om(t)),this.Di.getDocumentsMatchingQuery(e,t,jp.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Pw=function(){function e(t,n,r,i){ne(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new sv(_p),this.Bi=new wy((function(e){return em(e)}),tm),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ie(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Lw(e,t,n,r){return new Pw(e,t,n,r)}function Mw(e,t){return Fw.apply(this,arguments)}function Fw(){return Fw=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Dy(),s=ae(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ae(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ae(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=ae(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Fw.apply(this,arguments)}function Vw(e,t){var n=cp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Wp.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);sp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Dy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Uw(e){var t=cp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function jw(e,t){var n=cp(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(vv.EMPTY_BYTE_STRING,Sp.min()).withLastLimboFreeSnapshotVersion(Sp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=xy(),s=Dy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Bw(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Sp.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Wp.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Bw(e,t,n){var r=Dy(),i=Dy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=xy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Sp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):rp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function qw(e,t){var n=cp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function zw(e,t){var n=cp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Wp.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new Zg(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Kw(e,t,n){return Gw.apply(this,arguments)}function Gw(){return Gw=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cp(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Yp(e.t1)){e.next=12;break}throw e.t1;case 12:rp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Gw.apply(this,arguments)}function Ww(e,t,n){var r=cp(e),i=Sp.min(),a=Dy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=cp(e),i=r.Bi.get(n);return void 0!==i?Wp.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Cm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Sp.min(),n?a:Dy())})).next((function(e){return Jw(r,Pm(t),e),{documents:e,ji:a}}))}))}function Hw(e,t){var n=cp(e),r=cp(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Qw(e,t){var n=cp(e),r=n.Li.get(t)||Sp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Vp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Jw(n,t,e),e}))}function Jw(e,t,n){var r=Sp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function $w(e,t,n,r){return Yw.apply(this,arguments)}function Yw(){return Yw=He(Je().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=cp(t),o=Dy(),u=xy(),s=ae(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,zw(a,function(e){return Cm(xm(Np.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Bw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Xw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=He(Je().mark((function e(t,n){var r,i,a,o=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Dy(),e.next=3,zw(t,Cm(sk(n.bundledQuery)));case 3:return i=e.sent,a=cp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Jy(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(vv.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function eb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var rb=function(){function e(t,n,r,i){ne(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ip("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ib=function(){function e(t,n,r){ne(this,e),this.targetId=t,this.state=n,this.error=r}return ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fp(i.error.code,i.error.message))),a?new e(t,i.state,r):(ip("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ab=function(){function e(t,n){ne(this,e),this.clientId=t,this.activeTargetIds=n}return ie(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ry(),o=0;i&&o<r.activeTargetIds.length;++o)i=Sv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ip("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ob=function(){function e(t,n){ne(this,e),this.clientId=t,this.onlineState=n}return ie(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ip("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ub=function(){function e(){ne(this,e),this.activeTargetIds=Ry()}return ie(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),sb=function(){function e(t,n,r,i,a){ne(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new sv(_p),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=eb(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new ub),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ie(e,[{key:"start",value:function(){var e=He(Je().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=ae(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(eb(this.persistenceKey,i)))&&(o=ab.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=ae(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(nb(this.persistenceKey,e));if(n){var r=ib.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(nb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return rp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){rp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){rp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(rp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void ip("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(He(Je().mark((function e(){var r,i,a,o,u,s,c;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=iv.ot;if(null!=e)try{var n=JSON.parse(e);sp("number"==typeof n),t=n}catch(e){ip("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==iv.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new rb(this.currentUser,e,t,n),i=tb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=tb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=nb(this.persistenceKey,e),i=new ib(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return ab.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rb.Ji(new Zd(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return ib.Ji(r,t)}},{key:"wr",value:function(e){return ob.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:rp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Ry();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),cb=function(){function e(){ne(this,e),this.Fr=new ub,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ie(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new ub,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),lb=function(){function e(){ne(this,e)}return ie(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),fb=function(){function e(){var t=this;ne(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ie(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){rp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ae(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){rp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ae(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),hb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},db=function(){function e(t){ne(this,e),this.jr=t.jr,this.Wr=t.Wr}return ie(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),pb=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ie(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Yd;o.listenOnce(Wd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Gd.NO_ERROR:var t=o.getResponseJson();rp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Gd.TIMEOUT:rp("Connection",'RPC "'+e+'" timed out'),a(new fp(lp.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:var n=o.getStatus();if(rp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(lp).indexOf(t)>=0?t:lp.UNKNOWN}(r.status);a(new fp(u,r.message))}else a(new fp(lp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new fp(lp.UNAVAILABLE,"Connection failed."));break;default:up()}}finally{rp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=zd(),a=Kd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Jd({})),this.uo(o.initMessageHeaders,t,n),Ie()||Se()||_e().indexOf("Electron/")>=0||Ce()||_e().indexOf("MSAppHost/")>=0||Te()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");rp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new db({jr:function(e){l?rp("Connection","Not sending because WebChannel is closed:",e):(c||(rp("Connection","Opening WebChannel transport."),s.open(),c=!0),rp("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,$d.EventType.OPEN,(function(){l||rp("Connection","WebChannel transport opened.")})),h(s,$d.EventType.CLOSE,(function(){l||(l=!0,rp("Connection","WebChannel transport closed"),f.eo())})),h(s,$d.EventType.ERROR,(function(e){l||(l=!0,ap("Connection","WebChannel transport errored:",e),f.eo(new fp(lp.UNAVAILABLE,"The operation could not be completed")))})),h(s,$d.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];sp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){rp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=dy[e];if(void 0!==t)return ky(t)}(a),u=i.message;void 0===o&&(o=lp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new fp(o,u)),s.close()}else rp("Connection","WebChannel received:",n),f.no(n)}})),h(a,Hd.STAT_EVENT,(function(e){e.stat===Qd.PROXY?rp("Connection","Detected buffering proxy"):e.stat===Qd.NOPROXY&&rp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){ne(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ie(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);rp("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return rp("RestConnection","Received: ",e),e}),(function(t){throw ap("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ep,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=hb[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function vb(){return"undefined"!=typeof window?window:null}function mb(){return"undefined"!=typeof document?document:null}function yb(e){return new Gy(e,!0)}var gb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ne(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ie(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&rp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),kb=function(){function e(t,n,r,i,a,o,u,s){ne(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new gb(t,n)}return ie(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===lp.RESOURCE_EXHAUSTED?(ip(n.toString()),ip("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===lp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new fp(lp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return rp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(rp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),wb=function(e){se(n,e);var t=de(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return ie(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:up()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(sp(void 0===t||"string"==typeof t),vv.fromBase64String(t||"")):(sp(void 0===t||t instanceof Uint8Array),vv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?lp.UNKNOWN:ky(e.code);return new fp(t,e.message||"")}(o);n=new Vy(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Zy(e,s.document.name),l=Jy(s.document.updateTime),f=new Jv({mapValue:{fields:s.document.fields}}),h=Yv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new My(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Zy(e,v.document),y=v.readTime?Jy(v.readTime):Sp.min(),g=Yv.newNoDocument(m,y),k=v.removedTargetIds||[];n=new My([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Zy(e,w.document),x=w.removedTargetIds||[];n=new My([],x,b,null)}else{if(!("filter"in t))return up();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new yy(I),T=_.targetId;n=new Fy(T,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Sp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Sp.min():t.readTime?Jy(t.readTime):Sp.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=ng(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=nm(r)?{documents:cg(e,r)}:{query:lg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Hy(e,t.resumeToken):t.snapshotVersion.compareTo(Sp.min())>0&&(n.readTime=Wy(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return up()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=ng(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(kb),bb=function(e){se(n,e);var t=de(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return ie(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,In(ce(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(sp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(sp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Jy(e.updateTime):Jy(t);return n.isEqual(Sp.min())&&(n=Jy(t)),new Zm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Jy(e.commitTime);return this.listener.Jo(n,t)}return sp(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=ng(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ug(t.wt,e)}))};this.Oo(n)}}]),n}(kb),xb=function(e){se(n,e);var t=de(n);function n(e,r,i,a){var o;return ne(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return ie(n,[{key:"tu",value:function(){if(this.Zo)throw new fp(lp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fp(lp.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.bo.ao(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fp(lp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ie((function e(){ne(this,e)}))}()),_b=function(){function e(t,n){ne(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ie(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(ip(t),this.su=!1):rp("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Ib=ie((function e(t,n,r,i,a){var o=this;ne(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Lb(o),!e.t0){e.next=5;break}return rp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cp(t)).lu.add(4),e.next=4,Sb(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,Eb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new _b(r,i)}));function Eb(e){return Tb.apply(this,arguments)}function Tb(){return Tb=He(Je().mark((function e(t){var n,r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Lb(t)){e.next=18;break}n=ae(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Tb.apply(this,arguments)}function Sb(e){return Cb.apply(this,arguments)}function Cb(){return Cb=He(Je().mark((function e(t){var n,r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ae(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Cb.apply(this,arguments)}function Nb(e,t){var n=cp(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Pb(n)?Rb(n):lx(n).Co()&&Db(n,t))}function Ab(e,t){var n=cp(e),r=lx(n);n.hu.delete(t),r.Co()&&Ob(n,t),0===n.hu.size&&(r.Co()?r.ko():Lb(n)&&n._u.set("Unknown"))}function Db(e,t){e.wu.Nt(t.targetId),lx(e).Qo(t)}function Ob(e,t){e.wu.Nt(t),lx(e).jo(t)}function Rb(e){e.wu=new jy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),lx(e).start(),e._u.iu()}function Pb(e){return Lb(e)&&!lx(e).Do()&&e.hu.size>0}function Lb(e){return 0===cp(e).lu.size}function Mb(e){e.wu=void 0}function Fb(e){return Vb.apply(this,arguments)}function Vb(){return Vb=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Db(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function Ub(e,t){return jb.apply(this,arguments)}function jb(){return jb=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Mb(t),Pb(t)?(t._u.uu(n),Rb(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}function Bb(e,t,n){return qb.apply(this,arguments)}function qb(){return qb=He(Je().mark((function e(t,n,r){var i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Vy&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=He(Je().mark((function e(t,n){var r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ae(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),rp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,zb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof My?t.wu.Ut(n):n instanceof Fy?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Sp.min())){e.next=29;break}return e.prev=14,e.next=17,Uw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(vv.EMPTY_BYTE_STRING,n.snapshotVersion)),Ob(e,t);var r=new Zg(n.target,t,1,n.sequenceNumber);Db(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),rp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,zb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),qb.apply(this,arguments)}function zb(e,t,n){return Kb.apply(this,arguments)}function Kb(){return Kb=He(Je().mark((function e(t,n,r){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yp(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Sb(t);case 5:t._u.set("Offline"),r||(r=function(){return Uw(t.localStore)}),t.asyncQueue.enqueueRetryable(He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,Eb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Kb.apply(this,arguments)}function Gb(e,t){return t().catch((function(n){return zb(e,n,t)}))}function Wb(e){return Hb.apply(this,arguments)}function Hb(){return Hb=He(Je().mark((function e(t){var n,r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cp(t),r=fx(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Qb(n)){e.next=19;break}return e.prev=3,e.next=6,qw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Jb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,zb(n,e.t0);case 17:e.next=2;break;case 19:$b(n)&&Yb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Hb.apply(this,arguments)}function Qb(e){return Lb(e)&&e.au.length<10}function Jb(e,t){e.au.push(t);var n=fx(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function $b(e){return Lb(e)&&!fx(e).Do()&&e.au.length>0}function Yb(e){fx(e).start()}function Xb(e){return Zb.apply(this,arguments)}function Zb(){return Zb=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fx(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function ex(e){return tx.apply(this,arguments)}function tx(){return tx=He(Je().mark((function e(t){var n,r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fx(t),r=ae(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function nx(e,t,n){return rx.apply(this,arguments)}function rx(){return rx=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=Yg.from(i,n,r),e.next=3,Gb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Wb(t);case 5:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ix(e,t){return ax.apply(this,arguments)}function ax(){return ax=He(Je().mark((function e(t,n){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&fx(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gy(i=n.code)||i===lp.ABORTED){e.next=7;break}return r=t.au.shift(),fx(t).No(),e.next=5,Gb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Wb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:$b(t)&&Yb(t);case 5:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}function ox(e,t){return ux.apply(this,arguments)}function ux(){return ux=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=cp(t)).asyncQueue.verifyOperationInProgress(),rp("RemoteStore","RemoteStore received new credentials"),i=Lb(r),r.lu.add(3),e.next=6,Sb(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,Eb(r);case 12:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,Eb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Sb(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(e){return e.mu||(e.mu=function(e,t,n){var r=cp(e);return r.tu(),new wb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Fb.bind(null,e),Jr:Ub.bind(null,e),Go:Bb.bind(null,e)}),e.fu.push(function(){var t=He(Je().mark((function t(n){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Pb(e)?Rb(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Mb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function fx(e){return e.gu||(e.gu=function(e,t,n){var r=cp(e);return r.tu(),new bb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Xb.bind(null,e),Jr:ix.bind(null,e),Yo:ex.bind(null,e),Jo:nx.bind(null,e)}),e.fu.push(function(){var t=He(Je().mark((function t(n){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Wb(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(rp("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var hx=function(){function e(t,n,r,i,a){ne(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ie(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fp(lp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function dx(e,t){if(ip("AsyncQueue","".concat(t,": ").concat(e)),Yp(e))return new fp(lp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var px=function(){function e(t){ne(this,e),this.comparator=t?function(e,n){return t(e,n)||Op.comparator(e.key,n.key)}:function(e,t){return Op.comparator(e.key,t.key)},this.keyedMap=Iy(),this.sortedSet=new sv(this.comparator)}return ie(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),vx=function(){function e(){ne(this,e),this.yu=new sv(Op.comparator)}return ie(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):up():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),mx=function(){function e(t,n,r,i,a,o,u,s){ne(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ie(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,px.emptySet(n),a,r,i,!0,!1)}}]),e}(),yx=ie((function e(){ne(this,e),this.Iu=void 0,this.listeners=[]})),gx=ie((function e(){ne(this,e),this.queries=new wy((function(e){return Dm(e)}),Am),this.onlineState="Unknown",this.Tu=new Set}));function kx(e,t){return wx.apply(this,arguments)}function wx(){return wx=He(Je().mark((function e(t,n){var r,i,a,o,u;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new yx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=dx(e.t0,"Initialization of query '".concat(Om(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&Ex(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),wx.apply(this,arguments)}function bx(e,t){return xx.apply(this,arguments)}function xx(){return xx=He(Je().mark((function e(t,n){var r,i,a,o,u;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function _x(e,t){var n,r=cp(e),i=!1,a=ae(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ae(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Ex(r)}function Ix(e,t,n){var r=cp(e),i=r.queries.get(t);if(i){var a,o=ae(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Ex(e){e.Tu.forEach((function(e){e.next()}))}var Tx=function(){function e(t,n,r){ne(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ie(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ae(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new mx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=mx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),Sx=function(){function e(t,n){ne(this,e),this.payload=t,this.byteLength=n}return ie(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),Cx=function(){function e(t){ne(this,e),this.wt=t}return ie(e,[{key:"Wi",value:function(e){return Zy(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?ag(this.wt,e.document,!1):Yv.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Jy(e)}}]),e}(),Nx=function(){function e(t,n,r){ne(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ax(t)}return ie(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Np.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new Cx(this.wt),i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=ae(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Dy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=He(Je().mark((function e(){var t,n,r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$w(this.localStore,new Cx(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=ae(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Xw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ax(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Dx=ie((function e(t){ne(this,e),this.key=t})),Ox=ie((function e(t){ne(this,e),this.key=t})),Rx=function(){function e(t,n){ne(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Dy(),this.mutatedKeys=Dy(),this.Lu=Lm(t),this.Uu=new px(this.Lu)}return ie(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new vx,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Rm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Mi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return up()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new mx(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new vx,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Dy(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Ox(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new Dx(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Dy();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return mx.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Px=ie((function e(t,n,r){ne(this,e),this.query=t,this.targetId=n,this.view=r})),Lx=ie((function e(t){ne(this,e),this.key=t,this.Xu=!1})),Mx=function(){function e(t,n,r,i,a,o){ne(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new wy((function(e){return Dm(e)}),Am),this.ec=new Map,this.nc=new Set,this.sc=new sv(Op.comparator),this.ic=new Map,this.rc=new mw,this.oc={},this.uc=new Map,this.cc=Wk.Rn(),this.onlineState="Unknown",this.ac=void 0}return ie(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function Fx(e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=He(Je().mark((function e(t,n){var r,i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=A_(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,zw(r.localStore,Cm(n));case 8:return u=e.sent,r.isPrimaryClient&&Nb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ux(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Vx.apply(this,arguments)}function Ux(e,t,n,r){return jx.apply(this,arguments)}function jx(){return jx=He(Je().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=He(Je().mark((function e(t,n,r,i){var a,o,u;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Ww(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(o_(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ww(t.localStore,n,!0);case 3:return a=e.sent,o=new Rx(n,a.ji),u=o.Ku(a.documents),s=Ly.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),o_(t,r,c.zu),l=new Px(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Bx(e,t){return qx.apply(this,arguments)}function qx(){return qx=He(Je().mark((function e(t,n){var r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Am(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Kw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ab(r.remoteStore,i.targetId),i_(r,i.targetId)})).catch(Kp);case 9:e.next=14;break;case 11:return i_(r,i.targetId),e.next=14,Kw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function zx(e,t,n){return Kx.apply(this,arguments)}function Kx(){return Kx=He(Je().mark((function e(t,n,r){var i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=D_(t),e.prev=1,e.next=4,function(e,t){var n,r,i=cp(e),a=Tp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Dy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=xy(),s=Dy();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=ae(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=oy(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new cy(c.key,l,$v(l.value.mapValue),ey.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Ey(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new sv(_p)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,c_(i,a.changes);case 9:return e.next=11,Wb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=dx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Kx.apply(this,arguments)}function Gx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.prev=1,e.next=4,jw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(sp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?sp(n.Xu):e.removedDocuments.size>0&&(sp(n.Xu),n.Xu=!1))})),e.next=8,c_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Kp(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Wx.apply(this,arguments)}function Hx(e,t,n){var r=cp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=cp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ae(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Ex(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Qx(e,t,n){return Jx.apply(this,arguments)}function Jx(){return Jx=He(Je().mark((function e(t,n,r){var i,a,o,u,s,c;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=cp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new sv(Op.comparator)).insert(o,Yv.newNoDocument(o,Sp.min())),s=Dy().add(o),c=new Py(Sp.min(),new Map,new fv(_p),u,s),e.next=9,Gx(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),s_(i),e.next=16;break;case 14:return e.next=16,Kw(i.localStore,n,!1).then((function(){return i_(i,n,r)})).catch(Kp);case 16:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}function $x(e,t){return Yx.apply(this,arguments)}function Yx(){return Yx=He(Je().mark((function e(t,n){var r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),i=n.batch.batchId,e.prev=1,e.next=4,Vw(r.localStore,n);case 4:return a=e.sent,r_(r,i,null),n_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,c_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Yx.apply(this,arguments)}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cp(t),e.prev=1,e.next=4,function(e,t){var n=cp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return sp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,r_(i,n,r),n_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,c_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Zx.apply(this,arguments)}function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=He(Je().mark((function e(t,n){var r,i,a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lb((r=cp(t)).remoteStore)||rp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=cp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=dx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),t_.apply(this,arguments)}function n_(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function r_(e,t,n){var r=cp(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function i_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ae(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||a_(e,t)}))}function a_(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(Ab(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),s_(e))}function o_(e,t,n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Dx?(e.rc.addReference(a.key,t),u_(e,a)):a instanceof Ox?(rp("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||a_(e,a.key)):up()}}catch(o){i.e(o)}finally{i.f()}}function u_(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(rp("SyncEngine","New document in limbo: "+n),e.nc.add(r),s_(e))}function s_(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Op(Np.fromString(t)),r=e.cc.next();e.ic.set(r,new Lx(n)),e.sc=e.sc.insert(n,r),Nb(e.remoteStore,new Zg(Cm(xm(n.path)),r,2,iv.ot))}}function c_(e,t,n){return l_.apply(this,arguments)}function l_(){return l_=He(Je().mark((function e(t,n,r){var i,a,o,u;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cp(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ow.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=He(Je().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Wp.forEach(n,(function(t){return Wp.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Wp.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Yp(e.t0)){e.next=10;break}throw e.t0;case 10:rp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ae(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t){return h_.apply(this,arguments)}function h_(){return h_=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=cp(t)).currentUser.isEqual(n)){e.next=11;break}return rp("SyncEngine","User change. New user:",n.toKey()),e.next=5,Mw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new fp(lp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,c_(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(e,t){var n=cp(e),r=n.ic.get(t);if(r&&r.Xu)return Dy().add(r.key);var i=Dy(),a=n.ec.get(t);if(!a)return i;var o,u=ae(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function p_(e,t){return v_.apply(this,arguments)}function v_(){return v_=He(Je().mark((function e(t,n){var r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.next=3,Ww(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&o_(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function m_(e,t){return y_.apply(this,arguments)}function y_(){return y_=He(Je().mark((function e(t,n){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.abrupt("return",Qw(r.localStore,n).then((function(e){return c_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function g_(e,t,n,r){return k_.apply(this,arguments)}function k_(){return k_=He(Je().mark((function e(t,n,r,i){var a,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cp(t),e.next=3,function(e,t){var n=cp(e),r=cp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Wp.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Wb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(r_(a,n,i||null),n_(a,n),function(e,t){cp(cp(e).mutationQueue).In(t)}(a.localStore,n)):up();case 11:return e.next=13,c_(a,o);case 13:e.next=16;break;case 15:rp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function w_(e,t){return b_.apply(this,arguments)}function b_(){return b_=He(Je().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A_(r=cp(t)),D_(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,x_(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,sx(r.remoteStore,!0);case 9:o=ae(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Nb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return i_(r,t),Kw(r.localStore,t,!0)})),Ab(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,x_(r,c);case 21:return function(e){var t=cp(e);t.ic.forEach((function(e,n){Ab(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new sv(Op.comparator)}(r),r.ac=!1,e.next=25,sx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}function x_(e,t,n){return __.apply(this,arguments)}function __(){return __=He(Je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=cp(t),a=[],o=[],u=ae(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,zw(i.localStore,Cm(f[0]));case 11:l=e.sent,h=ae(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,p_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Hw(i.localStore,c);case 36:return y=e.sent,e.next=39,zw(i.localStore,y);case 39:return l=e.sent,e.next=42,Ux(i,I_(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),__.apply(this,arguments)}function I_(e){return bm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function E_(e){var t=cp(e);return cp(cp(t.localStore).persistence).Ri()}function T_(e,t,n,r){return S_.apply(this,arguments)}function S_(){return S_=He(Je().mark((function e(t,n,r,i){var a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=cp(t)).ac){e.next=3;break}return e.abrupt("return",void rp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Qw(a.localStore,Pm(o[0]));case 10:return u=e.sent,s=Py.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,c_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Kw(a.localStore,n,!0);case 17:return i_(a,n,i),e.abrupt("break",20);case 19:up();case 20:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}function C_(e,t,n){return N_.apply(this,arguments)}function N_(){return N_=He(Je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=A_(t)).ac){e.next=45;break}a=ae(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return rp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Hw(i.localStore,u);case 12:return s=e.sent,e.next=15,zw(i.localStore,s);case 15:return c=e.sent,e.next=18,Ux(i,I_(s),c.targetId,!1);case 18:Nb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ae(r),e.prev=30,h=Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Kw(i.localStore,t,!1).then((function(){Ab(i.remoteStore,t),i_(i,t)})).catch(Kp);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),N_.apply(this,arguments)}function A_(e){var t=cp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=d_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qx.bind(null,t),t.Zu.Go=_x.bind(null,t.eventManager),t.Zu.lc=Ix.bind(null,t.eventManager),t}function D_(e){var t=cp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$x.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xx.bind(null,t),t}function O_(e,t,n){var r=cp(e);(function(){var e=He(Je().mark((function e(t,n,r){var i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=cp(e),r=Jy(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Ax(i)),a=new Nx(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,c_(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=cp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ap("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var R_=function(){function e(){ne(this,e),this.synchronizeTabs=!1}return ie(e,[{key:"initialize",value:function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=yb(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Lw(this.persistence,new Rw,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new xw(Iw.Os,this.wt)}},{key:"dc",value:function(e){return new cb}},{key:"terminate",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P_=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ie(n,[{key:"initialize",value:function(){var e=He(Je().mark((function e(t){var r=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(ce(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,D_(this.yc.syncEngine);case 6:return e.next=8,Wb(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Lw(this.persistence,new Rw,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Zk(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new rv(t,this.persistence);return new nv(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=Dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vk.withCacheSize(this.cacheSizeBytes):Vk.DEFAULT;return new Cw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vb(),mb(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new cb}}]),n}(R_),L_=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ie(n,[{key:"initialize",value:function(){var e=He(Je().mark((function e(t){var r,i=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(ce(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof sb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:g_.bind(null,r),Mr:T_.bind(null,r),Or:C_.bind(null,r),Ri:E_.bind(null,r),Nr:m_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w_(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=vb();if(!sb.V(t))throw new fp(lp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(P_),M_=function(){function e(){ne(this,e)}return ie(e,[{key:"initialize",value:function(){var e=He(Je().mark((function e(t,n){var r=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Hx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=f_.bind(null,this.syncEngine),e.next=12,sx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new gx}},{key:"createDatastore",value:function(e){var t,n=yb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new pb(t));return function(e,t,n,r){return new xb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Hx(o.syncEngine,e,0)},a=fb.V()?new fb:new lb,new Ib(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Mx(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cp(t),rp("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Sb(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function F_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return He(Je().mark((function r(){var i;return Je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var V_=function(){function e(t){ne(this,e),this.observer=t,this.muted=!1}return ie(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):ip("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),U_=function(){function e(t,n){var r=this;ne(this,e),this.Ec=t,this.wt=n,this.metadata=new hp,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ie(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=He(Je().mark((function e(){var t,n,r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Sx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=He(Je().mark((function e(){var t,n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=He(Je().mark((function e(){var t,n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),j_=function(){function e(t){ne(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ie(e,[{key:"lookup",value:function(){var e=He(Je().mark((function e(t){var n,r=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fp(lp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=He(Je().mark((function e(t,n){var r,i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),i=ng(r.wt)+"/documents",a={documents:n.map((function(e){return Xy(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=og(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());sp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new vy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=He(Je().mark((function e(){var t,n=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Op.fromPath(t);n.mutations.push(new my(r,n.precondition(r)))})),e.next=7,function(){var e=He(Je().mark((function e(t,n){var r,i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),i=ng(r.wt)+"/documents",a={writes:n.map((function(e){return ug(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw up();t=Sp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fp(lp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ey.updateTime(t):ey.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Sp.min()))throw new fp(lp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ey.updateTime(t)}return ey.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),B_=function(){function e(t,n,r,i,a){ne(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new gb(this.asyncQueue,"transaction_retry")}return ie(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(He(Je().mark((function t(){var n,r;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new j_(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!Ev(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!gy(t)}return!1}}]),e}(),q_=function(){function e(t,n,r,i){var a=this;ne(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zd.UNAUTHENTICATED,this.clientId=xp.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return rp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ie(e,[{key:"getConfiguration",value:function(){var e=He(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fp(lp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(He(Je().mark((function n(){var r;return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=dx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function z_(e,t){return K_.apply(this,arguments)}function K_(){return K_=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),rp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Mw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e,t){return W_.apply(this,arguments)}function W_(){return W_=He(Je().mark((function e(t,n){var r,i;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,H_(t);case 3:return r=e.sent,rp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return ox(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return ox(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function H_(e){return Q_.apply(this,arguments)}function Q_(){return Q_=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return rp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,z_(t,new R_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function J_(e){return $_.apply(this,arguments)}function $_(){return $_=He(Je().mark((function e(t){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return rp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,G_(t,new M_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),$_.apply(this,arguments)}function Y_(e){return H_(e).then((function(e){return e.persistence}))}function X_(e){return H_(e).then((function(e){return e.localStore}))}function Z_(e){return J_(e).then((function(e){return e.remoteStore}))}function eI(e){return J_(e).then((function(e){return e.syncEngine}))}function tI(e){return nI.apply(this,arguments)}function nI(){return nI=He(Je().mark((function e(t){var n,r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Fx.bind(null,n.syncEngine),r.onUnlisten=Bx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hp;return e.asyncQueue.enqueueAndForget(He(Je().mark((function i(){return Je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new V_({next:function(a){t.enqueueAndForget((function(){return bx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new fp(lp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new fp(lp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Tx(xm(n.path),a,{includeMetadataChanges:!0,Du:!0});return kx(e,o)},i.next=3,tI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function iI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hp;return e.asyncQueue.enqueueAndForget(He(Je().mark((function i(){return Je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new V_({next:function(n){t.enqueueAndForget((function(){return bx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fp(lp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Tx(n,a,{includeMetadataChanges:!0,Du:!0});return kx(e,o)},i.next=3,tI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var aI=new Map;function oI(e,t,n){if(!n)throw new fp(lp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uI(e,t,n,r){if(!0===t&&!0===r)throw new fp(lp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function sI(e){if(!Op.isDocumentKey(e))throw new fp(lp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function cI(e){if(Op.isDocumentKey(e))throw new fp(lp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function lI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":up()}function fI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fp(lp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lI(e);throw new fp(lp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function hI(e,t){if(t<=0)throw new fp(lp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var dI=function(){function e(t){var n;if(ne(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fp(lp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fp(lp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,uI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ie(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),pI=function(){function e(t,n,r){ne(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dI({}),this._settingsFrozen=!1,t instanceof Iv?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fp(lp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iv(e.options.projectId)}(t))}return ie(e,[{key:"app",get:function(){if(!this._app)throw new fp(lp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fp(lp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pp;switch(e.type){case"gapi":var t=e.client;return sp(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new gp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new fp(lp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=aI.get(e);t&&(rp("ComponentProvider","Removing Datastore"),aI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function vI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=fI(e,pI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ap("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Zd.MOCK_USER;else{o=xe(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new fp(lp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Zd(s)}e._authCredentials=new vp(new dp(o,u))}}var mI=function(){function e(t,n,r){ne(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ie(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new gI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),yI=function(){function e(t,n,r){ne(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ie(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),gI=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,xm(i)))._path=i,a.type="collection",a}return ie(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new mI(this.firestore,null,new Op(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(yI);function kI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ze(e),oI("collection","path",t),e instanceof pI){var a=Np.fromString.apply(Np,[t].concat(r));return cI(a),new gI(e,null,a)}if(!(e instanceof mI||e instanceof gI))throw new fp(lp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Np.fromString.apply(Np,[t].concat(r)));return cI(o),new gI(e.firestore,null,o)}function wI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ze(e),1===arguments.length&&(t=xp.I()),oI("doc","path",t),e instanceof pI){var a=Np.fromString.apply(Np,[t].concat(r));return sI(a),new mI(e,null,new Op(a))}if(!(e instanceof mI||e instanceof gI))throw new fp(lp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Np.fromString.apply(Np,[t].concat(r)));return sI(o),new mI(e.firestore,e instanceof gI?e.converter:null,new Op(o))}function bI(e,t){return e=ze(e),t=ze(t),(e instanceof mI||e instanceof gI)&&(t instanceof mI||t instanceof gI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function xI(e,t){return e=ze(e),t=ze(t),e instanceof yI&&t instanceof yI&&e.firestore===t.firestore&&Am(e._query,t._query)&&e.converter===t.converter}var _I=function(){function e(){var t=this;ne(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new gb(this,"async_queue_retry"),this.Kc=function(){var e=mb();e&&rp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=mb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ie(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=mb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new hp;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=He(Je().mark((function e(){var t=this;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Yp(e.t0)){e.next=12;break}throw e.t0;case 12:rp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ip("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=hx.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&up()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=He(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=ae(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ae(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function II(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ae(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var EI=function(){function e(){ne(this,e),this._progressObserver={},this._taskCompletionResolver=new hp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ie(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),TI=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new _I,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ie(n,[{key:"_terminate",value:function(){return this._firestoreClient||CI(this),this._firestoreClient.terminate()}}]),n}(pI);function SI(e){return e._firestoreClient||CI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function CI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new _v(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new q_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function NI(e,t,n){var r=new hp;return e.asyncQueue.enqueue(He(Je().mark((function i(){var a;return Je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,z_(e,n);case 3:return i.next=5,G_(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===lp.FAILED_PRECONDITION||e.code===lp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:ap("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function AI(e){return function(e){return e.asyncQueue.enqueue(He(Je().mark((function t(){var n,r;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y_(e);case 2:return n=t.sent,t.next=5,Z_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=cp(e);return t.lu.delete(0),Eb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(SI(e=fI(e,TI)))}function DI(e){return function(e){return e.asyncQueue.enqueue(He(Je().mark((function t(){var n,r;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y_(e);case 2:return n=t.sent,t.next=5,Z_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cp(t)).lu.add(0),e.next=4,Sb(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(SI(e=fI(e,TI)))}function OI(e,t){var n=SI(e=fI(e,TI)),r=new EI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new U_(e,t)}(function(e,t){if(e instanceof Uint8Array)return F_(e,t);if(e instanceof ArrayBuffer)return F_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,yb(t));e.asyncQueue.enqueueAndForget(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=O_,t.next=3,eI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function RI(e,t){return function(e,t){return e.asyncQueue.enqueue(He(Je().mark((function n(){return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=cp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,X_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(SI(e=fI(e,TI)),t).then((function(t){return t?new yI(e,null,t.query):null}))}function PI(e){if(e._initialized||e._terminated)throw new fp(lp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var LI=function(){function e(){ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fp(lp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dp(n)}return ie(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var MI=function(){function e(t){ne(this,e),this._byteString=t}return ie(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(vv.fromBase64String(t))}catch(t){throw new fp(lp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(vv.fromUint8Array(t))}}]),e}(),FI=ie((function e(t){ne(this,e),this._methodName=t})),VI=function(){function e(t,n){if(ne(this,e),!isFinite(t)||t<-90||t>90)throw new fp(lp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fp(lp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ie(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return _p(this._lat,e._lat)||_p(this._long,e._long)}}]),e}(),UI=/^__.*__$/,jI=function(){function e(t,n,r){ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ie(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new cy(e,this.data,this.fieldMask,t,this.fieldTransforms):new sy(e,this.data,t,this.fieldTransforms)}}]),e}(),BI=function(){function e(t,n,r){ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ie(e,[{key:"toMutation",value:function(e,t){return new cy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function qI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw up()}}var zI=function(){function e(t,n,r,i,a,o){ne(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ie(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return cE(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(qI(this.Zc)&&UI.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),KI=function(){function e(t,n,r){ne(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||yb(t)}return ie(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new zI({Zc:e,methodName:t,ca:n,path:Dp.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function GI(e){var t=e._freezeSettings(),n=yb(e._databaseId);return new KI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function WI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);aE("Data must be an object, but it was:",o,r);var u,s,c=rE(r,o);if(a.merge)u=new pv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ae(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=oE(t,d,n);if(!o.contains(p))throw new fp(lp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));lE(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new pv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new jI(new Jv(c),u,s)}var HI=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(FI);function QI(e,t,n){return new zI({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var JI=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"_toFieldTransform",value:function(e){return new Xm(e.path,new Km)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(FI),$I=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).ha=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=QI(this,e,!0),n=this.ha.map((function(e){return nE(e,t)})),r=new Gm(n);return new Xm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(FI),YI=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).ha=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=QI(this,e,!0),n=this.ha.map((function(e){return nE(e,t)})),r=new Hm(n);return new Xm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(FI),XI=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).la=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=new Jm(e.wt,Um(e.wt,this.la));return new Xm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(FI);function ZI(e,t,n,r){var i=e.aa(1,t,n);aE("Data must be an object, but it was:",i,r);var a=[],o=Jv.empty();ov(r,(function(e,r){var u=sE(t,e,n);r=ze(r);var s=i.ia(u);if(r instanceof HI)a.push(u);else{var c=nE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new pv(a);return new BI(o,u,i.fieldTransforms)}function eE(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[oE(t,r,n)],s=[i];if(a.length%2!=0)throw new fp(lp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(oE(t,a[c])),s.push(a[c+1]);for(var l=[],f=Jv.empty(),h=u.length-1;h>=0;--h)if(!lE(l,u[h])){var d=u[h],p=s[h];p=ze(p);var v=o.ia(d);if(p instanceof HI)l.push(d);else{var m=nE(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new pv(l);return new BI(f,y,o.fieldTransforms)}function tE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return nE(n,e.aa(r?4:3,t))}function nE(e,t){if(iE(e=ze(e)))return aE("Unsupported field value:",t,e),rE(e,t);if(e instanceof FI)return function(e,t){if(!qI(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ae(e);try{for(a.s();!(n=a.n()).done;){var o=nE(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ze(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Um(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Tp.fromDate(e);return{timestampValue:Wy(t.wt,n)}}if(e instanceof Tp){var r=new Tp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wy(t.wt,r)}}if(e instanceof VI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof MI)return{bytesValue:Hy(t.wt,e._byteString)};if(e instanceof mI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:$y(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(lI(e)))}(e,t)}function rE(e,t){var n={};return uv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ov(e,(function(e,r){var i=nE(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function iE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tp||e instanceof VI||e instanceof MI||e instanceof mI||e instanceof FI)}function aE(e,t,n){if(!iE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=lI(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function oE(e,t,n){if((t=ze(t))instanceof LI)return t._internalPath;if("string"==typeof t)return sE(e,t);throw cE("Field path arguments must be of type string or ",e,!1,void 0,n)}var uE=new RegExp("[~\\*/\\[\\]]");function sE(e,t,n){if(t.search(uE)>=0)throw cE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return pe(LI,Ge(t.split(".")))._internalPath}catch(r){throw cE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function cE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new fp(lp.INVALID_ARGUMENT,u+e+s)}function lE(e,t){return e.some((function(e){return e.isEqual(t)}))}var fE=function(){function e(t,n,r,i,a){ne(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ie(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new mI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new hE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(dE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),hE=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(){return In(ce(n.prototype),"data",this).call(this)}}]),n}(fE);function dE(e,t){return"string"==typeof t?sE(e,t):t instanceof LI?t._internalPath:t._delegate._internalPath}var pE=function(){function e(t,n){ne(this,e),this.hasPendingWrites=t,this.fromCache=n}return ie(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),vE=function(e){se(n,e);var t=de(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ie(n,[{key:"exists",value:function(){return In(ce(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new mE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(dE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(fE),mE=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return In(ce(n.prototype),"data",this).call(this,e)}}]),n}(vE),yE=function(){function e(t,n,r,i){ne(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new pE(i.hasPendingWrites,i.fromCache),this.query=r}return ie(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new mE(n._firestore,n._userDataWriter,r.key,r,new pE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fp(lp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new mE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new mE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:gE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function gE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return up()}}function kE(e,t){return e instanceof vE&&t instanceof vE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yE&&t instanceof yE&&e._firestore===t._firestore&&xI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function wE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fp(lp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bE=ie((function e(){ne(this,e)}));function xE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var _E=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return ie(n,[{key:"_apply",value:function(e){var t=GI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fp(lp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){PE(o,a);var s,c=[],l=ae(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(RE(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=RE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||PE(o,a),u=tE(n,"where",o,"in"===a||"not-in"===a);var h=om.create(i,a,u);return function(e,t){if(t.ht()){var n=Em(e);if(null!==n&&!n.isEqual(t.field))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Im(e);null!==r&&LE(e,t.field,r)}var i=function(e,t){var n,r=ae(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new fp(lp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fp(lp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new yI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new wm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(bE);var IE=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ie(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new mm(t,n);return function(e,t){if(null===Im(e)){var n=Em(e);null!==n&&LE(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new yI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new wm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(bE);var EE=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return ie(n,[{key:"_apply",value:function(e){return new yI(e.firestore,e.converter,Nm(e._query,this.ma,this.ga))}}]),n}(bE);var TE=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ie(n,[{key:"_apply",value:function(e){var t=OE(e,this.type,this.ya,this.pa);return new yI(e.firestore,e.converter,function(e,t){return new wm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(bE);function SE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new TE("startAt",t,!0)}function CE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new TE("startAfter",t,!1)}var NE=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ie(n,[{key:"_apply",value:function(e){var t=OE(e,this.type,this.ya,this.pa);return new yI(e.firestore,e.converter,function(e,t){return new wm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(bE);function AE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new NE("endBefore",t,!1)}function DE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new NE("endAt",t,!0)}function OE(e,t,n,r){if(n[0]=ze(n[0]),n[0]instanceof fE)return function(e,t,n,r,i){if(!r)throw new fp(lp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ae(Sm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Fv(t,r.key));else{var c=r.data.field(s.field);if(wv(c))throw new fp(lp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new vm(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=GI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fp(lp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Tm(e)&&-1!==c.indexOf("/"))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Np.fromString(c));if(!Op.isDocumentKey(l))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Op(l);u.push(Fv(t,f))}else{var h=tE(n,r,c);u.push(h)}}return new vm(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function RE(e,t,n){if("string"==typeof(n=ze(n))){if(""===n)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tm(t)&&-1!==n.indexOf("/"))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Np.fromString(n));if(!Op.isDocumentKey(r))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fv(e,new Op(r))}if(n instanceof mI)return Fv(e,n._key);throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(lI(n),"."))}function PE(e,t){if(!Array.isArray(e)||0===e.length)throw new fp(lp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new fp(lp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function LE(e,t,n){if(!n.isEqual(t))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var ME={maxAttempts:5},FE=function(){function e(){ne(this,e)}return ie(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Av(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw up()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ov(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new VI(gv(e.latitude),gv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=bv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=yv(e);return new Tp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Np.fromString(e);sp(wg(n));var r=new Iv(n.get(1),n.get(3)),i=new Op(n.popFirst(5));return r.isEqual(t)||ip("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function VE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var UE=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new MI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new mI(this.firestore,null,t)}}]),n}(FE),jE=function(){function e(t,n){ne(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=GI(t)}return ie(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=BE(e,this._firestore),i=VE(r.converter,t,n),a=WI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ey.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=BE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ze(t))||t instanceof LI?eE(this._dataReader,"WriteBatch.update",i._key,t,n,o):ZI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ey.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=BE(e,this._firestore);return this._mutations=this._mutations.concat(new vy(t._key,ey.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fp(lp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function BE(e,t){if((e=ze(e)).firestore!==t)throw new fp(lp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var qE=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new MI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new mI(this.firestore,null,t)}}]),n}(FE);function zE(e){e=fI(e,mI);var t=fI(e.firestore,TI),n=SI(t),r=new qE(t);return function(e,t){var n=new hp;return e.asyncQueue.enqueueAndForget(He(Je().mark((function r(){return Je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=He(Je().mark((function e(t,n,r){var i,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=cp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fp(lp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=dx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,X_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new vE(t,r,e._key,n,new pE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function KE(e){e=fI(e,yI);var t=fI(e.firestore,TI),n=SI(t),r=new qE(t);return function(e,t){var n=new hp;return e.asyncQueue.enqueueAndForget(He(Je().mark((function r(){return Je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=He(Je().mark((function e(t,n,r){var i,a,o,u,s;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ww(t,n,!0);case 3:i=e.sent,a=new Rx(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=dx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,X_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new yE(t,r,e,n)}))}function GE(e,t,n){e=fI(e,mI);var r=fI(e.firestore,TI),i=VE(e.converter,t,n);return JE(r,[WI(GI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ey.none())])}function WE(e,t,n){e=fI(e,mI);for(var r=fI(e.firestore,TI),i=GI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return JE(r,[("string"==typeof(t=ze(t))||t instanceof LI?eE(i,"updateDoc",e._key,t,n,o):ZI(i,"updateDoc",e._key,t)).toMutation(e._key,ey.exists(!0))])}function HE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ze(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||II(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(II(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof mI)l=fI(e.firestore,TI),f=xm(e._key.path),c={next:function(t){n[s]&&n[s]($E(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=fI(e,yI);l=fI(p.firestore,TI),f=p._query;var v=new qE(l);c={next:function(e){n[s]&&n[s](new yE(l,v,p,e))},error:n[s+1],complete:n[s+2]},wE(e._query)}return function(e,t,n,r){var i=new V_(r),a=new Tx(t,i,n);return e.asyncQueue.enqueueAndForget(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kx,t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=bx,t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SI(l),f,h,c)}function QE(e,t){return function(e,t){var n=new V_(t);return e.asyncQueue.enqueueAndForget(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cp(e).Tu.add(t),t.next()},t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(He(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cp(e).Tu.delete(t)},t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SI(e=fI(e,TI)),II(t)?t:{next:t})}function JE(e,t){return function(e,t){var n=new hp;return e.asyncQueue.enqueueAndForget(He(Je().mark((function r(){return Je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=zx,r.next=3,eI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(SI(e),t)}function $E(e,t,n){var r=n.docs.get(t._key),i=new qE(e);return new vE(e,i,t._key,r,new pE(n.hasPendingWrites,n.fromCache),t.converter)}var YE=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r))._firestore=e,i}return ie(n,[{key:"get",value:function(e){var t=this,r=BE(e,this._firestore),i=new qE(this._firestore);return In(ce(n.prototype),"get",this).call(this,e).then((function(e){return new vE(t._firestore,i,r._key,e._document,new pE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ne(this,e),this._firestore=t,this._transaction=n,this._dataReader=GI(t)}return ie(e,[{key:"get",value:function(e){var t=this,n=BE(e,this._firestore),r=new UE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return up();var i=e[0];if(i.isFoundDocument())return new fE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new fE(t._firestore,r,n._key,null,n.converter);throw up()}))}},{key:"set",value:function(e,t,n){var r=BE(e,this._firestore),i=VE(r.converter,t,n),a=WI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=BE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ze(t))||t instanceof LI?eE(this._dataReader,"Transaction.update",i._key,t,n,o):ZI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=BE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function XE(e,t,n){e=fI(e,TI);var r=Object.assign(Object.assign({},ME),n);return function(e){if(e.maxAttempts<1)throw new fp(lp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new hp;return e.asyncQueue.enqueueAndForget(He(Je().mark((function i(){var a;return Je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return J_(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new B_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(SI(e),(function(n){return t(new YE(e,n))}),r)}function ZE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $I("arrayUnion",t)}function eT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new YI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ep=e}(Gt),Vt(new $e("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new TI(i,new mp(e.getProvider("auth-internal")),new wp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Yt(Xd,"3.4.14",e),Yt(Xd,"3.4.14","esm2017")}();function tT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function nT(){if("undefined"===typeof Uint8Array)throw new fp("unimplemented","Uint8Arrays are not available in this environment.")}function rT(){if("undefined"==typeof atob)throw new fp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var iT=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"toBase64",value:function(){return rT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return nT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return rT(),new e(MI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return nT(),new e(MI.fromUint8Array(t))}}]),e}();function aT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ae(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var oT=function(){function e(){ne(this,e)}return ie(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){PI(e=fI(e,TI));var n=SI(e),r=e._freezeSettings(),i=new M_;return NI(n,i,new P_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){PI(e=fI(e,TI));var t=SI(e),n=e._freezeSettings(),r=new M_;return NI(t,r,new L_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fp(lp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new hp;return e._queue.enqueueAndForgetEvenWhileRestricted(He(Je().mark((function n(){return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=He(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qp.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Qp.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Dw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),uT=function(){function e(t,n,r){var i=this;ne(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Iv||(this._appCompat=t)}return ie(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ap("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return AI(this._delegate)}},{key:"disableNetwork",value:function(){return DI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&uI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new hp;return e.asyncQueue.enqueueAndForget(He(Je().mark((function n(){return Je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e_,n.next=3,eI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(SI(e=fI(e,TI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return QE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new bT(this,kI(this._delegate,e))}catch(t){throw dT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new hT(this,wI(this._delegate,e))}catch(t){throw dT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new gT(this,function(e,t){if(e=fI(e,pI),oI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fp(lp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new yI(e,null,function(e){return new wm(Np.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw dT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return XE(this._delegate,(function(n){return e(new cT(t,n))}))}},{key:"batch",value:function(){var e=this;return SI(this._delegate),new lT(new jE(this._delegate,(function(t){return JE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return OI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return RI(this._delegate,e).then((function(e){return e?new gT(t,e):null}))}}]),e}(),sT=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new iT(new MI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return hT.forKey(t,this.firestore,null)}}]),n}(FE);var cT=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new sT(t)}return ie(e,[{key:"get",value:function(e){var t=this,n=xT(e);return this._delegate.get(n).then((function(e){return new mT(t._firestore,new vE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=xT(e);return n?(tT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=xT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=xT(e);return this._delegate.delete(t),this}}]),e}(),lT=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"set",value:function(e,t,n){var r=xT(e);return n?(tT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=xT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=xT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),fT=function(){function e(t,n,r){ne(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ie(e,[{key:"fromFirestore",value:function(e,t){var n=new mE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new sT(t),n),i.set(n,a)),a}}]),e}();fT.INSTANCES=new WeakMap;var hT=function(){function e(t,n){ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sT(t)}return ie(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new bT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new bT(this.firestore,kI(this._delegate,e))}catch(t){throw dT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ze(e))instanceof mI&&bI(this._delegate,e)}},{key:"set",value:function(e,t){t=tT("DocumentReference.set",t);try{return t?GE(this._delegate,e,t):GE(this._delegate,e)}catch(n){throw dT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?WE(this._delegate,e):WE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw dT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return JE(fI(e.firestore,TI),[new vy(e._key,ey.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pT(n),a=vT(n,(function(t){return new mT(e.firestore,new vE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return HE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?zE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fI(e,mI);var t=fI(e.firestore,TI);return rI(SI(t),e._key,{source:"server"}).then((function(n){return $E(t,e,n)}))}(this._delegate):function(e){e=fI(e,mI);var t=fI(e.firestore,TI);return rI(SI(t),e._key).then((function(n){return $E(t,e,n)}))}(this._delegate),t.then((function(e){return new mT(n.firestore,new vE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new mI(n._delegate,r,new Op(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new mI(n._delegate,r,t))}}]),e}();function dT(e,t,n){return e.message=e.message.replace(t,n),e}function pT(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!aT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function vT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=aT(e[0])?e[0]:aT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mT=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"ref",get:function(){return new hT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return kE(this._delegate,e._delegate)}}]),e}(),yT=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||up()}(void 0!==t),t}}]),n}(mT),gT=function(){function e(t,n){ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sT(t)}return ie(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,xE(this._delegate,function(e,t,n){var r=t,i=dE("where",e);return new _E(i,r,n)}(t,n,r)))}catch(i){throw dT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,xE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=dE("orderBy",e);return new IE(n,t)}(t,n)))}catch(r){throw dT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,xE(this._delegate,function(e){return hI("limit",e),new EE("limit",e,"F")}(t)))}catch(n){throw dT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,xE(this._delegate,function(e){return hI("limitToLast",e),new EE("limitToLast",e,"L")}(t)))}catch(n){throw dT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,xE(this._delegate,SE.apply(void 0,arguments)))}catch(t){throw dT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,xE(this._delegate,CE.apply(void 0,arguments)))}catch(t){throw dT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,xE(this._delegate,AE.apply(void 0,arguments)))}catch(t){throw dT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,xE(this._delegate,DE.apply(void 0,arguments)))}catch(t){throw dT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return xI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?KE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fI(e,yI);var t=fI(e.firestore,TI),n=SI(t),r=new qE(t);return iI(n,e._query,{source:"server"}).then((function(n){return new yE(t,r,e,n)}))}(this._delegate):function(e){e=fI(e,yI);var t=fI(e.firestore,TI),n=SI(t),r=new qE(t);return wE(e._query),iI(n,e._query).then((function(n){return new yE(t,r,e,n)}))}(this._delegate),t.then((function(e){return new wT(n.firestore,new yE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pT(n),a=vT(n,(function(t){return new wT(e.firestore,new yE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return HE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),kT=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new yT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),wT=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"query",get:function(){return new gT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new yT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new kT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new yT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return kE(this._delegate,e._delegate)}}]),e}(),bT=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ie(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new hT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new hT(this.firestore,void 0===e?wI(this._delegate):wI(this._delegate,e))}catch(t){throw dT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=fI(e.firestore,TI),r=wI(e),i=VE(e.converter,t);return JE(n,[WI(GI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ey.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new hT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return bI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(fT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(gT);function xT(e){return fI(e,mI)}var _T=function(){function e(){ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=pe(LI,n)}return ie(e,[{key:"isEqual",value:function(e){return(e=ze(e))instanceof LI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Dp.keyField().canonicalString())}}]),e}(),IT=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new JI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new HI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=ZE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new XI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),ET={Firestore:uT,GeoPoint:VI,Timestamp:Tp,Blob:iT,Transaction:cT,WriteBatch:lT,DocumentReference:hT,DocumentSnapshot:mT,Query:gT,QueryDocumentSnapshot:yT,QuerySnapshot:wT,CollectionReference:bT,FieldPath:_T,FieldValue:IT,setLogLevel:function(e){!function(e){tp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new $e("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ET)))}(e,(function(e,t){return new uT(e,t,new oT)})),e.registerVersion("@firebase/firestore-compat","0.1.23")}(xn);xn.initializeApp({apiKey:"AIzaSyD8VgNZ_7f5wZGCQKsryDbh_EMGJbxHMW8",authDomain:"portfolio-a4b84.firebaseapp.com",projectId:"portfolio-a4b84",storageBucket:"portfolio-a4b84.appspot.com",messagingSenderId:"913526930072",appId:"1:913526930072:web:cc344d6a5dc959fd162eed"});var TT=xn,ST=n(184);function CT(){window.scrollTo({top:document.getElementById("projects").offsetTop-48,behavior:"smooth"})}function NT(){window.scrollTo({top:document.getElementById("contact").offsetTop,behavior:"smooth"})}var AT=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(""),2),c=u[0],l=u[1],f=s((0,t.useState)(""),2),h=f[0],d=f[1];return(0,ST.jsxs)("div",{className:"home",children:[(0,ST.jsxs)("section",{className:"home-hero",children:[(0,ST.jsxs)("section",{className:"home-hero-one",children:[(0,ST.jsx)("h1",{className:"home-hero-one-title font_sans-serif font_regular",children:"Oscar Lee"}),(0,ST.jsx)("h2",{className:"home-hero-one-subtitle font_sans-serif font_bold",children:"Front-end Developer"})]}),(0,ST.jsxs)("section",{className:"home-hero-two",children:[(0,ST.jsx)("section",{className:"home-hero-two-one",children:(0,ST.jsxs)("p",{className:"home-hero-two-one-paragraph font_sans-serif font_regular",children:["Front-end developer specializing in developing web pages and dynamic web applications. See my featured projects below, or ",(0,ST.jsx)($,{to:"/resume.pdf",download:!0,children:"download my resume here"}),"."]})}),(0,ST.jsxs)("section",{className:"home-hero-two-two",children:[(0,ST.jsx)("span",{className:"home-hero-two-two-span primary font_sans-serif font_medium",onClick:CT,children:"View projects"}),(0,ST.jsx)("span",{className:"home-hero-two-two-span secondary font_sans-serif font_medium",onClick:NT,children:"Contact me"})]})]})]}),(0,ST.jsx)("section",{className:"home-projects",id:"projects",children:(0,ST.jsxs)("ul",{className:"home-projects-list",children:[(0,ST.jsxs)("li",{className:"home-projects-list-item",children:[(0,ST.jsx)("img",{src:Y,alt:"project one",className:"home-projects-list-item-image"}),(0,ST.jsx)("p",{className:"font_bold",children:"Project name"})]}),(0,ST.jsxs)("li",{className:"home-projects-list-item",children:[(0,ST.jsx)("img",{src:X,alt:"project two",className:"home-projects-list-item-image"}),(0,ST.jsx)("p",{className:"font_bold",children:"Project name"})]}),(0,ST.jsxs)("li",{className:"home-projects-list-item",children:[(0,ST.jsx)("img",{src:Z,alt:"project three",className:"home-projects-list-item-image"}),(0,ST.jsx)("p",{className:"font_bold",children:"Project name"})]}),(0,ST.jsxs)("li",{className:"home-projects-list-item",children:[(0,ST.jsx)("img",{src:ee,alt:"project four",className:"home-projects-list-item-image"}),(0,ST.jsx)("p",{className:"font_bold",children:"Project name"})]})]})}),(0,ST.jsxs)("section",{className:"home-contact",id:"contact",children:[(0,ST.jsx)("h2",{className:"home-contact-title font_medium",children:"Contact me"}),(0,ST.jsxs)("form",{className:"home-contact-form",onSubmit:function(e){e.preventDefault(),TT.firestore().collection("messages").add({firstName:n,lastName:a,email:c,message:h}).then((function(){alert("Message has been submitted")})).catch((function(e){alert(e.message)})),r(""),o(""),l(""),d("")},children:[(0,ST.jsxs)("div",{className:"home-contact-form-field",children:[(0,ST.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"First name"}),(0,ST.jsx)("input",{type:"text",placeholder:"John",value:n,onChange:function(e){return r(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,ST.jsxs)("div",{className:"home-contact-form-field",children:[(0,ST.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"Last name"}),(0,ST.jsx)("input",{type:"text",placeholder:"Doe",value:a,onChange:function(e){return o(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,ST.jsxs)("div",{className:"home-contact-form-field",children:[(0,ST.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"Email address"}),(0,ST.jsx)("input",{type:"email",placeholder:"you@company.com",value:c,onChange:function(e){return l(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,ST.jsxs)("div",{className:"home-contact-form-field",children:[(0,ST.jsx)("p",{className:"home-contact-form-field-label font_regular",children:"Message"}),(0,ST.jsx)("textarea",{placeholder:"Lorem ipsum dolor sit amet",value:h,onChange:function(e){return d(e.target.value)},className:"home-contact-form-field-input",required:!0})]}),(0,ST.jsx)("input",{type:"submit",value:"Send Message",className:"home-contact-form-field-input font_medium"})]})]}),(0,ST.jsxs)("section",{className:"home-footer",children:[(0,ST.jsx)("div",{className:"home-footer-one",children:(0,ST.jsxs)("ul",{className:"home-footer-one-list",children:[(0,ST.jsxs)("li",{children:["GitHub ",(0,ST.jsx)("span",{className:"font_medium",children:"@oscarlee1"})]}),(0,ST.jsxs)("li",{children:["Email ",(0,ST.jsx)("span",{className:"font_medium",children:"imoscarlee1@gmail.com"})]})]})}),(0,ST.jsxs)("div",{className:"home-footer-two",children:[(0,ST.jsx)("p",{children:"Oscar Lee"}),(0,ST.jsx)("p",{children:"\xa9 Oscar Lee 2022"})]})]})]})},DT=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"render",value:function(){return(0,ST.jsx)("div",{className:"projects",children:(0,ST.jsx)("h1",{className:"projects-title",children:"Projects"})})}}]),n}(t.Component),OT=DT,RT=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"render",value:function(){return(0,ST.jsx)("div",{children:(0,ST.jsx)("h1",{children:"NotFound"})})}}]),n}(t.Component),PT=RT;var LT=function(){return(0,ST.jsx)(J,{basename:"portfolio",children:(0,ST.jsxs)(E,{children:[(0,ST.jsx)(_,{path:"/",element:(0,ST.jsx)(AT,{})}),(0,ST.jsx)(_,{path:"/projects",element:(0,ST.jsx)(OT,{})}),(0,ST.jsx)(_,{path:"*",element:(0,ST.jsx)(PT,{})})]})})},MT=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,ST.jsx)(t.StrictMode,{children:(0,ST.jsx)(LT,{})}),document.getElementById("root")),MT()}()}();
//# sourceMappingURL=main.db4d9542.js.map